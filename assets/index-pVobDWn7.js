(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var pf={exports:{}},ba={},mf={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function EA(){if(ay)return Ce;ay=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(b){return b===null||typeof b!="object"?null:(b=w&&b[w]||b["@@iterator"],typeof b=="function"?b:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,N={};function M(b,K,ge){this.props=b,this.context=K,this.refs=N,this.updater=ge||P}M.prototype.isReactComponent={},M.prototype.setState=function(b,K){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,K,"setState")},M.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function q(){}q.prototype=M.prototype;function H(b,K,ge){this.props=b,this.context=K,this.refs=N,this.updater=ge||P}var G=H.prototype=new q;G.constructor=H,O(G,M.prototype),G.isPureReactComponent=!0;var ne=Array.isArray,re=Object.prototype.hasOwnProperty,ae={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(b,K,ge){var Re,Pe={},De=null,Fe=null;if(K!=null)for(Re in K.ref!==void 0&&(Fe=K.ref),K.key!==void 0&&(De=""+K.key),K)re.call(K,Re)&&!k.hasOwnProperty(Re)&&(Pe[Re]=K[Re]);var Ue=arguments.length-2;if(Ue===1)Pe.children=ge;else if(1<Ue){for(var $e=Array(Ue),Tt=0;Tt<Ue;Tt++)$e[Tt]=arguments[Tt+2];Pe.children=$e}if(b&&b.defaultProps)for(Re in Ue=b.defaultProps,Ue)Pe[Re]===void 0&&(Pe[Re]=Ue[Re]);return{$$typeof:n,type:b,key:De,ref:Fe,props:Pe,_owner:ae.current}}function R(b,K){return{$$typeof:n,type:b.type,key:K,ref:b.ref,props:b.props,_owner:b._owner}}function V(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function L(b){var K={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ge){return K[ge]})}var F=/\/+/g;function C(b,K){return typeof b=="object"&&b!==null&&b.key!=null?L(""+b.key):K.toString(36)}function Xe(b,K,ge,Re,Pe){var De=typeof b;(De==="undefined"||De==="boolean")&&(b=null);var Fe=!1;if(b===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch(b.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=b,Pe=Pe(Fe),b=Re===""?"."+C(Fe,0):Re,ne(Pe)?(ge="",b!=null&&(ge=b.replace(F,"$&/")+"/"),Xe(Pe,K,ge,"",function(Tt){return Tt})):Pe!=null&&(V(Pe)&&(Pe=R(Pe,ge+(!Pe.key||Fe&&Fe.key===Pe.key?"":(""+Pe.key).replace(F,"$&/")+"/")+b)),K.push(Pe)),1;if(Fe=0,Re=Re===""?".":Re+":",ne(b))for(var Ue=0;Ue<b.length;Ue++){De=b[Ue];var $e=Re+C(De,Ue);Fe+=Xe(De,K,ge,$e,Pe)}else if($e=T(b),typeof $e=="function")for(b=$e.call(b),Ue=0;!(De=b.next()).done;)De=De.value,$e=Re+C(De,Ue++),Fe+=Xe(De,K,ge,$e,Pe);else if(De==="object")throw K=String(b),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Ct(b,K,ge){if(b==null)return b;var Re=[],Pe=0;return Xe(b,Re,"","",function(De){return K.call(ge,De,Pe++)}),Re}function xt(b){if(b._status===-1){var K=b._result;K=K(),K.then(function(ge){(b._status===0||b._status===-1)&&(b._status=1,b._result=ge)},function(ge){(b._status===0||b._status===-1)&&(b._status=2,b._result=ge)}),b._status===-1&&(b._status=0,b._result=K)}if(b._status===1)return b._result.default;throw b._result}var Se={current:null},ee={transition:null},me={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:ee,ReactCurrentOwner:ae};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Ct,forEach:function(b,K,ge){Ct(b,function(){K.apply(this,arguments)},ge)},count:function(b){var K=0;return Ct(b,function(){K++}),K},toArray:function(b){return Ct(b,function(K){return K})||[]},only:function(b){if(!V(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ce.Component=M,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=H,Ce.StrictMode=i,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=ie,Ce.cloneElement=function(b,K,ge){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Re=O({},b.props),Pe=b.key,De=b.ref,Fe=b._owner;if(K!=null){if(K.ref!==void 0&&(De=K.ref,Fe=ae.current),K.key!==void 0&&(Pe=""+K.key),b.type&&b.type.defaultProps)var Ue=b.type.defaultProps;for($e in K)re.call(K,$e)&&!k.hasOwnProperty($e)&&(Re[$e]=K[$e]===void 0&&Ue!==void 0?Ue[$e]:K[$e])}var $e=arguments.length-2;if($e===1)Re.children=ge;else if(1<$e){Ue=Array($e);for(var Tt=0;Tt<$e;Tt++)Ue[Tt]=arguments[Tt+2];Re.children=Ue}return{$$typeof:n,type:b.type,key:Pe,ref:De,props:Re,_owner:Fe}},Ce.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Ce.createElement=S,Ce.createFactory=function(b){var K=S.bind(null,b);return K.type=b,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(b){return{$$typeof:f,render:b}},Ce.isValidElement=V,Ce.lazy=function(b){return{$$typeof:_,_payload:{_status:-1,_result:b},_init:xt}},Ce.memo=function(b,K){return{$$typeof:g,type:b,compare:K===void 0?null:K}},Ce.startTransition=function(b){var K=ee.transition;ee.transition={};try{b()}finally{ee.transition=K}},Ce.unstable_act=ie,Ce.useCallback=function(b,K){return Se.current.useCallback(b,K)},Ce.useContext=function(b){return Se.current.useContext(b)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(b){return Se.current.useDeferredValue(b)},Ce.useEffect=function(b,K){return Se.current.useEffect(b,K)},Ce.useId=function(){return Se.current.useId()},Ce.useImperativeHandle=function(b,K,ge){return Se.current.useImperativeHandle(b,K,ge)},Ce.useInsertionEffect=function(b,K){return Se.current.useInsertionEffect(b,K)},Ce.useLayoutEffect=function(b,K){return Se.current.useLayoutEffect(b,K)},Ce.useMemo=function(b,K){return Se.current.useMemo(b,K)},Ce.useReducer=function(b,K,ge){return Se.current.useReducer(b,K,ge)},Ce.useRef=function(b){return Se.current.useRef(b)},Ce.useState=function(b){return Se.current.useState(b)},Ce.useSyncExternalStore=function(b,K,ge){return Se.current.useSyncExternalStore(b,K,ge)},Ce.useTransition=function(){return Se.current.useTransition()},Ce.version="18.3.1",Ce}var ly;function kd(){return ly||(ly=1,mf.exports=EA()),mf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function TA(){if(uy)return ba;uy=1;var n=kd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,g){var _,w={},T=null,P=null;g!==void 0&&(T=""+g),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(w[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:f,key:T,ref:P,props:w,_owner:o.current}}return ba.Fragment=t,ba.jsx=c,ba.jsxs=c,ba}var cy;function AA(){return cy||(cy=1,pf.exports=TA()),pf.exports}var de=AA(),fe=kd(),ju={},gf={exports:{}},an={},yf={exports:{}},_f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function SA(){return hy||(hy=1,function(n){function e(ee,me){var ie=ee.length;ee.push(me);e:for(;0<ie;){var b=ie-1>>>1,K=ee[b];if(0<o(K,me))ee[b]=me,ee[ie]=K,ie=b;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var me=ee[0],ie=ee.pop();if(ie!==me){ee[0]=ie;e:for(var b=0,K=ee.length,ge=K>>>1;b<ge;){var Re=2*(b+1)-1,Pe=ee[Re],De=Re+1,Fe=ee[De];if(0>o(Pe,ie))De<K&&0>o(Fe,Pe)?(ee[b]=Fe,ee[De]=ie,b=De):(ee[b]=Pe,ee[Re]=ie,b=Re);else if(De<K&&0>o(Fe,ie))ee[b]=Fe,ee[De]=ie,b=De;else break e}}return me}function o(ee,me){var ie=ee.sortIndex-me.sortIndex;return ie!==0?ie:ee.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],g=[],_=1,w=null,T=3,P=!1,O=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ee){for(var me=t(g);me!==null;){if(me.callback===null)i(g);else if(me.startTime<=ee)i(g),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(g)}}function ne(ee){if(N=!1,G(ee),!O)if(t(p)!==null)O=!0,xt(re);else{var me=t(g);me!==null&&Se(ne,me.startTime-ee)}}function re(ee,me){O=!1,N&&(N=!1,q(S),S=-1),P=!0;var ie=T;try{for(G(me),w=t(p);w!==null&&(!(w.expirationTime>me)||ee&&!L());){var b=w.callback;if(typeof b=="function"){w.callback=null,T=w.priorityLevel;var K=b(w.expirationTime<=me);me=n.unstable_now(),typeof K=="function"?w.callback=K:w===t(p)&&i(p),G(me)}else i(p);w=t(p)}if(w!==null)var ge=!0;else{var Re=t(g);Re!==null&&Se(ne,Re.startTime-me),ge=!1}return ge}finally{w=null,T=ie,P=!1}}var ae=!1,k=null,S=-1,R=5,V=-1;function L(){return!(n.unstable_now()-V<R)}function F(){if(k!==null){var ee=n.unstable_now();V=ee;var me=!0;try{me=k(!0,ee)}finally{me?C():(ae=!1,k=null)}}else ae=!1}var C;if(typeof H=="function")C=function(){H(F)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,Ct=Xe.port2;Xe.port1.onmessage=F,C=function(){Ct.postMessage(null)}}else C=function(){M(F,0)};function xt(ee){k=ee,ae||(ae=!0,C())}function Se(ee,me){S=M(function(){ee(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){O||P||(O=!0,xt(re))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var ie=T;T=me;try{return ee()}finally{T=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,me){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ie=T;T=ee;try{return me()}finally{T=ie}},n.unstable_scheduleCallback=function(ee,me,ie){var b=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?b+ie:b):ie=b,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ie+K,ee={id:_++,callback:me,priorityLevel:ee,startTime:ie,expirationTime:K,sortIndex:-1},ie>b?(ee.sortIndex=ie,e(g,ee),t(p)===null&&ee===t(g)&&(N?(q(S),S=-1):N=!0,Se(ne,ie-b))):(ee.sortIndex=K,e(p,ee),O||P||(O=!0,xt(re))),ee},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ee){var me=T;return function(){var ie=T;T=me;try{return ee.apply(this,arguments)}finally{T=ie}}}}(_f)),_f}var fy;function IA(){return fy||(fy=1,yf.exports=SA()),yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function RA(){if(dy)return an;dy=1;var n=kd(),e=IA();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function T(r){return p.call(w,r)?!0:p.call(_,r)?!1:g.test(r)?w[r]=!0:(_[r]=!0,!1)}function P(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function O(r,s,a,h){if(s===null||typeof s>"u"||P(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function N(r,s,a,h,d,y,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=E}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){M[r]=new N(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];M[s]=new N(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){M[r]=new N(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){M[r]=new N(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){M[r]=new N(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){M[r]=new N(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){M[r]=new N(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){M[r]=new N(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){M[r]=new N(r,5,!1,r.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function H(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(q,H);M[s]=new N(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(q,H);M[s]=new N(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(q,H);M[s]=new N(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){M[r]=new N(r,1,!1,r.toLowerCase(),null,!1,!1)}),M.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){M[r]=new N(r,1,!1,r.toLowerCase(),null,!0,!0)});function G(r,s,a,h){var d=M.hasOwnProperty(s)?M[s]:null;(d!==null?d.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(O(s,a,d,h)&&(a=null),h||d===null?T(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ae=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),ee=Symbol.iterator;function me(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,b;function K(r){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+r}var ge=!1;function Re(r,s){if(!r||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(r,[],s)}else{try{s.call()}catch(z){h=z}r.call(s.prototype)}else{try{throw Error()}catch(z){h=z}r()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),y=h.stack.split(`
`),E=d.length-1,I=y.length-1;1<=E&&0<=I&&d[E]!==y[I];)I--;for(;1<=E&&0<=I;E--,I--)if(d[E]!==y[I]){if(E!==1||I!==1)do if(E--,I--,0>I||d[E]!==y[I]){var x=`
`+d[E].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=E&&0<=I);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?K(r):""}function Pe(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Re(r.type,!1),r;case 11:return r=Re(r.type.render,!1),r;case 1:return r=Re(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case ae:return"Portal";case R:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case Xe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case V:return(r._context.displayName||"Context")+".Provider";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ct:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case xt:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}function Fe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $e(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tt(r){var s=$e(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,y=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function mr(r){r._valueTracker||(r._valueTracker=Tt(r))}function ws(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=$e(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function Br(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function xi(r,s){var a=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Es(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Ue(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function $o(r,s){s=s.checked,s!=null&&G(r,"checked",s,!1)}function qo(r,s){$o(r,s);var a=Ue(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ts(r,s.type,a):s.hasOwnProperty("defaultValue")&&Ts(r,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Rl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Ts(r,s,a){(s!=="number"||Br(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var gr=Array.isArray;function yr(r,s,a,h){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Ue(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Wo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function As(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Ue(a)}}function Ss(r,s){var a=Ue(s.value),h=Ue(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function Ho(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function mt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?mt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var _r,Ko=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,d)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(_r=_r||document.createElement("div"),_r.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=_r.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function jr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vi=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(r){Vi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ki[s]=ki[r]})});function Go(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ki.hasOwnProperty(r)&&ki[r]?(""+s).trim():s+"px"}function Qo(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Go(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var Xo=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(r,s){if(s){if(Xo[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Jo(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Di=null;function Is(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Rs=null,vn=null,Yn=null;function Ps(r){if(r=Ta(r)){if(typeof Rs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=nu(s),Rs(r.stateNode,r.type,s))}}function Jn(r){vn?Yn?Yn.push(r):Yn=[r]:vn=r}function Zo(){if(vn){var r=vn,s=Yn;if(Yn=vn=null,Ps(r),s)for(r=0;r<s.length;r++)Ps(s[r])}}function Ni(r,s){return r(s)}function ea(){}var vr=!1;function ta(r,s,a){if(vr)return r(s,a);vr=!0;try{return Ni(r,s,a)}finally{vr=!1,(vn!==null||Yn!==null)&&(ea(),Zo())}}function at(r,s){var a=r.stateNode;if(a===null)return null;var h=nu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Cs=!1;if(f)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{Cs=!1}function Mi(r,s,a,h,d,y,E,I,x){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var Li=!1,xs=null,Nn=!1,na=null,jc={onError:function(r){Li=!0,xs=r}};function ks(r,s,a,h,d,y,E,I,x){Li=!1,xs=null,Mi.apply(jc,arguments)}function Pl(r,s,a,h,d,y,E,I,x){if(ks.apply(this,arguments),Li){if(Li){var z=xs;Li=!1,xs=null}else throw Error(t(198));Nn||(Nn=!0,na=z)}}function Mn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Oi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Ln(r){if(Mn(r)!==r)throw Error(t(188))}function Cl(r){var s=r.alternate;if(!s){if(s=Mn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var d=a.return;if(d===null)break;var y=d.alternate;if(y===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===y.child){for(y=d.child;y;){if(y===a)return Ln(d),r;if(y===h)return Ln(d),s;y=y.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=y;else{for(var E=!1,I=d.child;I;){if(I===a){E=!0,a=d,h=y;break}if(I===h){E=!0,h=d,a=y;break}I=I.sibling}if(!E){for(I=y.child;I;){if(I===a){E=!0,a=y,h=d;break}if(I===h){E=!0,h=y,a=d;break}I=I.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ra(r){return r=Cl(r),r!==null?Vs(r):null}function Vs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Vs(r);if(s!==null)return s;r=r.sibling}return null}var Ds=e.unstable_scheduleCallback,ia=e.unstable_cancelCallback,xl=e.unstable_shouldYield,zc=e.unstable_requestPaint,qe=e.unstable_now,kl=e.unstable_getCurrentPriorityLevel,bi=e.unstable_ImmediatePriority,zr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,sa=e.unstable_LowPriority,Vl=e.unstable_IdlePriority,Fi=null,un=null;function Dl(r){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Fi,r,void 0,(r.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Ml,oa=Math.log,Nl=Math.LN2;function Ml(r){return r>>>=0,r===0?32:31-(oa(r)/Nl|0)|0}var Ns=64,Ms=4194304;function $r(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ui(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,y=r.pingedLanes,E=a&268435455;if(E!==0){var I=E&~d;I!==0?h=$r(I):(y&=E,y!==0&&(h=$r(y)))}else E=a&~d,E!==0?h=$r(E):y!==0&&(h=$r(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&d)&&(d=h&-h,y=s&-s,d>=y||d===16&&(y&4194240)!==0))return s;if(h&4&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-Kt(s),d=1<<a,h|=r[a],s&=~d;return h}function $c(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,y=r.pendingLanes;0<y;){var E=31-Kt(y),I=1<<E,x=d[E];x===-1?(!(I&a)||I&h)&&(d[E]=$c(I,s)):x<=s&&(r.expiredLanes|=I),y&=~I}}function cn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Bi(){var r=Ns;return Ns<<=1,!(Ns&4194240)&&(Ns=64),r}function qr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Wr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Kt(s),r[s]=a}function ze(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-Kt(a),y=1<<d;s[d]=0,h[d]=-1,r[d]=-1,a&=~y}}function Hr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-Kt(a),d=1<<h;d&s|r[h]&s&&(r[h]|=s),a&=~d}}var ke=0;function Kr(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Ll,Ls,Ol,bl,Fl,aa=!1,Zn=[],kt=null,On=null,bn=null,Gr=new Map,En=new Map,er=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ul(r,s){switch(r){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Gr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(s.pointerId)}}function Zt(r,s,a,h,d,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:y,targetContainers:[d]},s!==null&&(s=Ta(s),s!==null&&Ls(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Wc(r,s,a,h,d){switch(s){case"focusin":return kt=Zt(kt,r,s,a,h,d),!0;case"dragenter":return On=Zt(On,r,s,a,h,d),!0;case"mouseover":return bn=Zt(bn,r,s,a,h,d),!0;case"pointerover":var y=d.pointerId;return Gr.set(y,Zt(Gr.get(y)||null,r,s,a,h,d)),!0;case"gotpointercapture":return y=d.pointerId,En.set(y,Zt(En.get(y)||null,r,s,a,h,d)),!0}return!1}function Bl(r){var s=Wi(r.target);if(s!==null){var a=Mn(s);if(a!==null){if(s=a.tag,s===13){if(s=Oi(a),s!==null){r.blockedOn=s,Fl(r.priority,function(){Ol(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Er(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Os(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Di=h,a.target.dispatchEvent(h),Di=null}else return s=Ta(a),s!==null&&Ls(s),r.blockedOn=a,!1;s.shift()}return!0}function ji(r,s,a){Er(r)&&a.delete(s)}function jl(){aa=!1,kt!==null&&Er(kt)&&(kt=null),On!==null&&Er(On)&&(On=null),bn!==null&&Er(bn)&&(bn=null),Gr.forEach(ji),En.forEach(ji)}function Fn(r,s){r.blockedOn===s&&(r.blockedOn=null,aa||(aa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jl)))}function Un(r){function s(d){return Fn(d,r)}if(0<Zn.length){Fn(Zn[0],r);for(var a=1;a<Zn.length;a++){var h=Zn[a];h.blockedOn===r&&(h.blockedOn=null)}}for(kt!==null&&Fn(kt,r),On!==null&&Fn(On,r),bn!==null&&Fn(bn,r),Gr.forEach(s),En.forEach(s),a=0;a<er.length;a++)h=er[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<er.length&&(a=er[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&er.shift()}var Tr=ne.ReactCurrentBatchConfig,Qr=!0;function Ye(r,s,a,h){var d=ke,y=Tr.transition;Tr.transition=null;try{ke=1,la(r,s,a,h)}finally{ke=d,Tr.transition=y}}function Hc(r,s,a,h){var d=ke,y=Tr.transition;Tr.transition=null;try{ke=4,la(r,s,a,h)}finally{ke=d,Tr.transition=y}}function la(r,s,a,h){if(Qr){var d=Os(r,s,a,h);if(d===null)rh(r,s,h,zi,a),Ul(r,h);else if(Wc(d,r,s,a,h))h.stopPropagation();else if(Ul(r,h),s&4&&-1<qc.indexOf(r)){for(;d!==null;){var y=Ta(d);if(y!==null&&Ll(y),y=Os(r,s,a,h),y===null&&rh(r,s,h,zi,a),y===d)break;d=y}d!==null&&h.stopPropagation()}else rh(r,s,h,null,a)}}var zi=null;function Os(r,s,a,h){if(zi=null,r=Is(h),r=Wi(r),r!==null)if(s=Mn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Oi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return zi=r,null}function ua(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kl()){case bi:return 1;case zr:return 4;case wn:case sa:return 16;case Vl:return 536870912;default:return 16}default:return 16}}var hn=null,bs=null,en=null;function ca(){if(en)return en;var r,s=bs,a=s.length,h,d="value"in hn?hn.value:hn.textContent,y=d.length;for(r=0;r<a&&s[r]===d[r];r++);var E=a-r;for(h=1;h<=E&&s[a-h]===d[y-h];h++);return en=d.slice(r,1<h?1-h:void 0)}function Fs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function tr(){return!0}function ha(){return!1}function Vt(r){function s(a,h,d,y,E){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(a=r[I],this[I]=a?a(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?tr:ha,this.isPropagationStopped=ha,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=Vt(Bn),nr=ie({},Bn,{view:0,detail:0}),Kc=Vt(nr),Bs,Ar,Xr,$i=ie({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xr&&(Xr&&r.type==="mousemove"?(Bs=r.screenX-Xr.screenX,Ar=r.screenY-Xr.screenY):Ar=Bs=0,Xr=r),Bs)},movementY:function(r){return"movementY"in r?r.movementY:Ar}}),js=Vt($i),fa=ie({},$i,{dataTransfer:0}),zl=Vt(fa),zs=ie({},nr,{relatedTarget:0}),$s=Vt(zs),$l=ie({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=Vt($l),ql=ie({},Bn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wl=Vt(ql),Hl=ie({},Bn,{data:0}),da=Vt(Hl),qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Kl[r])?!!s[r]:!1}function rr(){return Gl}var u=ie({},nr,{key:function(r){if(r.key){var s=qs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Fs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rr,charCode:function(r){return r.type==="keypress"?Fs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Vt(u),v=ie({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Vt(v),U=ie({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rr}),$=Vt(U),te=ie({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=Vt(te),yt=ie({},$i,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=Vt(yt),At=[9,13,27,32],ht=f&&"CompositionEvent"in window,Tn=null;f&&"documentMode"in document&&(Tn=document.documentMode);var fn=f&&"TextEvent"in window&&!Tn,qi=f&&(!ht||Tn&&8<Tn&&11>=Tn),Ws=" ",tm=!1;function nm(r,s){switch(r){case"keyup":return At.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Hs=!1;function v0(r,s){switch(r){case"compositionend":return rm(s);case"keypress":return s.which!==32?null:(tm=!0,Ws);case"textInput":return r=s.data,r===Ws&&tm?null:r;default:return null}}function w0(r,s){if(Hs)return r==="compositionend"||!ht&&nm(r,s)?(r=ca(),en=bs=hn=null,Hs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qi&&s.locale!=="ko"?null:s.data;default:return null}}var E0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function im(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!E0[r.type]:s==="textarea"}function sm(r,s,a,h){Jn(h),s=Zl(s,"onChange"),0<s.length&&(a=new Us("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var pa=null,ma=null;function T0(r){Am(r,0)}function Ql(r){var s=Ys(r);if(ws(s))return r}function A0(r,s){if(r==="change")return s}var om=!1;if(f){var Gc;if(f){var Qc="oninput"in document;if(!Qc){var am=document.createElement("div");am.setAttribute("oninput","return;"),Qc=typeof am.oninput=="function"}Gc=Qc}else Gc=!1;om=Gc&&(!document.documentMode||9<document.documentMode)}function lm(){pa&&(pa.detachEvent("onpropertychange",um),ma=pa=null)}function um(r){if(r.propertyName==="value"&&Ql(ma)){var s=[];sm(s,ma,r,Is(r)),ta(T0,s)}}function S0(r,s,a){r==="focusin"?(lm(),pa=s,ma=a,pa.attachEvent("onpropertychange",um)):r==="focusout"&&lm()}function I0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ql(ma)}function R0(r,s){if(r==="click")return Ql(s)}function P0(r,s){if(r==="input"||r==="change")return Ql(s)}function C0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var jn=typeof Object.is=="function"?Object.is:C0;function ga(r,s){if(jn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(s,d)||!jn(r[d],s[d]))return!1}return!0}function cm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function hm(r,s){var a=cm(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cm(a)}}function fm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?fm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function dm(){for(var r=window,s=Br();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Br(r.document)}return s}function Xc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function x0(r){var s=dm(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&fm(a.ownerDocument.documentElement,a)){if(h!==null&&Xc(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,y=Math.min(h.start,d);h=h.end===void 0?y:Math.min(h.end,d),!r.extend&&y>h&&(d=h,h=y,y=d),d=hm(a,y);var E=hm(a,h);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),y>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var k0=f&&"documentMode"in document&&11>=document.documentMode,Ks=null,Yc=null,ya=null,Jc=!1;function pm(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jc||Ks==null||Ks!==Br(h)||(h=Ks,"selectionStart"in h&&Xc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ya&&ga(ya,h)||(ya=h,h=Zl(Yc,"onSelect"),0<h.length&&(s=new Us("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=Ks)))}function Xl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Gs={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},Zc={},mm={};f&&(mm=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Yl(r){if(Zc[r])return Zc[r];if(!Gs[r])return r;var s=Gs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in mm)return Zc[r]=s[a];return r}var gm=Yl("animationend"),ym=Yl("animationiteration"),_m=Yl("animationstart"),vm=Yl("transitionend"),wm=new Map,Em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(r,s){wm.set(r,s),l(s,[r])}for(var eh=0;eh<Em.length;eh++){var th=Em[eh],V0=th.toLowerCase(),D0=th[0].toUpperCase()+th.slice(1);Yr(V0,"on"+D0)}Yr(gm,"onAnimationEnd"),Yr(ym,"onAnimationIteration"),Yr(_m,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(vm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Tm(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,Pl(h,s,void 0,r),r.currentTarget=null}function Am(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var E=h.length-1;0<=E;E--){var I=h[E],x=I.instance,z=I.currentTarget;if(I=I.listener,x!==y&&d.isPropagationStopped())break e;Tm(d,I,z),y=x}else for(E=0;E<h.length;E++){if(I=h[E],x=I.instance,z=I.currentTarget,I=I.listener,x!==y&&d.isPropagationStopped())break e;Tm(d,I,z),y=x}}}if(Nn)throw r=na,Nn=!1,na=null,r}function He(r,s){var a=s[uh];a===void 0&&(a=s[uh]=new Set);var h=r+"__bubble";a.has(h)||(Sm(s,r,2,!1),a.add(h))}function nh(r,s,a){var h=0;s&&(h|=4),Sm(a,r,h,s)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function va(r){if(!r[Jl]){r[Jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(N0.has(a)||nh(a,!1,r),nh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Jl]||(s[Jl]=!0,nh("selectionchange",!1,s))}}function Sm(r,s,a,h){switch(ua(s)){case 1:var d=Ye;break;case 4:d=Hc;break;default:d=la}a=d.bind(null,s,a,r),d=void 0,!Cs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function rh(r,s,a,h,d){var y=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var I=h.stateNode.containerInfo;if(I===d||I.nodeType===8&&I.parentNode===d)break;if(E===4)for(E=h.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;E=E.return}for(;I!==null;){if(E=Wi(I),E===null)return;if(x=E.tag,x===5||x===6){h=y=E;continue e}I=I.parentNode}}h=h.return}ta(function(){var z=y,Y=Is(a),J=[];e:{var X=wm.get(r);if(X!==void 0){var se=Us,ce=r;switch(r){case"keypress":if(Fs(a)===0)break e;case"keydown":case"keyup":se=m;break;case"focusin":ce="focus",se=$s;break;case"focusout":ce="blur",se=$s;break;case"beforeblur":case"afterblur":se=$s;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=js;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=zl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=$;break;case gm:case ym:case _m:se=Sr;break;case vm:se=je;break;case"scroll":se=Kc;break;case"wheel":se=Ne;break;case"copy":case"cut":case"paste":se=Wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=A}var he=(s&4)!==0,lt=!he&&r==="scroll",B=he?X!==null?X+"Capture":null:X;he=[];for(var D=z,j;D!==null;){j=D;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,B!==null&&(Z=at(D,B),Z!=null&&he.push(wa(D,Z,j)))),lt)break;D=D.return}0<he.length&&(X=new se(X,ce,null,a,Y),J.push({event:X,listeners:he}))}}if(!(s&7)){e:{if(X=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",X&&a!==Di&&(ce=a.relatedTarget||a.fromElement)&&(Wi(ce)||ce[Ir]))break e;if((se||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=z,ce=ce?Wi(ce):null,ce!==null&&(lt=Mn(ce),ce!==lt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=z),se!==ce)){if(he=js,Z="onMouseLeave",B="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(he=A,Z="onPointerLeave",B="onPointerEnter",D="pointer"),lt=se==null?X:Ys(se),j=ce==null?X:Ys(ce),X=new he(Z,D+"leave",se,a,Y),X.target=lt,X.relatedTarget=j,Z=null,Wi(Y)===z&&(he=new he(B,D+"enter",ce,a,Y),he.target=j,he.relatedTarget=lt,Z=he),lt=Z,se&&ce)t:{for(he=se,B=ce,D=0,j=he;j;j=Qs(j))D++;for(j=0,Z=B;Z;Z=Qs(Z))j++;for(;0<D-j;)he=Qs(he),D--;for(;0<j-D;)B=Qs(B),j--;for(;D--;){if(he===B||B!==null&&he===B.alternate)break t;he=Qs(he),B=Qs(B)}he=null}else he=null;se!==null&&Im(J,X,se,he,!1),ce!==null&&lt!==null&&Im(J,lt,ce,he,!0)}}e:{if(X=z?Ys(z):window,se=X.nodeName&&X.nodeName.toLowerCase(),se==="select"||se==="input"&&X.type==="file")var pe=A0;else if(im(X))if(om)pe=P0;else{pe=I0;var _e=S0}else(se=X.nodeName)&&se.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=R0);if(pe&&(pe=pe(r,z))){sm(J,pe,a,Y);break e}_e&&_e(r,X,z),r==="focusout"&&(_e=X._wrapperState)&&_e.controlled&&X.type==="number"&&Ts(X,"number",X.value)}switch(_e=z?Ys(z):window,r){case"focusin":(im(_e)||_e.contentEditable==="true")&&(Ks=_e,Yc=z,ya=null);break;case"focusout":ya=Yc=Ks=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,pm(J,a,Y);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":pm(J,a,Y)}var ve;if(ht)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Hs?nm(r,a)&&(Ee="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(qi&&a.locale!=="ko"&&(Hs||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Hs&&(ve=ca()):(hn=Y,bs="value"in hn?hn.value:hn.textContent,Hs=!0)),_e=Zl(z,Ee),0<_e.length&&(Ee=new da(Ee,r,null,a,Y),J.push({event:Ee,listeners:_e}),ve?Ee.data=ve:(ve=rm(a),ve!==null&&(Ee.data=ve)))),(ve=fn?v0(r,a):w0(r,a))&&(z=Zl(z,"onBeforeInput"),0<z.length&&(Y=new da("onBeforeInput","beforeinput",null,a,Y),J.push({event:Y,listeners:z}),Y.data=ve))}Am(J,s)})}function wa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Zl(r,s){for(var a=s+"Capture",h=[];r!==null;){var d=r,y=d.stateNode;d.tag===5&&y!==null&&(d=y,y=at(r,a),y!=null&&h.unshift(wa(r,y,d)),y=at(r,s),y!=null&&h.push(wa(r,y,d))),r=r.return}return h}function Qs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Im(r,s,a,h,d){for(var y=s._reactName,E=[];a!==null&&a!==h;){var I=a,x=I.alternate,z=I.stateNode;if(x!==null&&x===h)break;I.tag===5&&z!==null&&(I=z,d?(x=at(a,y),x!=null&&E.unshift(wa(a,x,I))):d||(x=at(a,y),x!=null&&E.push(wa(a,x,I)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var M0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function Rm(r){return(typeof r=="string"?r:""+r).replace(M0,`
`).replace(L0,"")}function eu(r,s,a){if(s=Rm(s),Rm(r)!==s&&a)throw Error(t(425))}function tu(){}var ih=null,sh=null;function oh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ah=typeof setTimeout=="function"?setTimeout:void 0,O0=typeof clearTimeout=="function"?clearTimeout:void 0,Pm=typeof Promise=="function"?Promise:void 0,b0=typeof queueMicrotask=="function"?queueMicrotask:typeof Pm<"u"?function(r){return Pm.resolve(null).then(r).catch(F0)}:ah;function F0(r){setTimeout(function(){throw r})}function lh(r,s){var a=s,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),Un(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);Un(s)}function Jr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Cm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),ir="__reactFiber$"+Xs,Ea="__reactProps$"+Xs,Ir="__reactContainer$"+Xs,uh="__reactEvents$"+Xs,U0="__reactListeners$"+Xs,B0="__reactHandles$"+Xs;function Wi(r){var s=r[ir];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Ir]||a[ir]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Cm(r);r!==null;){if(a=r[ir])return a;r=Cm(r)}return s}r=a,a=r.parentNode}return null}function Ta(r){return r=r[ir]||r[Ir],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ys(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function nu(r){return r[Ea]||null}var ch=[],Js=-1;function Zr(r){return{current:r}}function Ke(r){0>Js||(r.current=ch[Js],ch[Js]=null,Js--)}function We(r,s){Js++,ch[Js]=r.current,r.current=s}var ei={},Ft=Zr(ei),tn=Zr(!1),Hi=ei;function Zs(r,s){var a=r.type.contextTypes;if(!a)return ei;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var d={},y;for(y in a)d[y]=s[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function nn(r){return r=r.childContextTypes,r!=null}function ru(){Ke(tn),Ke(Ft)}function xm(r,s,a){if(Ft.current!==ei)throw Error(t(168));We(Ft,s),We(tn,a)}function km(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in s))throw Error(t(108,Fe(r)||"Unknown",d));return ie({},a,h)}function iu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ei,Hi=Ft.current,We(Ft,r),We(tn,tn.current),!0}function Vm(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=km(r,s,Hi),h.__reactInternalMemoizedMergedChildContext=r,Ke(tn),Ke(Ft),We(Ft,r)):Ke(tn),We(tn,a)}var Rr=null,su=!1,hh=!1;function Dm(r){Rr===null?Rr=[r]:Rr.push(r)}function j0(r){su=!0,Dm(r)}function ti(){if(!hh&&Rr!==null){hh=!0;var r=0,s=ke;try{var a=Rr;for(ke=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Rr=null,su=!1}catch(d){throw Rr!==null&&(Rr=Rr.slice(r+1)),Ds(bi,ti),d}finally{ke=s,hh=!1}}return null}var eo=[],to=0,ou=null,au=0,An=[],Sn=0,Ki=null,Pr=1,Cr="";function Gi(r,s){eo[to++]=au,eo[to++]=ou,ou=r,au=s}function Nm(r,s,a){An[Sn++]=Pr,An[Sn++]=Cr,An[Sn++]=Ki,Ki=r;var h=Pr;r=Cr;var d=32-Kt(h)-1;h&=~(1<<d),a+=1;var y=32-Kt(s)+d;if(30<y){var E=d-d%5;y=(h&(1<<E)-1).toString(32),h>>=E,d-=E,Pr=1<<32-Kt(s)+d|a<<d|h,Cr=y+r}else Pr=1<<y|a<<d|h,Cr=r}function fh(r){r.return!==null&&(Gi(r,1),Nm(r,1,0))}function dh(r){for(;r===ou;)ou=eo[--to],eo[to]=null,au=eo[--to],eo[to]=null;for(;r===Ki;)Ki=An[--Sn],An[Sn]=null,Cr=An[--Sn],An[Sn]=null,Pr=An[--Sn],An[Sn]=null}var dn=null,pn=null,Je=!1,zn=null;function Mm(r,s){var a=Cn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Lm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,dn=r,pn=Jr(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,dn=r,pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ki!==null?{id:Pr,overflow:Cr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Cn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,dn=r,pn=null,!0):!1;default:return!1}}function ph(r){return(r.mode&1)!==0&&(r.flags&128)===0}function mh(r){if(Je){var s=pn;if(s){var a=s;if(!Lm(r,s)){if(ph(r))throw Error(t(418));s=Jr(a.nextSibling);var h=dn;s&&Lm(r,s)?Mm(h,a):(r.flags=r.flags&-4097|2,Je=!1,dn=r)}}else{if(ph(r))throw Error(t(418));r.flags=r.flags&-4097|2,Je=!1,dn=r}}}function Om(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;dn=r}function lu(r){if(r!==dn)return!1;if(!Je)return Om(r),Je=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!oh(r.type,r.memoizedProps)),s&&(s=pn)){if(ph(r))throw bm(),Error(t(418));for(;s;)Mm(r,s),s=Jr(s.nextSibling)}if(Om(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){pn=Jr(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}pn=null}}else pn=dn?Jr(r.stateNode.nextSibling):null;return!0}function bm(){for(var r=pn;r;)r=Jr(r.nextSibling)}function no(){pn=dn=null,Je=!1}function gh(r){zn===null?zn=[r]:zn.push(r)}var z0=ne.ReactCurrentBatchConfig;function Aa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(E){var I=d.refs;E===null?delete I[y]:I[y]=E},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function uu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Fm(r){var s=r._init;return s(r._payload)}function Um(r){function s(B,D){if(r){var j=B.deletions;j===null?(B.deletions=[D],B.flags|=16):j.push(D)}}function a(B,D){if(!r)return null;for(;D!==null;)s(B,D),D=D.sibling;return null}function h(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function d(B,D){return B=ui(B,D),B.index=0,B.sibling=null,B}function y(B,D,j){return B.index=j,r?(j=B.alternate,j!==null?(j=j.index,j<D?(B.flags|=2,D):j):(B.flags|=2,D)):(B.flags|=1048576,D)}function E(B){return r&&B.alternate===null&&(B.flags|=2),B}function I(B,D,j,Z){return D===null||D.tag!==6?(D=lf(j,B.mode,Z),D.return=B,D):(D=d(D,j),D.return=B,D)}function x(B,D,j,Z){var pe=j.type;return pe===k?Y(B,D,j.props.children,Z,j.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===xt&&Fm(pe)===D.type)?(Z=d(D,j.props),Z.ref=Aa(B,D,j),Z.return=B,Z):(Z=Nu(j.type,j.key,j.props,null,B.mode,Z),Z.ref=Aa(B,D,j),Z.return=B,Z)}function z(B,D,j,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=uf(j,B.mode,Z),D.return=B,D):(D=d(D,j.children||[]),D.return=B,D)}function Y(B,D,j,Z,pe){return D===null||D.tag!==7?(D=ns(j,B.mode,Z,pe),D.return=B,D):(D=d(D,j),D.return=B,D)}function J(B,D,j){if(typeof D=="string"&&D!==""||typeof D=="number")return D=lf(""+D,B.mode,j),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case re:return j=Nu(D.type,D.key,D.props,null,B.mode,j),j.ref=Aa(B,null,D),j.return=B,j;case ae:return D=uf(D,B.mode,j),D.return=B,D;case xt:var Z=D._init;return J(B,Z(D._payload),j)}if(gr(D)||me(D))return D=ns(D,B.mode,j,null),D.return=B,D;uu(B,D)}return null}function X(B,D,j,Z){var pe=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return pe!==null?null:I(B,D,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case re:return j.key===pe?x(B,D,j,Z):null;case ae:return j.key===pe?z(B,D,j,Z):null;case xt:return pe=j._init,X(B,D,pe(j._payload),Z)}if(gr(j)||me(j))return pe!==null?null:Y(B,D,j,Z,null);uu(B,j)}return null}function se(B,D,j,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return B=B.get(j)||null,I(D,B,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case re:return B=B.get(Z.key===null?j:Z.key)||null,x(D,B,Z,pe);case ae:return B=B.get(Z.key===null?j:Z.key)||null,z(D,B,Z,pe);case xt:var _e=Z._init;return se(B,D,j,_e(Z._payload),pe)}if(gr(Z)||me(Z))return B=B.get(j)||null,Y(D,B,Z,pe,null);uu(D,Z)}return null}function ce(B,D,j,Z){for(var pe=null,_e=null,ve=D,Ee=D=0,Rt=null;ve!==null&&Ee<j.length;Ee++){ve.index>Ee?(Rt=ve,ve=null):Rt=ve.sibling;var be=X(B,ve,j[Ee],Z);if(be===null){ve===null&&(ve=Rt);break}r&&ve&&be.alternate===null&&s(B,ve),D=y(be,D,Ee),_e===null?pe=be:_e.sibling=be,_e=be,ve=Rt}if(Ee===j.length)return a(B,ve),Je&&Gi(B,Ee),pe;if(ve===null){for(;Ee<j.length;Ee++)ve=J(B,j[Ee],Z),ve!==null&&(D=y(ve,D,Ee),_e===null?pe=ve:_e.sibling=ve,_e=ve);return Je&&Gi(B,Ee),pe}for(ve=h(B,ve);Ee<j.length;Ee++)Rt=se(ve,B,Ee,j[Ee],Z),Rt!==null&&(r&&Rt.alternate!==null&&ve.delete(Rt.key===null?Ee:Rt.key),D=y(Rt,D,Ee),_e===null?pe=Rt:_e.sibling=Rt,_e=Rt);return r&&ve.forEach(function(ci){return s(B,ci)}),Je&&Gi(B,Ee),pe}function he(B,D,j,Z){var pe=me(j);if(typeof pe!="function")throw Error(t(150));if(j=pe.call(j),j==null)throw Error(t(151));for(var _e=pe=null,ve=D,Ee=D=0,Rt=null,be=j.next();ve!==null&&!be.done;Ee++,be=j.next()){ve.index>Ee?(Rt=ve,ve=null):Rt=ve.sibling;var ci=X(B,ve,be.value,Z);if(ci===null){ve===null&&(ve=Rt);break}r&&ve&&ci.alternate===null&&s(B,ve),D=y(ci,D,Ee),_e===null?pe=ci:_e.sibling=ci,_e=ci,ve=Rt}if(be.done)return a(B,ve),Je&&Gi(B,Ee),pe;if(ve===null){for(;!be.done;Ee++,be=j.next())be=J(B,be.value,Z),be!==null&&(D=y(be,D,Ee),_e===null?pe=be:_e.sibling=be,_e=be);return Je&&Gi(B,Ee),pe}for(ve=h(B,ve);!be.done;Ee++,be=j.next())be=se(ve,B,Ee,be.value,Z),be!==null&&(r&&be.alternate!==null&&ve.delete(be.key===null?Ee:be.key),D=y(be,D,Ee),_e===null?pe=be:_e.sibling=be,_e=be);return r&&ve.forEach(function(wA){return s(B,wA)}),Je&&Gi(B,Ee),pe}function lt(B,D,j,Z){if(typeof j=="object"&&j!==null&&j.type===k&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case re:e:{for(var pe=j.key,_e=D;_e!==null;){if(_e.key===pe){if(pe=j.type,pe===k){if(_e.tag===7){a(B,_e.sibling),D=d(_e,j.props.children),D.return=B,B=D;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===xt&&Fm(pe)===_e.type){a(B,_e.sibling),D=d(_e,j.props),D.ref=Aa(B,_e,j),D.return=B,B=D;break e}a(B,_e);break}else s(B,_e);_e=_e.sibling}j.type===k?(D=ns(j.props.children,B.mode,Z,j.key),D.return=B,B=D):(Z=Nu(j.type,j.key,j.props,null,B.mode,Z),Z.ref=Aa(B,D,j),Z.return=B,B=Z)}return E(B);case ae:e:{for(_e=j.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){a(B,D.sibling),D=d(D,j.children||[]),D.return=B,B=D;break e}else{a(B,D);break}else s(B,D);D=D.sibling}D=uf(j,B.mode,Z),D.return=B,B=D}return E(B);case xt:return _e=j._init,lt(B,D,_e(j._payload),Z)}if(gr(j))return ce(B,D,j,Z);if(me(j))return he(B,D,j,Z);uu(B,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,D!==null&&D.tag===6?(a(B,D.sibling),D=d(D,j),D.return=B,B=D):(a(B,D),D=lf(j,B.mode,Z),D.return=B,B=D),E(B)):a(B,D)}return lt}var ro=Um(!0),Bm=Um(!1),cu=Zr(null),hu=null,io=null,yh=null;function _h(){yh=io=hu=null}function vh(r){var s=cu.current;Ke(cu),r._currentValue=s}function wh(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function so(r,s){hu=r,yh=io=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(rn=!0),r.firstContext=null)}function In(r){var s=r._currentValue;if(yh!==r)if(r={context:r,memoizedValue:s,next:null},io===null){if(hu===null)throw Error(t(308));io=r,hu.dependencies={lanes:0,firstContext:r}}else io=io.next=r;return s}var Qi=null;function Eh(r){Qi===null?Qi=[r]:Qi.push(r)}function jm(r,s,a,h){var d=s.interleaved;return d===null?(a.next=a,Eh(s)):(a.next=d.next,d.next=a),s.interleaved=a,xr(r,h)}function xr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ni=!1;function Th(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function kr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ri(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,Oe&2){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,xr(r,a)}return d=h.interleaved,d===null?(s.next=s,Eh(h)):(s.next=d.next,d.next=s),h.interleaved=s,xr(r,a)}function fu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Hr(r,a)}}function $m(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?d=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?d=y=s:y=y.next=s}else d=y=s;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function du(r,s,a,h){var d=r.updateQueue;ni=!1;var y=d.firstBaseUpdate,E=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var x=I,z=x.next;x.next=null,E===null?y=z:E.next=z,E=x;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,I=Y.lastBaseUpdate,I!==E&&(I===null?Y.firstBaseUpdate=z:I.next=z,Y.lastBaseUpdate=x))}if(y!==null){var J=d.baseState;E=0,Y=z=x=null,I=y;do{var X=I.lane,se=I.eventTime;if((h&X)===X){Y!==null&&(Y=Y.next={eventTime:se,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ce=r,he=I;switch(X=s,se=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){J=ce.call(se,J,X);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,X=typeof ce=="function"?ce.call(se,J,X):ce,X==null)break e;J=ie({},J,X);break e;case 2:ni=!0}}I.callback!==null&&I.lane!==0&&(r.flags|=64,X=d.effects,X===null?d.effects=[I]:X.push(I))}else se={eventTime:se,lane:X,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Y===null?(z=Y=se,x=J):Y=Y.next=se,E|=X;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;X=I,I=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(x=J),d.baseState=x,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else y===null&&(d.shared.lanes=0);Ji|=E,r.lanes=E,r.memoizedState=J}}function qm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var Sa={},sr=Zr(Sa),Ia=Zr(Sa),Ra=Zr(Sa);function Xi(r){if(r===Sa)throw Error(t(174));return r}function Ah(r,s){switch(We(Ra,s),We(Ia,r),We(sr,Sa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:gt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=gt(s,r)}Ke(sr),We(sr,s)}function oo(){Ke(sr),Ke(Ia),Ke(Ra)}function Wm(r){Xi(Ra.current);var s=Xi(sr.current),a=gt(s,r.type);s!==a&&(We(Ia,r),We(sr,a))}function Sh(r){Ia.current===r&&(Ke(sr),Ke(Ia))}var Ze=Zr(0);function pu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ih=[];function Rh(){for(var r=0;r<Ih.length;r++)Ih[r]._workInProgressVersionPrimary=null;Ih.length=0}var mu=ne.ReactCurrentDispatcher,Ph=ne.ReactCurrentBatchConfig,Yi=0,et=null,_t=null,St=null,gu=!1,Pa=!1,Ca=0,$0=0;function Ut(){throw Error(t(321))}function Ch(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!jn(r[a],s[a]))return!1;return!0}function xh(r,s,a,h,d,y){if(Yi=y,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,mu.current=r===null||r.memoizedState===null?K0:G0,r=a(h,d),Pa){y=0;do{if(Pa=!1,Ca=0,25<=y)throw Error(t(301));y+=1,St=_t=null,s.updateQueue=null,mu.current=Q0,r=a(h,d)}while(Pa)}if(mu.current=vu,s=_t!==null&&_t.next!==null,Yi=0,St=_t=et=null,gu=!1,s)throw Error(t(300));return r}function kh(){var r=Ca!==0;return Ca=0,r}function or(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?et.memoizedState=St=r:St=St.next=r,St}function Rn(){if(_t===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var s=St===null?et.memoizedState:St.next;if(s!==null)St=s,_t=r;else{if(r===null)throw Error(t(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?et.memoizedState=St=r:St=St.next=r}return St}function xa(r,s){return typeof s=="function"?s(r):s}function Vh(r){var s=Rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=_t,d=h.baseQueue,y=a.pending;if(y!==null){if(d!==null){var E=d.next;d.next=y.next,y.next=E}h.baseQueue=d=y,a.pending=null}if(d!==null){y=d.next,h=h.baseState;var I=E=null,x=null,z=y;do{var Y=z.lane;if((Yi&Y)===Y)x!==null&&(x=x.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:r(h,z.action);else{var J={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};x===null?(I=x=J,E=h):x=x.next=J,et.lanes|=Y,Ji|=Y}z=z.next}while(z!==null&&z!==y);x===null?E=h:x.next=I,jn(h,s.memoizedState)||(rn=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=x,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do y=d.lane,et.lanes|=y,Ji|=y,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Dh(r){var s=Rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,y=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do y=r(y,E.action),E=E.next;while(E!==d);jn(y,s.memoizedState)||(rn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,h]}function Hm(){}function Km(r,s){var a=et,h=Rn(),d=s(),y=!jn(h.memoizedState,d);if(y&&(h.memoizedState=d,rn=!0),h=h.queue,Nh(Xm.bind(null,a,h,r),[r]),h.getSnapshot!==s||y||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,ka(9,Qm.bind(null,a,h,d,s),void 0,null),It===null)throw Error(t(349));Yi&30||Gm(a,s,d)}return d}function Gm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Qm(r,s,a,h){s.value=a,s.getSnapshot=h,Ym(s)&&Jm(r)}function Xm(r,s,a){return a(function(){Ym(s)&&Jm(r)})}function Ym(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!jn(r,a)}catch{return!0}}function Jm(r){var s=xr(r,1);s!==null&&Hn(s,r,1,-1)}function Zm(r){var s=or();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:r},s.queue=r,r=r.dispatch=H0.bind(null,et,r),[s.memoizedState,r]}function ka(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function eg(){return Rn().memoizedState}function yu(r,s,a,h){var d=or();et.flags|=r,d.memoizedState=ka(1|s,a,void 0,h===void 0?null:h)}function _u(r,s,a,h){var d=Rn();h=h===void 0?null:h;var y=void 0;if(_t!==null){var E=_t.memoizedState;if(y=E.destroy,h!==null&&Ch(h,E.deps)){d.memoizedState=ka(s,a,y,h);return}}et.flags|=r,d.memoizedState=ka(1|s,a,y,h)}function tg(r,s){return yu(8390656,8,r,s)}function Nh(r,s){return _u(2048,8,r,s)}function ng(r,s){return _u(4,2,r,s)}function rg(r,s){return _u(4,4,r,s)}function ig(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function sg(r,s,a){return a=a!=null?a.concat([r]):null,_u(4,4,ig.bind(null,s,r),a)}function Mh(){}function og(r,s){var a=Rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Ch(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function ag(r,s){var a=Rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Ch(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function lg(r,s,a){return Yi&21?(jn(a,s)||(a=Bi(),et.lanes|=a,Ji|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,rn=!0),r.memoizedState=a)}function q0(r,s){var a=ke;ke=a!==0&&4>a?a:4,r(!0);var h=Ph.transition;Ph.transition={};try{r(!1),s()}finally{ke=a,Ph.transition=h}}function ug(){return Rn().memoizedState}function W0(r,s,a){var h=ai(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},cg(r))hg(s,a);else if(a=jm(r,s,a,h),a!==null){var d=Xt();Hn(a,r,h,d),fg(a,s,h)}}function H0(r,s,a){var h=ai(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(cg(r))hg(s,d);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,I=y(E,a);if(d.hasEagerState=!0,d.eagerState=I,jn(I,E)){var x=s.interleaved;x===null?(d.next=d,Eh(s)):(d.next=x.next,x.next=d),s.interleaved=d;return}}catch{}finally{}a=jm(r,s,d,h),a!==null&&(d=Xt(),Hn(a,r,h,d),fg(a,s,h))}}function cg(r){var s=r.alternate;return r===et||s!==null&&s===et}function hg(r,s){Pa=gu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function fg(r,s,a){if(a&4194240){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Hr(r,a)}}var vu={readContext:In,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},K0={readContext:In,useCallback:function(r,s){return or().memoizedState=[r,s===void 0?null:s],r},useContext:In,useEffect:tg,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,yu(4194308,4,ig.bind(null,s,r),a)},useLayoutEffect:function(r,s){return yu(4194308,4,r,s)},useInsertionEffect:function(r,s){return yu(4,2,r,s)},useMemo:function(r,s){var a=or();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=or();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=W0.bind(null,et,r),[h.memoizedState,r]},useRef:function(r){var s=or();return r={current:r},s.memoizedState=r},useState:Zm,useDebugValue:Mh,useDeferredValue:function(r){return or().memoizedState=r},useTransition:function(){var r=Zm(!1),s=r[0];return r=q0.bind(null,r[1]),or().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=et,d=or();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),It===null)throw Error(t(349));Yi&30||Gm(h,s,a)}d.memoizedState=a;var y={value:a,getSnapshot:s};return d.queue=y,tg(Xm.bind(null,h,y,r),[r]),h.flags|=2048,ka(9,Qm.bind(null,h,y,a,s),void 0,null),a},useId:function(){var r=or(),s=It.identifierPrefix;if(Je){var a=Cr,h=Pr;a=(h&~(1<<32-Kt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ca++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=$0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},G0={readContext:In,useCallback:og,useContext:In,useEffect:Nh,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:rg,useMemo:ag,useReducer:Vh,useRef:eg,useState:function(){return Vh(xa)},useDebugValue:Mh,useDeferredValue:function(r){var s=Rn();return lg(s,_t.memoizedState,r)},useTransition:function(){var r=Vh(xa)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:Km,useId:ug,unstable_isNewReconciler:!1},Q0={readContext:In,useCallback:og,useContext:In,useEffect:Nh,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:rg,useMemo:ag,useReducer:Dh,useRef:eg,useState:function(){return Dh(xa)},useDebugValue:Mh,useDeferredValue:function(r){var s=Rn();return _t===null?s.memoizedState=r:lg(s,_t.memoizedState,r)},useTransition:function(){var r=Dh(xa)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:Km,useId:ug,unstable_isNewReconciler:!1};function $n(r,s){if(r&&r.defaultProps){s=ie({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Lh(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:ie({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var wu={isMounted:function(r){return(r=r._reactInternals)?Mn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=Xt(),d=ai(r),y=kr(h,d);y.payload=s,a!=null&&(y.callback=a),s=ri(r,y,d),s!==null&&(Hn(s,r,d,h),fu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=Xt(),d=ai(r),y=kr(h,d);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=ri(r,y,d),s!==null&&(Hn(s,r,d,h),fu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Xt(),h=ai(r),d=kr(a,h);d.tag=2,s!=null&&(d.callback=s),s=ri(r,d,h),s!==null&&(Hn(s,r,h,a),fu(s,r,h))}};function dg(r,s,a,h,d,y,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,E):s.prototype&&s.prototype.isPureReactComponent?!ga(a,h)||!ga(d,y):!0}function pg(r,s,a){var h=!1,d=ei,y=s.contextType;return typeof y=="object"&&y!==null?y=In(y):(d=nn(s)?Hi:Ft.current,h=s.contextTypes,y=(h=h!=null)?Zs(r,d):ei),s=new s(a,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=y),s}function mg(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&wu.enqueueReplaceState(s,s.state,null)}function Oh(r,s,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Th(r);var y=s.contextType;typeof y=="object"&&y!==null?d.context=In(y):(y=nn(s)?Hi:Ft.current,d.context=Zs(r,y)),d.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Lh(r,s,y,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&wu.enqueueReplaceState(d,d.state,null),du(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function ao(r,s){try{var a="",h=s;do a+=Pe(h),h=h.return;while(h);var d=a}catch(y){d=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:d,digest:null}}function bh(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Fh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var X0=typeof WeakMap=="function"?WeakMap:Map;function gg(r,s,a){a=kr(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Pu||(Pu=!0,Zh=h),Fh(r,s)},a}function yg(r,s,a){a=kr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=s.value;a.payload=function(){return h(d)},a.callback=function(){Fh(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Fh(r,s),typeof h!="function"&&(si===null?si=new Set([this]):si.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function _g(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new X0;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(a)||(d.add(a),r=cA.bind(null,r,s,a),s.then(r,r))}function vg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function wg(r,s,a,h,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=kr(-1,1),s.tag=2,ri(a,s,1))),a.lanes|=1),r)}var Y0=ne.ReactCurrentOwner,rn=!1;function Qt(r,s,a,h){s.child=r===null?Bm(s,null,a,h):ro(s,r.child,a,h)}function Eg(r,s,a,h,d){a=a.render;var y=s.ref;return so(s,d),h=xh(r,s,a,h,y,d),a=kh(),r!==null&&!rn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Vr(r,s,d)):(Je&&a&&fh(s),s.flags|=1,Qt(r,s,h,d),s.child)}function Tg(r,s,a,h,d){if(r===null){var y=a.type;return typeof y=="function"&&!af(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Ag(r,s,y,h,d)):(r=Nu(a.type,null,h,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!(r.lanes&d)){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:ga,a(E,h)&&r.ref===s.ref)return Vr(r,s,d)}return s.flags|=1,r=ui(y,h),r.ref=s.ref,r.return=s,s.child=r}function Ag(r,s,a,h,d){if(r!==null){var y=r.memoizedProps;if(ga(y,h)&&r.ref===s.ref)if(rn=!1,s.pendingProps=h=y,(r.lanes&d)!==0)r.flags&131072&&(rn=!0);else return s.lanes=r.lanes,Vr(r,s,d)}return Uh(r,s,a,h,d)}function Sg(r,s,a){var h=s.pendingProps,d=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(uo,mn),mn|=a;else{if(!(a&1073741824))return r=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,We(uo,mn),mn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:a,We(uo,mn),mn|=h}else y!==null?(h=y.baseLanes|a,s.memoizedState=null):h=a,We(uo,mn),mn|=h;return Qt(r,s,d,a),s.child}function Ig(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Uh(r,s,a,h,d){var y=nn(a)?Hi:Ft.current;return y=Zs(s,y),so(s,d),a=xh(r,s,a,h,y,d),h=kh(),r!==null&&!rn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Vr(r,s,d)):(Je&&h&&fh(s),s.flags|=1,Qt(r,s,a,d),s.child)}function Rg(r,s,a,h,d){if(nn(a)){var y=!0;iu(s)}else y=!1;if(so(s,d),s.stateNode===null)Tu(r,s),pg(s,a,h),Oh(s,a,h,d),h=!0;else if(r===null){var E=s.stateNode,I=s.memoizedProps;E.props=I;var x=E.context,z=a.contextType;typeof z=="object"&&z!==null?z=In(z):(z=nn(a)?Hi:Ft.current,z=Zs(s,z));var Y=a.getDerivedStateFromProps,J=typeof Y=="function"||typeof E.getSnapshotBeforeUpdate=="function";J||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==h||x!==z)&&mg(s,E,h,z),ni=!1;var X=s.memoizedState;E.state=X,du(s,h,E,d),x=s.memoizedState,I!==h||X!==x||tn.current||ni?(typeof Y=="function"&&(Lh(s,a,Y,h),x=s.memoizedState),(I=ni||dg(s,a,I,h,X,x,z))?(J||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=x),E.props=h,E.state=x,E.context=z,h=I):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,zm(r,s),I=s.memoizedProps,z=s.type===s.elementType?I:$n(s.type,I),E.props=z,J=s.pendingProps,X=E.context,x=a.contextType,typeof x=="object"&&x!==null?x=In(x):(x=nn(a)?Hi:Ft.current,x=Zs(s,x));var se=a.getDerivedStateFromProps;(Y=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==J||X!==x)&&mg(s,E,h,x),ni=!1,X=s.memoizedState,E.state=X,du(s,h,E,d);var ce=s.memoizedState;I!==J||X!==ce||tn.current||ni?(typeof se=="function"&&(Lh(s,a,se,h),ce=s.memoizedState),(z=ni||dg(s,a,z,h,X,ce,x)||!1)?(Y||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ce,x),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ce,x)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||I===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ce),E.props=h,E.state=ce,E.context=x,h=z):(typeof E.componentDidUpdate!="function"||I===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),h=!1)}return Bh(r,s,a,h,y,d)}function Bh(r,s,a,h,d,y){Ig(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return d&&Vm(s,a,!1),Vr(r,s,y);h=s.stateNode,Y0.current=s;var I=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=ro(s,r.child,null,y),s.child=ro(s,null,I,y)):Qt(r,s,I,y),s.memoizedState=h.state,d&&Vm(s,a,!0),s.child}function Pg(r){var s=r.stateNode;s.pendingContext?xm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&xm(r,s.context,!1),Ah(r,s.containerInfo)}function Cg(r,s,a,h,d){return no(),gh(d),s.flags|=256,Qt(r,s,a,h),s.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function zh(r){return{baseLanes:r,cachePool:null,transitions:null}}function xg(r,s,a){var h=s.pendingProps,d=Ze.current,y=!1,E=(s.flags&128)!==0,I;if((I=E)||(I=r!==null&&r.memoizedState===null?!1:(d&2)!==0),I?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),We(Ze,d&1),r===null)return mh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=h.children,r=h.fallback,y?(h=s.mode,y=s.child,E={mode:"hidden",children:E},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Mu(E,h,0,null),r=ns(r,h,a,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=zh(a),s.memoizedState=jh,r):$h(s,E));if(d=r.memoizedState,d!==null&&(I=d.dehydrated,I!==null))return J0(r,s,E,h,I,d,a);if(y){y=h.fallback,E=s.mode,d=r.child,I=d.sibling;var x={mode:"hidden",children:h.children};return!(E&1)&&s.child!==d?(h=s.child,h.childLanes=0,h.pendingProps=x,s.deletions=null):(h=ui(d,x),h.subtreeFlags=d.subtreeFlags&14680064),I!==null?y=ui(I,y):(y=ns(y,E,a,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,E=r.child.memoizedState,E=E===null?zh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=r.childLanes&~a,s.memoizedState=jh,h}return y=r.child,r=y.sibling,h=ui(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function $h(r,s){return s=Mu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Eu(r,s,a,h){return h!==null&&gh(h),ro(s,r.child,null,a),r=$h(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function J0(r,s,a,h,d,y,E){if(a)return s.flags&256?(s.flags&=-257,h=bh(Error(t(422))),Eu(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=h.fallback,d=s.mode,h=Mu({mode:"visible",children:h.children},d,0,null),y=ns(y,d,E,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&ro(s,r.child,null,E),s.child.memoizedState=zh(E),s.memoizedState=jh,y);if(!(s.mode&1))return Eu(r,s,E,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var I=h.dgst;return h=I,y=Error(t(419)),h=bh(y,h,void 0),Eu(r,s,E,h)}if(I=(E&r.childLanes)!==0,rn||I){if(h=It,h!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(h.suspendedLanes|E)?0:d,d!==0&&d!==y.retryLane&&(y.retryLane=d,xr(r,d),Hn(h,r,d,-1))}return of(),h=bh(Error(t(421))),Eu(r,s,E,h)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=hA.bind(null,r),d._reactRetry=s,null):(r=y.treeContext,pn=Jr(d.nextSibling),dn=s,Je=!0,zn=null,r!==null&&(An[Sn++]=Pr,An[Sn++]=Cr,An[Sn++]=Ki,Pr=r.id,Cr=r.overflow,Ki=s),s=$h(s,h.children),s.flags|=4096,s)}function kg(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),wh(r.return,s,a)}function qh(r,s,a,h,d){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=a,y.tailMode=d)}function Vg(r,s,a){var h=s.pendingProps,d=h.revealOrder,y=h.tail;if(Qt(r,s,h.children,a),h=Ze.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&kg(r,a,s);else if(r.tag===19)kg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(We(Ze,h),!(s.mode&1))s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&pu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),qh(s,!1,d,a,y);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&pu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}qh(s,!0,a,null,y);break;case"together":qh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tu(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Vr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Ji|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=ui(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=ui(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Z0(r,s,a){switch(s.tag){case 3:Pg(s),no();break;case 5:Wm(s);break;case 1:nn(s.type)&&iu(s);break;case 4:Ah(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,d=s.memoizedProps.value;We(cu,h._currentValue),h._currentValue=d;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(We(Ze,Ze.current&1),s.flags|=128,null):a&s.child.childLanes?xg(r,s,a):(We(Ze,Ze.current&1),r=Vr(r,s,a),r!==null?r.sibling:null);We(Ze,Ze.current&1);break;case 19:if(h=(a&s.childLanes)!==0,r.flags&128){if(h)return Vg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Ze,Ze.current),h)break;return null;case 22:case 23:return s.lanes=0,Sg(r,s,a)}return Vr(r,s,a)}var Dg,Wh,Ng,Mg;Dg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Wh=function(){},Ng=function(r,s,a,h){var d=r.memoizedProps;if(d!==h){r=s.stateNode,Xi(sr.current);var y=null;switch(a){case"input":d=xi(r,d),h=xi(r,h),y=[];break;case"select":d=ie({},d,{value:void 0}),h=ie({},h,{value:void 0}),y=[];break;case"textarea":d=Wo(r,d),h=Wo(r,h),y=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=tu)}Yo(a,h);var E;a=null;for(z in d)if(!h.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var I=d[z];for(E in I)I.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in h){var x=h[z];if(I=d!=null?d[z]:void 0,h.hasOwnProperty(z)&&x!==I&&(x!=null||I!=null))if(z==="style")if(I){for(E in I)!I.hasOwnProperty(E)||x&&x.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in x)x.hasOwnProperty(E)&&I[E]!==x[E]&&(a||(a={}),a[E]=x[E])}else a||(y||(y=[]),y.push(z,a)),a=x;else z==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,I=I?I.__html:void 0,x!=null&&I!==x&&(y=y||[]).push(z,x)):z==="children"?typeof x!="string"&&typeof x!="number"||(y=y||[]).push(z,""+x):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(x!=null&&z==="onScroll"&&He("scroll",r),y||I===x||(y=[])):(y=y||[]).push(z,x))}a&&(y=y||[]).push("style",a);var z=y;(s.updateQueue=z)&&(s.flags|=4)}},Mg=function(r,s,a,h){a!==h&&(s.flags|=4)};function Va(r,s){if(!Je)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Bt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function eA(r,s,a){var h=s.pendingProps;switch(dh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(s),null;case 1:return nn(s.type)&&ru(),Bt(s),null;case 3:return h=s.stateNode,oo(),Ke(tn),Ke(Ft),Rh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(lu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zn!==null&&(nf(zn),zn=null))),Wh(r,s),Bt(s),null;case 5:Sh(s);var d=Xi(Ra.current);if(a=s.type,r!==null&&s.stateNode!=null)Ng(r,s,a,h,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Bt(s),null}if(r=Xi(sr.current),lu(s)){h=s.stateNode,a=s.type;var y=s.memoizedProps;switch(h[ir]=s,h[Ea]=y,r=(s.mode&1)!==0,a){case"dialog":He("cancel",h),He("close",h);break;case"iframe":case"object":case"embed":He("load",h);break;case"video":case"audio":for(d=0;d<_a.length;d++)He(_a[d],h);break;case"source":He("error",h);break;case"img":case"image":case"link":He("error",h),He("load",h);break;case"details":He("toggle",h);break;case"input":Es(h,y),He("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},He("invalid",h);break;case"textarea":As(h,y),He("invalid",h)}Yo(a,y),d=null;for(var E in y)if(y.hasOwnProperty(E)){var I=y[E];E==="children"?typeof I=="string"?h.textContent!==I&&(y.suppressHydrationWarning!==!0&&eu(h.textContent,I,r),d=["children",I]):typeof I=="number"&&h.textContent!==""+I&&(y.suppressHydrationWarning!==!0&&eu(h.textContent,I,r),d=["children",""+I]):o.hasOwnProperty(E)&&I!=null&&E==="onScroll"&&He("scroll",h)}switch(a){case"input":mr(h),Rl(h,y,!0);break;case"textarea":mr(h),Ho(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=tu)}h=d,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=mt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(a,{is:h.is}):(r=E.createElement(a),a==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,a),r[ir]=s,r[Ea]=h,Dg(r,s,!1,!1),s.stateNode=r;e:{switch(E=Jo(a,h),a){case"dialog":He("cancel",r),He("close",r),d=h;break;case"iframe":case"object":case"embed":He("load",r),d=h;break;case"video":case"audio":for(d=0;d<_a.length;d++)He(_a[d],r);d=h;break;case"source":He("error",r),d=h;break;case"img":case"image":case"link":He("error",r),He("load",r),d=h;break;case"details":He("toggle",r),d=h;break;case"input":Es(r,h),d=xi(r,h),He("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=ie({},h,{value:void 0}),He("invalid",r);break;case"textarea":As(r,h),d=Wo(r,h),He("invalid",r);break;default:d=h}Yo(a,d),I=d;for(y in I)if(I.hasOwnProperty(y)){var x=I[y];y==="style"?Qo(r,x):y==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Ko(r,x)):y==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&jr(r,x):typeof x=="number"&&jr(r,""+x):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?x!=null&&y==="onScroll"&&He("scroll",r):x!=null&&G(r,y,x,E))}switch(a){case"input":mr(r),Rl(r,h,!1);break;case"textarea":mr(r),Ho(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ue(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?yr(r,!!h.multiple,y,!1):h.defaultValue!=null&&yr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Bt(s),null;case 6:if(r&&s.stateNode!=null)Mg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Xi(Ra.current),Xi(sr.current),lu(s)){if(h=s.stateNode,a=s.memoizedProps,h[ir]=s,(y=h.nodeValue!==a)&&(r=dn,r!==null))switch(r.tag){case 3:eu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&eu(h.nodeValue,a,(r.mode&1)!==0)}y&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[ir]=s,s.stateNode=h}return Bt(s),null;case 13:if(Ke(Ze),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Je&&pn!==null&&s.mode&1&&!(s.flags&128))bm(),no(),s.flags|=98560,y=!1;else if(y=lu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[ir]=s}else no(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Bt(s),y=!1}else zn!==null&&(nf(zn),zn=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||Ze.current&1?vt===0&&(vt=3):of())),s.updateQueue!==null&&(s.flags|=4),Bt(s),null);case 4:return oo(),Wh(r,s),r===null&&va(s.stateNode.containerInfo),Bt(s),null;case 10:return vh(s.type._context),Bt(s),null;case 17:return nn(s.type)&&ru(),Bt(s),null;case 19:if(Ke(Ze),y=s.memoizedState,y===null)return Bt(s),null;if(h=(s.flags&128)!==0,E=y.rendering,E===null)if(h)Va(y,!1);else{if(vt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(E=pu(r),E!==null){for(s.flags|=128,Va(y,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)y=a,r=h,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,r=E.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return We(Ze,Ze.current&1|2),s.child}r=r.sibling}y.tail!==null&&qe()>co&&(s.flags|=128,h=!0,Va(y,!1),s.lanes=4194304)}else{if(!h)if(r=pu(E),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Va(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!Je)return Bt(s),null}else 2*qe()-y.renderingStartTime>co&&a!==1073741824&&(s.flags|=128,h=!0,Va(y,!1),s.lanes=4194304);y.isBackwards?(E.sibling=s.child,s.child=E):(a=y.last,a!==null?a.sibling=E:s.child=E,y.last=E)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=qe(),s.sibling=null,a=Ze.current,We(Ze,h?a&1|2:a&1),s):(Bt(s),null);case 22:case 23:return sf(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?mn&1073741824&&(Bt(s),s.subtreeFlags&6&&(s.flags|=8192)):Bt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tA(r,s){switch(dh(s),s.tag){case 1:return nn(s.type)&&ru(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return oo(),Ke(tn),Ke(Ft),Rh(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Sh(s),null;case 13:if(Ke(Ze),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));no()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ke(Ze),null;case 4:return oo(),null;case 10:return vh(s.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Au=!1,jt=!1,nA=typeof WeakSet=="function"?WeakSet:Set,le=null;function lo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){rt(r,s,h)}else a.current=null}function Hh(r,s,a){try{a()}catch(h){rt(r,s,h)}}var Lg=!1;function rA(r,s){if(ih=Qr,r=dm(),Xc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,I=-1,x=-1,z=0,Y=0,J=r,X=null;t:for(;;){for(var se;J!==a||d!==0&&J.nodeType!==3||(I=E+d),J!==y||h!==0&&J.nodeType!==3||(x=E+h),J.nodeType===3&&(E+=J.nodeValue.length),(se=J.firstChild)!==null;)X=J,J=se;for(;;){if(J===r)break t;if(X===a&&++z===d&&(I=E),X===y&&++Y===h&&(x=E),(se=J.nextSibling)!==null)break;J=X,X=J.parentNode}J=se}a=I===-1||x===-1?null:{start:I,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(sh={focusedElem:r,selectionRange:a},Qr=!1,le=s;le!==null;)if(s=le,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,le=r;else for(;le!==null;){s=le;try{var ce=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,lt=ce.memoizedState,B=s.stateNode,D=B.getSnapshotBeforeUpdate(s.elementType===s.type?he:$n(s.type,he),lt);B.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){rt(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,le=r;break}le=s.return}return ce=Lg,Lg=!1,ce}function Da(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var y=d.destroy;d.destroy=void 0,y!==void 0&&Hh(s,a,y)}d=d.next}while(d!==h)}}function Su(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Kh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Og(r){var s=r.alternate;s!==null&&(r.alternate=null,Og(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ir],delete s[Ea],delete s[uh],delete s[U0],delete s[B0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function bg(r){return r.tag===5||r.tag===3||r.tag===4}function Fg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||bg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gh(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=tu));else if(h!==4&&(r=r.child,r!==null))for(Gh(r,s,a),r=r.sibling;r!==null;)Gh(r,s,a),r=r.sibling}function Qh(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Qh(r,s,a),r=r.sibling;r!==null;)Qh(r,s,a),r=r.sibling}var Dt=null,qn=!1;function ii(r,s,a){for(a=a.child;a!==null;)Ug(r,s,a),a=a.sibling}function Ug(r,s,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Fi,a)}catch{}switch(a.tag){case 5:jt||lo(a,s);case 6:var h=Dt,d=qn;Dt=null,ii(r,s,a),Dt=h,qn=d,Dt!==null&&(qn?(r=Dt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(qn?(r=Dt,a=a.stateNode,r.nodeType===8?lh(r.parentNode,a):r.nodeType===1&&lh(r,a),Un(r)):lh(Dt,a.stateNode));break;case 4:h=Dt,d=qn,Dt=a.stateNode.containerInfo,qn=!0,ii(r,s,a),Dt=h,qn=d;break;case 0:case 11:case 14:case 15:if(!jt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var y=d,E=y.destroy;y=y.tag,E!==void 0&&(y&2||y&4)&&Hh(a,s,E),d=d.next}while(d!==h)}ii(r,s,a);break;case 1:if(!jt&&(lo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(I){rt(a,s,I)}ii(r,s,a);break;case 21:ii(r,s,a);break;case 22:a.mode&1?(jt=(h=jt)||a.memoizedState!==null,ii(r,s,a),jt=h):ii(r,s,a);break;default:ii(r,s,a)}}function Bg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new nA),s.forEach(function(h){var d=fA.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function Wn(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var y=r,E=s,I=E;e:for(;I!==null;){switch(I.tag){case 5:Dt=I.stateNode,qn=!1;break e;case 3:Dt=I.stateNode.containerInfo,qn=!0;break e;case 4:Dt=I.stateNode.containerInfo,qn=!0;break e}I=I.return}if(Dt===null)throw Error(t(160));Ug(y,E,d),Dt=null,qn=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch(z){rt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jg(s,r),s=s.sibling}function jg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Wn(s,r),ar(r),h&4){try{Da(3,r,r.return),Su(3,r)}catch(he){rt(r,r.return,he)}try{Da(5,r,r.return)}catch(he){rt(r,r.return,he)}}break;case 1:Wn(s,r),ar(r),h&512&&a!==null&&lo(a,a.return);break;case 5:if(Wn(s,r),ar(r),h&512&&a!==null&&lo(a,a.return),r.flags&32){var d=r.stateNode;try{jr(d,"")}catch(he){rt(r,r.return,he)}}if(h&4&&(d=r.stateNode,d!=null)){var y=r.memoizedProps,E=a!==null?a.memoizedProps:y,I=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{I==="input"&&y.type==="radio"&&y.name!=null&&$o(d,y),Jo(I,E);var z=Jo(I,y);for(E=0;E<x.length;E+=2){var Y=x[E],J=x[E+1];Y==="style"?Qo(d,J):Y==="dangerouslySetInnerHTML"?Ko(d,J):Y==="children"?jr(d,J):G(d,Y,J,z)}switch(I){case"input":qo(d,y);break;case"textarea":Ss(d,y);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!y.multiple;var se=y.value;se!=null?yr(d,!!y.multiple,se,!1):X!==!!y.multiple&&(y.defaultValue!=null?yr(d,!!y.multiple,y.defaultValue,!0):yr(d,!!y.multiple,y.multiple?[]:"",!1))}d[Ea]=y}catch(he){rt(r,r.return,he)}}break;case 6:if(Wn(s,r),ar(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,y=r.memoizedProps;try{d.nodeValue=y}catch(he){rt(r,r.return,he)}}break;case 3:if(Wn(s,r),ar(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Un(s.containerInfo)}catch(he){rt(r,r.return,he)}break;case 4:Wn(s,r),ar(r);break;case 13:Wn(s,r),ar(r),d=r.child,d.flags&8192&&(y=d.memoizedState!==null,d.stateNode.isHidden=y,!y||d.alternate!==null&&d.alternate.memoizedState!==null||(Jh=qe())),h&4&&Bg(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(jt=(z=jt)||Y,Wn(s,r),jt=z):Wn(s,r),ar(r),h&8192){if(z=r.memoizedState!==null,(r.stateNode.isHidden=z)&&!Y&&r.mode&1)for(le=r,Y=r.child;Y!==null;){for(J=le=Y;le!==null;){switch(X=le,se=X.child,X.tag){case 0:case 11:case 14:case 15:Da(4,X,X.return);break;case 1:lo(X,X.return);var ce=X.stateNode;if(typeof ce.componentWillUnmount=="function"){h=X,a=X.return;try{s=h,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(he){rt(h,a,he)}}break;case 5:lo(X,X.return);break;case 22:if(X.memoizedState!==null){qg(J);continue}}se!==null?(se.return=X,le=se):qg(J)}Y=Y.sibling}e:for(Y=null,J=r;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,z?(y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(I=J.stateNode,x=J.memoizedProps.style,E=x!=null&&x.hasOwnProperty("display")?x.display:null,I.style.display=Go("display",E))}catch(he){rt(r,r.return,he)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(he){rt(r,r.return,he)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break e;for(;J.sibling===null;){if(J.return===null||J.return===r)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Wn(s,r),ar(r),h&4&&Bg(r);break;case 21:break;default:Wn(s,r),ar(r)}}function ar(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(bg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(jr(d,""),h.flags&=-33);var y=Fg(r);Qh(r,y,d);break;case 3:case 4:var E=h.stateNode.containerInfo,I=Fg(r);Gh(r,I,E);break;default:throw Error(t(161))}}catch(x){rt(r,r.return,x)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function iA(r,s,a){le=r,zg(r)}function zg(r,s,a){for(var h=(r.mode&1)!==0;le!==null;){var d=le,y=d.child;if(d.tag===22&&h){var E=d.memoizedState!==null||Au;if(!E){var I=d.alternate,x=I!==null&&I.memoizedState!==null||jt;I=Au;var z=jt;if(Au=E,(jt=x)&&!z)for(le=d;le!==null;)E=le,x=E.child,E.tag===22&&E.memoizedState!==null?Wg(d):x!==null?(x.return=E,le=x):Wg(d);for(;y!==null;)le=y,zg(y),y=y.sibling;le=d,Au=I,jt=z}$g(r)}else d.subtreeFlags&8772&&y!==null?(y.return=d,le=y):$g(r)}}function $g(r){for(;le!==null;){var s=le;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:jt||Su(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!jt)if(a===null)h.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:$n(s.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&qm(s,y,h);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}qm(s,E,a)}break;case 5:var I=s.stateNode;if(a===null&&s.flags&4){a=I;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&Un(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&Kh(s)}catch(X){rt(s,s.return,X)}}if(s===r){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function qg(r){for(;le!==null;){var s=le;if(s===r){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function Wg(r){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Su(4,s)}catch(x){rt(s,a,x)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var d=s.return;try{h.componentDidMount()}catch(x){rt(s,d,x)}}var y=s.return;try{Kh(s)}catch(x){rt(s,y,x)}break;case 5:var E=s.return;try{Kh(s)}catch(x){rt(s,E,x)}}}catch(x){rt(s,s.return,x)}if(s===r){le=null;break}var I=s.sibling;if(I!==null){I.return=s.return,le=I;break}le=s.return}}var sA=Math.ceil,Iu=ne.ReactCurrentDispatcher,Xh=ne.ReactCurrentOwner,Pn=ne.ReactCurrentBatchConfig,Oe=0,It=null,ft=null,Nt=0,mn=0,uo=Zr(0),vt=0,Na=null,Ji=0,Ru=0,Yh=0,Ma=null,sn=null,Jh=0,co=1/0,Dr=null,Pu=!1,Zh=null,si=null,Cu=!1,oi=null,xu=0,La=0,ef=null,ku=-1,Vu=0;function Xt(){return Oe&6?qe():ku!==-1?ku:ku=qe()}function ai(r){return r.mode&1?Oe&2&&Nt!==0?Nt&-Nt:z0.transition!==null?(Vu===0&&(Vu=Bi()),Vu):(r=ke,r!==0||(r=window.event,r=r===void 0?16:ua(r.type)),r):1}function Hn(r,s,a,h){if(50<La)throw La=0,ef=null,Error(t(185));Wr(r,a,h),(!(Oe&2)||r!==It)&&(r===It&&(!(Oe&2)&&(Ru|=a),vt===4&&li(r,Nt)),on(r,h),a===1&&Oe===0&&!(s.mode&1)&&(co=qe()+500,su&&ti()))}function on(r,s){var a=r.callbackNode;wr(r,s);var h=Ui(r,r===It?Nt:0);if(h===0)a!==null&&ia(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&ia(a),s===1)r.tag===0?j0(Kg.bind(null,r)):Dm(Kg.bind(null,r)),b0(function(){!(Oe&6)&&ti()}),a=null;else{switch(Kr(h)){case 1:a=bi;break;case 4:a=zr;break;case 16:a=wn;break;case 536870912:a=Vl;break;default:a=wn}a=ty(a,Hg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Hg(r,s){if(ku=-1,Vu=0,Oe&6)throw Error(t(327));var a=r.callbackNode;if(ho()&&r.callbackNode!==a)return null;var h=Ui(r,r===It?Nt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=Du(r,h);else{s=h;var d=Oe;Oe|=2;var y=Qg();(It!==r||Nt!==s)&&(Dr=null,co=qe()+500,es(r,s));do try{lA();break}catch(I){Gg(r,I)}while(!0);_h(),Iu.current=y,Oe=d,ft!==null?s=0:(It=null,Nt=0,s=vt)}if(s!==0){if(s===2&&(d=cn(r),d!==0&&(h=d,s=tf(r,d))),s===1)throw a=Na,es(r,0),li(r,h),on(r,qe()),a;if(s===6)li(r,h);else{if(d=r.current.alternate,!(h&30)&&!oA(d)&&(s=Du(r,h),s===2&&(y=cn(r),y!==0&&(h=y,s=tf(r,y))),s===1))throw a=Na,es(r,0),li(r,h),on(r,qe()),a;switch(r.finishedWork=d,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ts(r,sn,Dr);break;case 3:if(li(r,h),(h&130023424)===h&&(s=Jh+500-qe(),10<s)){if(Ui(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Xt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=ah(ts.bind(null,r,sn,Dr),s);break}ts(r,sn,Dr);break;case 4:if(li(r,h),(h&4194240)===h)break;for(s=r.eventTimes,d=-1;0<h;){var E=31-Kt(h);y=1<<E,E=s[E],E>d&&(d=E),h&=~y}if(h=d,h=qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*sA(h/1960))-h,10<h){r.timeoutHandle=ah(ts.bind(null,r,sn,Dr),h);break}ts(r,sn,Dr);break;case 5:ts(r,sn,Dr);break;default:throw Error(t(329))}}}return on(r,qe()),r.callbackNode===a?Hg.bind(null,r):null}function tf(r,s){var a=Ma;return r.current.memoizedState.isDehydrated&&(es(r,s).flags|=256),r=Du(r,s),r!==2&&(s=sn,sn=a,s!==null&&nf(s)),r}function nf(r){sn===null?sn=r:sn.push.apply(sn,r)}function oA(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],y=d.getSnapshot;d=d.value;try{if(!jn(y(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function li(r,s){for(s&=~Yh,s&=~Ru,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Kt(s),h=1<<a;r[a]=-1,s&=~h}}function Kg(r){if(Oe&6)throw Error(t(327));ho();var s=Ui(r,0);if(!(s&1))return on(r,qe()),null;var a=Du(r,s);if(r.tag!==0&&a===2){var h=cn(r);h!==0&&(s=h,a=tf(r,h))}if(a===1)throw a=Na,es(r,0),li(r,s),on(r,qe()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ts(r,sn,Dr),on(r,qe()),null}function rf(r,s){var a=Oe;Oe|=1;try{return r(s)}finally{Oe=a,Oe===0&&(co=qe()+500,su&&ti())}}function Zi(r){oi!==null&&oi.tag===0&&!(Oe&6)&&ho();var s=Oe;Oe|=1;var a=Pn.transition,h=ke;try{if(Pn.transition=null,ke=1,r)return r()}finally{ke=h,Pn.transition=a,Oe=s,!(Oe&6)&&ti()}}function sf(){mn=uo.current,Ke(uo)}function es(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,O0(a)),ft!==null)for(a=ft.return;a!==null;){var h=a;switch(dh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ru();break;case 3:oo(),Ke(tn),Ke(Ft),Rh();break;case 5:Sh(h);break;case 4:oo();break;case 13:Ke(Ze);break;case 19:Ke(Ze);break;case 10:vh(h.type._context);break;case 22:case 23:sf()}a=a.return}if(It=r,ft=r=ui(r.current,null),Nt=mn=s,vt=0,Na=null,Yh=Ru=Ji=0,sn=Ma=null,Qi!==null){for(s=0;s<Qi.length;s++)if(a=Qi[s],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,y=a.pending;if(y!==null){var E=y.next;y.next=d,h.next=E}a.pending=h}Qi=null}return r}function Gg(r,s){do{var a=ft;try{if(_h(),mu.current=vu,gu){for(var h=et.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}gu=!1}if(Yi=0,St=_t=et=null,Pa=!1,Ca=0,Xh.current=null,a===null||a.return===null){vt=1,Na=s,ft=null;break}e:{var y=r,E=a.return,I=a,x=s;if(s=Nt,I.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var z=x,Y=I,J=Y.tag;if(!(Y.mode&1)&&(J===0||J===11||J===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var se=vg(E);if(se!==null){se.flags&=-257,wg(se,E,I,y,s),se.mode&1&&_g(y,z,s),s=se,x=z;var ce=s.updateQueue;if(ce===null){var he=new Set;he.add(x),s.updateQueue=he}else ce.add(x);break e}else{if(!(s&1)){_g(y,z,s),of();break e}x=Error(t(426))}}else if(Je&&I.mode&1){var lt=vg(E);if(lt!==null){!(lt.flags&65536)&&(lt.flags|=256),wg(lt,E,I,y,s),gh(ao(x,I));break e}}y=x=ao(x,I),vt!==4&&(vt=2),Ma===null?Ma=[y]:Ma.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var B=gg(y,x,s);$m(y,B);break e;case 1:I=x;var D=y.type,j=y.stateNode;if(!(y.flags&128)&&(typeof D.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(si===null||!si.has(j)))){y.flags|=65536,s&=-s,y.lanes|=s;var Z=yg(y,I,s);$m(y,Z);break e}}y=y.return}while(y!==null)}Yg(a)}catch(pe){s=pe,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Qg(){var r=Iu.current;return Iu.current=vu,r===null?vu:r}function of(){(vt===0||vt===3||vt===2)&&(vt=4),It===null||!(Ji&268435455)&&!(Ru&268435455)||li(It,Nt)}function Du(r,s){var a=Oe;Oe|=2;var h=Qg();(It!==r||Nt!==s)&&(Dr=null,es(r,s));do try{aA();break}catch(d){Gg(r,d)}while(!0);if(_h(),Oe=a,Iu.current=h,ft!==null)throw Error(t(261));return It=null,Nt=0,vt}function aA(){for(;ft!==null;)Xg(ft)}function lA(){for(;ft!==null&&!xl();)Xg(ft)}function Xg(r){var s=ey(r.alternate,r,mn);r.memoizedProps=r.pendingProps,s===null?Yg(r):ft=s,Xh.current=null}function Yg(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=tA(a,s),a!==null){a.flags&=32767,ft=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{vt=6,ft=null;return}}else if(a=eA(a,s,mn),a!==null){ft=a;return}if(s=s.sibling,s!==null){ft=s;return}ft=s=r}while(s!==null);vt===0&&(vt=5)}function ts(r,s,a){var h=ke,d=Pn.transition;try{Pn.transition=null,ke=1,uA(r,s,a,h)}finally{Pn.transition=d,ke=h}return null}function uA(r,s,a,h){do ho();while(oi!==null);if(Oe&6)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=a.lanes|a.childLanes;if(ze(r,y),r===It&&(ft=It=null,Nt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Cu||(Cu=!0,ty(wn,function(){return ho(),null})),y=(a.flags&15990)!==0,a.subtreeFlags&15990||y){y=Pn.transition,Pn.transition=null;var E=ke;ke=1;var I=Oe;Oe|=4,Xh.current=null,rA(r,a),jg(a,r),x0(sh),Qr=!!ih,sh=ih=null,r.current=a,iA(a),zc(),Oe=I,ke=E,Pn.transition=y}else r.current=a;if(Cu&&(Cu=!1,oi=r,xu=d),y=r.pendingLanes,y===0&&(si=null),Dl(a.stateNode),on(r,qe()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(Pu)throw Pu=!1,r=Zh,Zh=null,r;return xu&1&&r.tag!==0&&ho(),y=r.pendingLanes,y&1?r===ef?La++:(La=0,ef=r):La=0,ti(),null}function ho(){if(oi!==null){var r=Kr(xu),s=Pn.transition,a=ke;try{if(Pn.transition=null,ke=16>r?16:r,oi===null)var h=!1;else{if(r=oi,oi=null,xu=0,Oe&6)throw Error(t(331));var d=Oe;for(Oe|=4,le=r.current;le!==null;){var y=le,E=y.child;if(le.flags&16){var I=y.deletions;if(I!==null){for(var x=0;x<I.length;x++){var z=I[x];for(le=z;le!==null;){var Y=le;switch(Y.tag){case 0:case 11:case 15:Da(8,Y,y)}var J=Y.child;if(J!==null)J.return=Y,le=J;else for(;le!==null;){Y=le;var X=Y.sibling,se=Y.return;if(Og(Y),Y===z){le=null;break}if(X!==null){X.return=se,le=X;break}le=se}}}var ce=y.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var lt=he.sibling;he.sibling=null,he=lt}while(he!==null)}}le=y}}if(y.subtreeFlags&2064&&E!==null)E.return=y,le=E;else e:for(;le!==null;){if(y=le,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Da(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,le=B;break e}le=y.return}}var D=r.current;for(le=D;le!==null;){E=le;var j=E.child;if(E.subtreeFlags&2064&&j!==null)j.return=E,le=j;else e:for(E=D;le!==null;){if(I=le,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Su(9,I)}}catch(pe){rt(I,I.return,pe)}if(I===E){le=null;break e}var Z=I.sibling;if(Z!==null){Z.return=I.return,le=Z;break e}le=I.return}}if(Oe=d,ti(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Fi,r)}catch{}h=!0}return h}finally{ke=a,Pn.transition=s}}return!1}function Jg(r,s,a){s=ao(a,s),s=gg(r,s,1),r=ri(r,s,1),s=Xt(),r!==null&&(Wr(r,1,s),on(r,s))}function rt(r,s,a){if(r.tag===3)Jg(r,r,a);else for(;s!==null;){if(s.tag===3){Jg(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(si===null||!si.has(h))){r=ao(a,r),r=yg(s,r,1),s=ri(s,r,1),r=Xt(),s!==null&&(Wr(s,1,r),on(s,r));break}}s=s.return}}function cA(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=Xt(),r.pingedLanes|=r.suspendedLanes&a,It===r&&(Nt&a)===a&&(vt===4||vt===3&&(Nt&130023424)===Nt&&500>qe()-Jh?es(r,0):Yh|=a),on(r,s)}function Zg(r,s){s===0&&(r.mode&1?(s=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):s=1);var a=Xt();r=xr(r,s),r!==null&&(Wr(r,s,a),on(r,a))}function hA(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Zg(r,a)}function fA(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Zg(r,a)}var ey;ey=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||tn.current)rn=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return rn=!1,Z0(r,s,a);rn=!!(r.flags&131072)}else rn=!1,Je&&s.flags&1048576&&Nm(s,au,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Tu(r,s),r=s.pendingProps;var d=Zs(s,Ft.current);so(s,a),d=xh(null,s,h,r,d,a);var y=kh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,nn(h)?(y=!0,iu(s)):y=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Th(s),d.updater=wu,s.stateNode=d,d._reactInternals=s,Oh(s,h,r,a),s=Bh(null,s,h,!0,y,a)):(s.tag=0,Je&&y&&fh(s),Qt(null,s,d,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Tu(r,s),r=s.pendingProps,d=h._init,h=d(h._payload),s.type=h,d=s.tag=pA(h),r=$n(h,r),d){case 0:s=Uh(null,s,h,r,a);break e;case 1:s=Rg(null,s,h,r,a);break e;case 11:s=Eg(null,s,h,r,a);break e;case 14:s=Tg(null,s,h,$n(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:$n(h,d),Uh(r,s,h,d,a);case 1:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:$n(h,d),Rg(r,s,h,d,a);case 3:e:{if(Pg(s),r===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,d=y.element,zm(r,s),du(s,h,null,a);var E=s.memoizedState;if(h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){d=ao(Error(t(423)),s),s=Cg(r,s,h,a,d);break e}else if(h!==d){d=ao(Error(t(424)),s),s=Cg(r,s,h,a,d);break e}else for(pn=Jr(s.stateNode.containerInfo.firstChild),dn=s,Je=!0,zn=null,a=Bm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(no(),h===d){s=Vr(r,s,a);break e}Qt(r,s,h,a)}s=s.child}return s;case 5:return Wm(s),r===null&&mh(s),h=s.type,d=s.pendingProps,y=r!==null?r.memoizedProps:null,E=d.children,oh(h,d)?E=null:y!==null&&oh(h,y)&&(s.flags|=32),Ig(r,s),Qt(r,s,E,a),s.child;case 6:return r===null&&mh(s),null;case 13:return xg(r,s,a);case 4:return Ah(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=ro(s,null,h,a):Qt(r,s,h,a),s.child;case 11:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:$n(h,d),Eg(r,s,h,d,a);case 7:return Qt(r,s,s.pendingProps,a),s.child;case 8:return Qt(r,s,s.pendingProps.children,a),s.child;case 12:return Qt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,d=s.pendingProps,y=s.memoizedProps,E=d.value,We(cu,h._currentValue),h._currentValue=E,y!==null)if(jn(y.value,E)){if(y.children===d.children&&!tn.current){s=Vr(r,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var I=y.dependencies;if(I!==null){E=y.child;for(var x=I.firstContext;x!==null;){if(x.context===h){if(y.tag===1){x=kr(-1,a&-a),x.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?x.next=x:(x.next=Y.next,Y.next=x),z.pending=x}}y.lanes|=a,x=y.alternate,x!==null&&(x.lanes|=a),wh(y.return,a,s),I.lanes|=a;break}x=x.next}}else if(y.tag===10)E=y.type===s.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=a,I=E.alternate,I!==null&&(I.lanes|=a),wh(E,a,s),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===s){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}Qt(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,h=s.pendingProps.children,so(s,a),d=In(d),h=h(d),s.flags|=1,Qt(r,s,h,a),s.child;case 14:return h=s.type,d=$n(h,s.pendingProps),d=$n(h.type,d),Tg(r,s,h,d,a);case 15:return Ag(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:$n(h,d),Tu(r,s),s.tag=1,nn(h)?(r=!0,iu(s)):r=!1,so(s,a),pg(s,h,d),Oh(s,h,d,a),Bh(null,s,h,!0,r,a);case 19:return Vg(r,s,a);case 22:return Sg(r,s,a)}throw Error(t(156,s.tag))};function ty(r,s){return Ds(r,s)}function dA(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(r,s,a,h){return new dA(r,s,a,h)}function af(r){return r=r.prototype,!(!r||!r.isReactComponent)}function pA(r){if(typeof r=="function")return af(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===Ct)return 14}return 2}function ui(r,s){var a=r.alternate;return a===null?(a=Cn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Nu(r,s,a,h,d,y){var E=2;if(h=r,typeof r=="function")af(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case k:return ns(a.children,d,y,s);case S:E=8,d|=8;break;case R:return r=Cn(12,a,s,d|2),r.elementType=R,r.lanes=y,r;case C:return r=Cn(13,a,s,d),r.elementType=C,r.lanes=y,r;case Xe:return r=Cn(19,a,s,d),r.elementType=Xe,r.lanes=y,r;case Se:return Mu(a,d,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:E=10;break e;case L:E=9;break e;case F:E=11;break e;case Ct:E=14;break e;case xt:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Cn(E,a,s,d),s.elementType=r,s.type=h,s.lanes=y,s}function ns(r,s,a,h){return r=Cn(7,r,h,s),r.lanes=a,r}function Mu(r,s,a,h){return r=Cn(22,r,h,s),r.elementType=Se,r.lanes=a,r.stateNode={isHidden:!1},r}function lf(r,s,a){return r=Cn(6,r,null,s),r.lanes=a,r}function uf(r,s,a){return s=Cn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function mA(r,s,a,h,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qr(0),this.expirationTimes=qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function cf(r,s,a,h,d,y,E,I,x){return r=new mA(r,s,a,I,x),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Cn(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(y),r}function gA(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function ny(r){if(!r)return ei;r=r._reactInternals;e:{if(Mn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(nn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(nn(a))return km(r,a,s)}return s}function ry(r,s,a,h,d,y,E,I,x){return r=cf(a,h,!0,r,d,y,E,I,x),r.context=ny(null),a=r.current,h=Xt(),d=ai(a),y=kr(h,d),y.callback=s??null,ri(a,y,d),r.current.lanes=d,Wr(r,d,h),on(r,h),r}function Lu(r,s,a,h){var d=s.current,y=Xt(),E=ai(d);return a=ny(a),s.context===null?s.context=a:s.pendingContext=a,s=kr(y,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=ri(d,s,E),r!==null&&(Hn(r,d,E,y),fu(r,d,E)),E}function Ou(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function iy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function hf(r,s){iy(r,s),(r=r.alternate)&&iy(r,s)}var sy=typeof reportError=="function"?reportError:function(r){console.error(r)};function ff(r){this._internalRoot=r}bu.prototype.render=ff.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Lu(r,s,null,null)},bu.prototype.unmount=ff.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Zi(function(){Lu(null,r,null,null)}),s[Ir]=null}};function bu(r){this._internalRoot=r}bu.prototype.unstable_scheduleHydration=function(r){if(r){var s=bl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<er.length&&s!==0&&s<er[a].priority;a++);er.splice(a,0,r),a===0&&Bl(r)}};function df(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Fu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function oy(){}function yA(r,s,a,h,d){if(d){if(typeof h=="function"){var y=h;h=function(){var z=Ou(E);y.call(z)}}var E=ry(s,h,r,0,null,!1,!1,"",oy);return r._reactRootContainer=E,r[Ir]=E.current,va(r.nodeType===8?r.parentNode:r),Zi(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var I=h;h=function(){var z=Ou(x);I.call(z)}}var x=cf(r,0,!1,null,null,!1,!1,"",oy);return r._reactRootContainer=x,r[Ir]=x.current,va(r.nodeType===8?r.parentNode:r),Zi(function(){Lu(s,x,a,h)}),x}function Uu(r,s,a,h,d){var y=a._reactRootContainer;if(y){var E=y;if(typeof d=="function"){var I=d;d=function(){var x=Ou(E);I.call(x)}}Lu(s,E,r,d)}else E=yA(a,s,r,d,h);return Ou(E)}Ll=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=$r(s.pendingLanes);a!==0&&(Hr(s,a|1),on(s,qe()),!(Oe&6)&&(co=qe()+500,ti()))}break;case 13:Zi(function(){var h=xr(r,1);if(h!==null){var d=Xt();Hn(h,r,1,d)}}),hf(r,1)}},Ls=function(r){if(r.tag===13){var s=xr(r,134217728);if(s!==null){var a=Xt();Hn(s,r,134217728,a)}hf(r,134217728)}},Ol=function(r){if(r.tag===13){var s=ai(r),a=xr(r,s);if(a!==null){var h=Xt();Hn(a,r,s,h)}hf(r,s)}},bl=function(){return ke},Fl=function(r,s){var a=ke;try{return ke=r,s()}finally{ke=a}},Rs=function(r,s,a){switch(s){case"input":if(qo(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var d=nu(h);if(!d)throw Error(t(90));ws(h),qo(h,d)}}}break;case"textarea":Ss(r,a);break;case"select":s=a.value,s!=null&&yr(r,!!a.multiple,s,!1)}},Ni=rf,ea=Zi;var _A={usingClientEntryPoint:!1,Events:[Ta,Ys,nu,Jn,Zo,rf]},Oa={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vA={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ra(r),r===null?null:r.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Fi=Bu.inject(vA),un=Bu}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_A,an.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(s))throw Error(t(200));return gA(r,s,null,a)},an.createRoot=function(r,s){if(!df(r))throw Error(t(299));var a=!1,h="",d=sy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=cf(r,1,!1,null,null,a,!1,h,d),r[Ir]=s.current,va(r.nodeType===8?r.parentNode:r),new ff(s)},an.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ra(s),r=r===null?null:r.stateNode,r},an.flushSync=function(r){return Zi(r)},an.hydrate=function(r,s,a){if(!Fu(s))throw Error(t(200));return Uu(null,r,s,!0,a)},an.hydrateRoot=function(r,s,a){if(!df(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,y="",E=sy;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=ry(s,null,r,1,a??null,d,!1,y,E),r[Ir]=s.current,va(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new bu(s)},an.render=function(r,s,a){if(!Fu(s))throw Error(t(200));return Uu(null,r,s,!1,a)},an.unmountComponentAtNode=function(r){if(!Fu(r))throw Error(t(40));return r._reactRootContainer?(Zi(function(){Uu(null,null,r,!1,function(){r._reactRootContainer=null,r[Ir]=null})}),!0):!1},an.unstable_batchedUpdates=rf,an.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!Fu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Uu(r,s,a,!1,h)},an.version="18.3.1-next-f1338f8080-20240426",an}var py;function PA(){if(py)return gf.exports;py=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gf.exports=RA(),gf.exports}var my;function CA(){if(my)return ju;my=1;var n=PA();return ju.createRoot=n.createRoot,ju.hydrateRoot=n.hydrateRoot,ju}var xA=CA();function jf({children:n}){return de.jsx("div",{className:"p-4 bg-purple-800 rounded-2xl shadow-md",children:n})}function Ov({children:n,onClick:e}){return de.jsx("button",{className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-white",onClick:e,children:n})}function bv({value:n,onChange:e,placeholder:t}){return de.jsx("textarea",{className:"w-full p-2 rounded-lg bg-purple-700 text-white resize-none",value:n,onChange:e,placeholder:t,rows:"4"})}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fv=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=fe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...f},p)=>fe.createElement("svg",{ref:p,...VA,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:Fv("lucide",o),...f},[...c.map(([g,_])=>fe.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=(n,e)=>{const t=fe.forwardRef(({className:i,...o},l)=>fe.createElement(DA,{ref:l,iconNode:e,className:Fv(`lucide-${kA(n)}`,i),...o}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],LA=NA("Upload",MA),Uv=fe.createContext({});function OA(n){const e=fe.useRef(null);return e.current===null&&(e.current=n()),e.current}const Vd=fe.createContext(null),Bv=fe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function bA(n=!0){const e=fe.useContext(Vd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:o}=e,l=fe.useId();fe.useEffect(()=>{n&&o(l)},[n]);const c=fe.useCallback(()=>n&&i&&i(l),[l,i,n]);return!t&&i?[!1,c]:[!0]}const Dd=typeof window<"u",FA=Dd?fe.useLayoutEffect:fe.useEffect,yn=n=>n;let zf=yn;function Nd(n){let e;return()=>(e===void 0&&(e=n()),e)}const Io=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Nr=n=>n*1e3,Mr=n=>n/1e3,UA={skipAnimations:!1,useManualTiming:!1};function BA(n){let e=new Set,t=new Set,i=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(g){l.has(g)&&(p.schedule(g),n()),g(c)}const p={schedule:(g,_=!1,w=!1)=>{const P=w&&i?e:t;return _&&l.add(g),P.has(g)||P.add(g),g},cancel:g=>{t.delete(g),l.delete(g)},process:g=>{if(c=g,i){o=!0;return}i=!0,[e,t]=[t,e],e.forEach(f),e.clear(),i=!1,o&&(o=!1,p.process(g))}};return p}const zu=["read","resolveKeyframes","update","preRender","render","postRender"],jA=40;function jv(n,e){let t=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=zu.reduce((q,H)=>(q[H]=BA(l),q),{}),{read:f,resolveKeyframes:p,update:g,preRender:_,render:w,postRender:T}=c,P=()=>{const q=performance.now();t=!1,o.delta=i?1e3/60:Math.max(Math.min(q-o.timestamp,jA),1),o.timestamp=q,o.isProcessing=!0,f.process(o),p.process(o),g.process(o),_.process(o),w.process(o),T.process(o),o.isProcessing=!1,t&&e&&(i=!1,n(P))},O=()=>{t=!0,i=!0,o.isProcessing||n(P)};return{schedule:zu.reduce((q,H)=>{const G=c[H];return q[H]=(ne,re=!1,ae=!1)=>(t||O(),G.schedule(ne,re,ae)),q},{}),cancel:q=>{for(let H=0;H<zu.length;H++)c[zu[H]].cancel(q)},state:o,steps:c}}const{schedule:Qe,cancel:wi,state:Mt,steps:vf}=jv(typeof requestAnimationFrame<"u"?requestAnimationFrame:yn,!0),zv=fe.createContext({strict:!1}),gy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ro={};for(const n in gy)Ro[n]={isEnabled:e=>gy[n].some(t=>!!e[t])};function zA(n){for(const e in n)Ro[e]={...Ro[e],...n[e]}}const $A=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ac(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$A.has(n)}let $v=n=>!ac(n);function qA(n){n&&($v=e=>e.startsWith("on")?!ac(e):n(e))}try{qA(require("@emotion/is-prop-valid").default)}catch{}function WA(n,e,t){const i={};for(const o in n)o==="values"&&typeof n.values=="object"||($v(o)||t===!0&&ac(o)||!e&&!ac(o)||n.draggable&&o.startsWith("onDrag"))&&(i[o]=n[o]);return i}function HA(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,o)=>o==="create"?n:(e.has(o)||e.set(o,n(o)),e.get(o))})}const Ac=fe.createContext({});function nl(n){return typeof n=="string"||Array.isArray(n)}function Sc(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Md=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ld=["initial",...Md];function Ic(n){return Sc(n.animate)||Ld.some(e=>nl(n[e]))}function qv(n){return!!(Ic(n)||n.variants)}function KA(n,e){if(Ic(n)){const{initial:t,animate:i}=n;return{initial:t===!1||nl(t)?t:void 0,animate:nl(i)?i:void 0}}return n.inherit!==!1?e:{}}function GA(n){const{initial:e,animate:t}=KA(n,fe.useContext(Ac));return fe.useMemo(()=>({initial:e,animate:t}),[yy(e),yy(t)])}function yy(n){return Array.isArray(n)?n.join(" "):n}const QA=Symbol.for("motionComponentSymbol");function yo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function XA(n,e,t){return fe.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):yo(t)&&(t.current=i))},[e])}const Od=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YA="framerAppearId",Wv="data-"+Od(YA),{schedule:bd,cancel:l2}=jv(queueMicrotask,!1),Hv=fe.createContext({});function JA(n,e,t,i,o){var l,c;const{visualElement:f}=fe.useContext(Ac),p=fe.useContext(zv),g=fe.useContext(Vd),_=fe.useContext(Bv).reducedMotion,w=fe.useRef(null);i=i||p.renderer,!w.current&&i&&(w.current=i(n,{visualState:e,parent:f,props:t,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:_}));const T=w.current,P=fe.useContext(Hv);T&&!T.projection&&o&&(T.type==="html"||T.type==="svg")&&ZA(w.current,t,o,P);const O=fe.useRef(!1);fe.useInsertionEffect(()=>{T&&O.current&&T.update(t,g)});const N=t[Wv],M=fe.useRef(!!N&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,N))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,N)));return FA(()=>{T&&(O.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),bd.render(T.render),M.current&&T.animationState&&T.animationState.animateChanges())}),fe.useEffect(()=>{T&&(!M.current&&T.animationState&&T.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var q;(q=window.MotionHandoffMarkAsComplete)===null||q===void 0||q.call(window,N)}),M.current=!1))}),T}function ZA(n,e,t,i){const{layoutId:o,layout:l,drag:c,dragConstraints:f,layoutScroll:p,layoutRoot:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Kv(n.parent)),n.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!c||f&&yo(f),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:g})}function Kv(n){if(n)return n.options.allowProjection!==!1?n.projection:Kv(n.parent)}function eS({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:o}){var l,c;n&&zA(n);function f(g,_){let w;const T={...fe.useContext(Bv),...g,layoutId:tS(g)},{isStatic:P}=T,O=GA(g),N=i(g,P);if(!P&&Dd){nS();const M=rS(T);w=M.MeasureLayout,O.visualElement=JA(o,N,T,e,M.ProjectionNode)}return de.jsxs(Ac.Provider,{value:O,children:[w&&O.visualElement?de.jsx(w,{visualElement:O.visualElement,...T}):null,t(o,g,XA(N,O.visualElement,_),N,P,O.visualElement)]})}f.displayName=`motion.${typeof o=="string"?o:`create(${(c=(l=o.displayName)!==null&&l!==void 0?l:o.name)!==null&&c!==void 0?c:""})`}`;const p=fe.forwardRef(f);return p[QA]=o,p}function tS({layoutId:n}){const e=fe.useContext(Uv).id;return e&&n!==void 0?e+"-"+n:n}function nS(n,e){fe.useContext(zv).strict}function rS(n){const{drag:e,layout:t}=Ro;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const iS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fd(n){return typeof n!="string"||n.includes("-")?!1:!!(iS.indexOf(n)>-1||/[A-Z]/u.test(n))}function _y(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Ud(n,e,t,i){if(typeof e=="function"){const[o,l]=_y(i);e=e(t!==void 0?t:n.custom,o,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[o,l]=_y(i);e=e(t!==void 0?t:n.custom,o,l)}return e}const $f=n=>Array.isArray(n),sS=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),oS=n=>$f(n)?n[n.length-1]||0:n,Ht=n=>!!(n&&n.getVelocity);function Ju(n){const e=Ht(n)?n.get():n;return sS(e)?e.toValue():e}function aS({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,o,l){const c={latestValues:lS(i,o,l,n),renderState:e()};return t&&(c.onMount=f=>t({props:i,current:f,...c}),c.onUpdate=f=>t(f)),c}const Gv=n=>(e,t)=>{const i=fe.useContext(Ac),o=fe.useContext(Vd),l=()=>aS(n,e,i,o);return t?l():OA(l)};function lS(n,e,t,i){const o={},l=i(n,{});for(const T in l)o[T]=Ju(l[T]);let{initial:c,animate:f}=n;const p=Ic(n),g=qv(n);e&&g&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let _=t?t.initial===!1:!1;_=_||c===!1;const w=_?f:c;if(w&&typeof w!="boolean"&&!Sc(w)){const T=Array.isArray(w)?w:[w];for(let P=0;P<T.length;P++){const O=Ud(n,T[P]);if(O){const{transitionEnd:N,transition:M,...q}=O;for(const H in q){let G=q[H];if(Array.isArray(G)){const ne=_?G.length-1:0;G=G[ne]}G!==null&&(o[H]=G)}for(const H in N)o[H]=N[H]}}}return o}const Oo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ps=new Set(Oo),Qv=n=>e=>typeof e=="string"&&e.startsWith(n),Bd=Qv("--"),uS=Qv("var(--"),jd=n=>uS(n)?cS.test(n.split("/*")[0].trim()):!1,cS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xv=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Or=(n,e,t)=>t>e?e:t<n?n:t,bo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},rl={...bo,transform:n=>Or(0,1,n)},$u={...bo,default:1},_l=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),hi=_l("deg"),cr=_l("%"),we=_l("px"),hS=_l("vh"),fS=_l("vw"),vy={...cr,parse:n=>cr.parse(n)/100,transform:n=>cr.transform(n*100)},dS={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we},pS={rotate:hi,rotateX:hi,rotateY:hi,rotateZ:hi,scale:$u,scaleX:$u,scaleY:$u,scaleZ:$u,skew:hi,skewX:hi,skewY:hi,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:rl,originX:vy,originY:vy,originZ:we},wy={...bo,transform:Math.round},zd={...dS,...pS,zIndex:wy,size:we,fillOpacity:rl,strokeOpacity:rl,numOctaves:wy},mS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gS=Oo.length;function yS(n,e,t){let i="",o=!0;for(let l=0;l<gS;l++){const c=Oo[l],f=n[c];if(f===void 0)continue;let p=!0;if(typeof f=="number"?p=f===(c.startsWith("scale")?1:0):p=parseFloat(f)===0,!p||t){const g=Xv(f,zd[c]);if(!p){o=!1;const _=mS[c]||c;i+=`${_}(${g}) `}t&&(e[c]=g)}}return i=i.trim(),t?i=t(e,o?"":i):o&&(i="none"),i}function $d(n,e,t){const{style:i,vars:o,transformOrigin:l}=n;let c=!1,f=!1;for(const p in e){const g=e[p];if(ps.has(p)){c=!0;continue}else if(Bd(p)){o[p]=g;continue}else{const _=Xv(g,zd[p]);p.startsWith("origin")?(f=!0,l[p]=_):i[p]=_}}if(e.transform||(c||t?i.transform=yS(e,n.transform,t):i.transform&&(i.transform="none")),f){const{originX:p="50%",originY:g="50%",originZ:_=0}=l;i.transformOrigin=`${p} ${g} ${_}`}}const _S={offset:"stroke-dashoffset",array:"stroke-dasharray"},vS={offset:"strokeDashoffset",array:"strokeDasharray"};function wS(n,e,t=1,i=0,o=!0){n.pathLength=1;const l=o?_S:vS;n[l.offset]=we.transform(-i);const c=we.transform(e),f=we.transform(t);n[l.array]=`${c} ${f}`}function Ey(n,e,t){return typeof n=="string"?n:we.transform(e+t*n)}function ES(n,e,t){const i=Ey(e,n.x,n.width),o=Ey(t,n.y,n.height);return`${i} ${o}`}function qd(n,{attrX:e,attrY:t,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:f=1,pathOffset:p=0,...g},_,w){if($d(n,g,w),_){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:T,style:P,dimensions:O}=n;T.transform&&(O&&(P.transform=T.transform),delete T.transform),O&&(o!==void 0||l!==void 0||P.transform)&&(P.transformOrigin=ES(O,o!==void 0?o:.5,l!==void 0?l:.5)),e!==void 0&&(T.x=e),t!==void 0&&(T.y=t),i!==void 0&&(T.scale=i),c!==void 0&&wS(T,c,f,p,!1)}const Wd=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Yv=()=>({...Wd(),attrs:{}}),Hd=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Jv(n,{style:e,vars:t},i,o){Object.assign(n.style,e,o&&o.getProjectionStyles(i));for(const l in t)n.style.setProperty(l,t[l])}const Zv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ew(n,e,t,i){Jv(n,e,void 0,i);for(const o in e.attrs)n.setAttribute(Zv.has(o)?o:Od(o),e.attrs[o])}const il={};function TS(n){for(const e in n)il[e]=n[e],Bd(e)&&(il[e].isCSSVariable=!0)}function tw(n,{layout:e,layoutId:t}){return ps.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!il[n]||n==="opacity")}function Kd(n,e,t){var i;const{style:o}=n,l={};for(const c in o)(Ht(o[c])||e.style&&Ht(e.style[c])||tw(c,n)||((i=t==null?void 0:t.getValue(c))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(l[c]=o[c]);return l}function nw(n,e,t){const i=Kd(n,e,t);for(const o in n)if(Ht(n[o])||Ht(e[o])){const l=Oo.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[l]=n[o]}return i}function AS(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Ty=["x","y","width","height","cx","cy","r"],SS={useVisualState:Gv({scrapeMotionValuesFromProps:nw,createRenderState:Yv,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:o})=>{if(!t)return;let l=!!n.drag;if(!l){for(const f in o)if(ps.has(f)){l=!0;break}}if(!l)return;let c=!e;if(e)for(let f=0;f<Ty.length;f++){const p=Ty[f];n[p]!==e[p]&&(c=!0)}c&&Qe.read(()=>{AS(t,i),Qe.render(()=>{qd(i,o,Hd(t.tagName),n.transformTemplate),ew(t,i)})})}})},IS={useVisualState:Gv({scrapeMotionValuesFromProps:Kd,createRenderState:Wd})};function rw(n,e,t){for(const i in e)!Ht(e[i])&&!tw(i,t)&&(n[i]=e[i])}function RS({transformTemplate:n},e){return fe.useMemo(()=>{const t=Wd();return $d(t,e,n),Object.assign({},t.vars,t.style)},[e])}function PS(n,e){const t=n.style||{},i={};return rw(i,t,n),Object.assign(i,RS(n,e)),i}function CS(n,e){const t={},i=PS(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function xS(n,e,t,i){const o=fe.useMemo(()=>{const l=Yv();return qd(l,e,Hd(i),n.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};rw(l,n.style,n),o.style={...l,...o.style}}return o}function kS(n=!1){return(t,i,o,{latestValues:l},c)=>{const p=(Fd(t)?xS:CS)(i,l,c,t),g=WA(i,typeof t=="string",n),_=t!==fe.Fragment?{...g,...p,ref:o}:{},{children:w}=i,T=fe.useMemo(()=>Ht(w)?w.get():w,[w]);return fe.createElement(t,{..._,children:T})}}function VS(n,e){return function(i,{forwardMotionProps:o}={forwardMotionProps:!1}){const c={...Fd(i)?SS:IS,preloadedFeatures:n,useRender:kS(o),createVisualElement:e,Component:i};return eS(c)}}function iw(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Rc(n,e,t){const i=n.getProps();return Ud(i,e,t!==void 0?t:i.custom,n)}const DS=Nd(()=>window.ScrollTimeline!==void 0);class NS{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(o=>{if(DS()&&o.attachTimeline)return o.attachTimeline(e);if(typeof t=="function")return t(o)});return()=>{i.forEach((o,l)=>{o&&o(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class MS extends NS{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Gd(n,e){return n?n[e]||n.default||n:void 0}const qf=2e4;function sw(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<qf;)e+=t,i=n.next(e);return e>=qf?1/0:e}function Qd(n){return typeof n=="function"}function Ay(n,e){n.timeline=e,n.onfinish=null}const Xd=n=>Array.isArray(n)&&typeof n[0]=="number",LS={linearEasing:void 0};function OS(n,e){const t=Nd(n);return()=>{var i;return(i=LS[e])!==null&&i!==void 0?i:t()}}const lc=OS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ow=(n,e,t=10)=>{let i="";const o=Math.max(Math.round(e/t),2);for(let l=0;l<o;l++)i+=n(Io(0,o-1,l))+", ";return`linear(${i.substring(0,i.length-2)})`};function aw(n){return!!(typeof n=="function"&&lc()||!n||typeof n=="string"&&(n in Wf||lc())||Xd(n)||Array.isArray(n)&&n.every(aw))}const Ba=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Wf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ba([0,.65,.55,1]),circOut:Ba([.55,0,1,.45]),backIn:Ba([.31,.01,.66,-.59]),backOut:Ba([.33,1.53,.69,.99])};function lw(n,e){if(n)return typeof n=="function"&&lc()?ow(n,e):Xd(n)?Ba(n):Array.isArray(n)?n.map(t=>lw(t,e)||Wf.easeOut):Wf[n]}const Kn={x:!1,y:!1};function uw(){return Kn.x||Kn.y}function bS(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let o=document;const l=(i=void 0)!==null&&i!==void 0?i:o.querySelectorAll(n);return l?Array.from(l):[]}return Array.from(n)}function cw(n,e){const t=bS(n),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[t,o,()=>i.abort()]}function Sy(n){return!(n.pointerType==="touch"||uw())}function FS(n,e,t={}){const[i,o,l]=cw(n,t),c=f=>{if(!Sy(f))return;const{target:p}=f,g=e(p,f);if(typeof g!="function"||!p)return;const _=w=>{Sy(w)&&(g(w),p.removeEventListener("pointerleave",_))};p.addEventListener("pointerleave",_,o)};return i.forEach(f=>{f.addEventListener("pointerenter",c,o)}),l}const hw=(n,e)=>e?n===e?!0:hw(n,e.parentElement):!1,Yd=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,US=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BS(n){return US.has(n.tagName)||n.tabIndex!==-1}const ja=new WeakSet;function Iy(n){return e=>{e.key==="Enter"&&n(e)}}function wf(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const jS=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Iy(()=>{if(ja.has(t))return;wf(t,"down");const o=Iy(()=>{wf(t,"up")}),l=()=>wf(t,"cancel");t.addEventListener("keyup",o,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Ry(n){return Yd(n)&&!uw()}function zS(n,e,t={}){const[i,o,l]=cw(n,t),c=f=>{const p=f.currentTarget;if(!Ry(f)||ja.has(p))return;ja.add(p);const g=e(p,f),_=(P,O)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",T),!(!Ry(P)||!ja.has(p))&&(ja.delete(p),typeof g=="function"&&g(P,{success:O}))},w=P=>{_(P,t.useGlobalTarget||hw(p,P.target))},T=P=>{_(P,!1)};window.addEventListener("pointerup",w,o),window.addEventListener("pointercancel",T,o)};return i.forEach(f=>{!BS(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(t.useGlobalTarget?window:f).addEventListener("pointerdown",c,o),f.addEventListener("focus",g=>jS(g,o),o)}),l}function $S(n){return n==="x"||n==="y"?Kn[n]?null:(Kn[n]=!0,()=>{Kn[n]=!1}):Kn.x||Kn.y?null:(Kn.x=Kn.y=!0,()=>{Kn.x=Kn.y=!1})}const fw=new Set(["width","height","top","left","right","bottom",...Oo]);let Zu;function qS(){Zu=void 0}const hr={now:()=>(Zu===void 0&&hr.set(Mt.isProcessing||UA.useManualTiming?Mt.timestamp:performance.now()),Zu),set:n=>{Zu=n,queueMicrotask(qS)}};function Jd(n,e){n.indexOf(e)===-1&&n.push(e)}function Zd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class ep{constructor(){this.subscriptions=[]}add(e){return Jd(this.subscriptions,e),()=>Zd(this.subscriptions,e)}notify(e,t,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,i);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function dw(n,e){return e?n*(1e3/e):0}const Py=30,WS=n=>!isNaN(parseFloat(n));class HS{constructor(e,t={}){this.version="12.0.6",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,o=!0)=>{const l=hr.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=WS(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ep);const i=this.events[e].add(t);return e==="change"?()=>{i(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Py)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Py);return dw(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sl(n,e){return new HS(n,e)}function KS(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,sl(t))}function GS(n,e){const t=Rc(n,e);let{transitionEnd:i={},transition:o={},...l}=t||{};l={...l,...i};for(const c in l){const f=oS(l[c]);KS(n,c,f)}}function QS(n){return!!(Ht(n)&&n.add)}function Hf(n,e){const t=n.getValue("willChange");if(QS(t))return t.add(e)}function pw(n){return n.props[Wv]}const mw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,XS=1e-7,YS=12;function JS(n,e,t,i,o){let l,c,f=0;do c=e+(t-e)/2,l=mw(c,i,o)-n,l>0?t=c:e=c;while(Math.abs(l)>XS&&++f<YS);return c}function vl(n,e,t,i){if(n===e&&t===i)return yn;const o=l=>JS(l,0,1,n,t);return l=>l===0||l===1?l:mw(o(l),e,i)}const gw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,yw=n=>e=>1-n(1-e),_w=vl(.33,1.53,.69,.99),tp=yw(_w),vw=gw(tp),ww=n=>(n*=2)<1?.5*tp(n):.5*(2-Math.pow(2,-10*(n-1))),np=n=>1-Math.sin(Math.acos(n)),Ew=yw(np),Tw=gw(np),Aw=n=>/^0[^.\s]+$/u.test(n);function ZS(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Aw(n):!0}const Ka=n=>Math.round(n*1e5)/1e5,rp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eI(n){return n==null}const tI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ip=(n,e)=>t=>!!(typeof t=="string"&&tI.test(t)&&t.startsWith(n)||e&&!eI(t)&&Object.prototype.hasOwnProperty.call(t,e)),Sw=(n,e,t)=>i=>{if(typeof i!="string")return i;const[o,l,c,f]=i.match(rp);return{[n]:parseFloat(o),[e]:parseFloat(l),[t]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},nI=n=>Or(0,255,n),Ef={...bo,transform:n=>Math.round(nI(n))},as={test:ip("rgb","red"),parse:Sw("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Ef.transform(n)+", "+Ef.transform(e)+", "+Ef.transform(t)+", "+Ka(rl.transform(i))+")"};function rI(n){let e="",t="",i="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Kf={test:ip("#"),parse:rI,transform:as.transform},_o={test:ip("hsl","hue"),parse:Sw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+cr.transform(Ka(e))+", "+cr.transform(Ka(t))+", "+Ka(rl.transform(i))+")"},$t={test:n=>as.test(n)||Kf.test(n)||_o.test(n),parse:n=>as.test(n)?as.parse(n):_o.test(n)?_o.parse(n):Kf.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?as.transform(n):_o.transform(n)},iI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sI(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(rp))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(iI))===null||t===void 0?void 0:t.length)||0)>0}const Iw="number",Rw="color",oI="var",aI="var(",Cy="${}",lI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ol(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},o=[];let l=0;const f=e.replace(lI,p=>($t.test(p)?(i.color.push(l),o.push(Rw),t.push($t.parse(p))):p.startsWith(aI)?(i.var.push(l),o.push(oI),t.push(p)):(i.number.push(l),o.push(Iw),t.push(parseFloat(p))),++l,Cy)).split(Cy);return{values:t,split:f,indexes:i,types:o}}function Pw(n){return ol(n).values}function Cw(n){const{split:e,types:t}=ol(n),i=e.length;return o=>{let l="";for(let c=0;c<i;c++)if(l+=e[c],o[c]!==void 0){const f=t[c];f===Iw?l+=Ka(o[c]):f===Rw?l+=$t.transform(o[c]):l+=o[c]}return l}}const uI=n=>typeof n=="number"?0:n;function cI(n){const e=Pw(n);return Cw(n)(e.map(uI))}const Ei={test:sI,parse:Pw,createTransformer:Cw,getAnimatableNone:cI},hI=new Set(["brightness","contrast","saturate","opacity"]);function fI(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(rp)||[];if(!i)return n;const o=t.replace(i,"");let l=hI.has(e)?1:0;return i!==t&&(l*=100),e+"("+l+o+")"}const dI=/\b([a-z-]*)\(.*?\)/gu,Gf={...Ei,getAnimatableNone:n=>{const e=n.match(dI);return e?e.map(fI).join(" "):n}},pI={...zd,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:Gf,WebkitFilter:Gf},sp=n=>pI[n];function xw(n,e){let t=sp(n);return t!==Gf&&(t=Ei),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const mI=new Set(["auto","none","0"]);function gI(n,e,t){let i=0,o;for(;i<n.length&&!o;){const l=n[i];typeof l=="string"&&!mI.has(l)&&ol(l).values.length&&(o=n[i]),i++}if(o&&t)for(const l of e)n[l]=xw(t,o)}const xy=n=>n===bo||n===we,ky=(n,e)=>parseFloat(n.split(", ")[e]),Vy=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return ky(o[1],e);{const l=i.match(/^matrix\((.+)\)$/u);return l?ky(l[1],n):0}},yI=new Set(["x","y","z"]),_I=Oo.filter(n=>!yI.has(n));function vI(n){const e=[];return _I.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Po={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Vy(4,13),y:Vy(5,14)};Po.translateX=Po.x;Po.translateY=Po.y;const us=new Set;let Qf=!1,Xf=!1;function kw(){if(Xf){const n=Array.from(us).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const o=vI(i);o.length&&(t.set(i,o),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=t.get(i);o&&o.forEach(([l,c])=>{var f;(f=i.getValue(l))===null||f===void 0||f.set(c)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Xf=!1,Qf=!1,us.forEach(n=>n.complete()),us.clear()}function Vw(){us.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Xf=!0)})}function wI(){Vw(),kw()}class op{constructor(e,t,i,o,l,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=o,this.element=l,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(us.add(this),Qf||(Qf=!0,Qe.read(Vw),Qe.resolveKeyframes(kw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:o}=this;for(let l=0;l<e.length;l++)if(e[l]===null)if(l===0){const c=o==null?void 0:o.get(),f=e[e.length-1];if(c!==void 0)e[0]=c;else if(i&&t){const p=i.readValue(t,f);p!=null&&(e[0]=p)}e[0]===void 0&&(e[0]=f),o&&c===void 0&&o.set(e[0])}else e[l]=e[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),us.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,us.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Dw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),EI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function TI(n){const e=EI.exec(n);if(!e)return[,];const[,t,i,o]=e;return[`--${t??i}`,o]}function Nw(n,e,t=1){const[i,o]=TI(n);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return Dw(c)?parseFloat(c):c}return jd(o)?Nw(o,e,t+1):o}const Mw=n=>e=>e.test(n),AI={test:n=>n==="auto",parse:n=>n},Lw=[bo,we,cr,hi,fS,hS,AI],Dy=n=>Lw.find(Mw(n));class Ow extends op{constructor(e,t,i,o,l){super(e,t,i,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let g=e[p];if(typeof g=="string"&&(g=g.trim(),jd(g))){const _=Nw(g,t.current);_!==void 0&&(e[p]=_),p===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!fw.has(i)||e.length!==2)return;const[o,l]=e,c=Dy(o),f=Dy(l);if(c!==f)if(xy(c)&&xy(f))for(let p=0;p<e.length;p++){const g=e[p];typeof g=="string"&&(e[p]=parseFloat(g))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let o=0;o<e.length;o++)ZS(e[o])&&i.push(o);i.length&&gI(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Po[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const l=t.getValue(i);l&&l.jump(this.measuredOrigin,!1);const c=o.length-1,f=o[c];o[c]=Po[i](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([p,g])=>{t.getValue(p).set(g)}),this.resolveNoneKeyframes()}}const Ny=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ei.test(n)||n==="0")&&!n.startsWith("url("));function SI(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function II(n,e,t,i){const o=n[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=Ny(o,e),f=Ny(l,e);return!c||!f?!1:SI(n)||(t==="spring"||Qd(t))&&i}const RI=n=>n!==null;function Pc(n,{repeat:e,repeatType:t="loop"},i){const o=n.filter(RI),l=e&&t!=="loop"&&e%2===1?0:o.length-1;return!l||i===void 0?o[l]:i}const PI=40;class bw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=hr.now(),this.options={autoplay:e,delay:t,type:i,repeat:o,repeatDelay:l,repeatType:c,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>PI?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&wI(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=hr.now(),this.hasAttemptedResolve=!0;const{name:i,type:o,velocity:l,delay:c,onComplete:f,onUpdate:p,isGenerator:g}=this.options;if(!g&&!II(e,i,o,l))if(c)this.options.duration=0;else{p&&p(Pc(e,this.options,t)),f&&f(),this.resolveFinishedPromise();return}const _=this.initPlayback(e,t);_!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,..._},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tt=(n,e,t)=>n+(e-n)*t;function Tf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function CI({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let o=0,l=0,c=0;if(!e)o=l=c=t;else{const f=t<.5?t*(1+e):t+e-t*e,p=2*t-f;o=Tf(p,f,n+1/3),l=Tf(p,f,n),c=Tf(p,f,n-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}function uc(n,e){return t=>t>0?e:n}const Af=(n,e,t)=>{const i=n*n,o=t*(e*e-i)+i;return o<0?0:Math.sqrt(o)},xI=[Kf,as,_o],kI=n=>xI.find(e=>e.test(n));function My(n){const e=kI(n);if(!e)return!1;let t=e.parse(n);return e===_o&&(t=CI(t)),t}const Ly=(n,e)=>{const t=My(n),i=My(e);if(!t||!i)return uc(n,e);const o={...t};return l=>(o.red=Af(t.red,i.red,l),o.green=Af(t.green,i.green,l),o.blue=Af(t.blue,i.blue,l),o.alpha=tt(t.alpha,i.alpha,l),as.transform(o))},VI=(n,e)=>t=>e(n(t)),wl=(...n)=>n.reduce(VI),Yf=new Set(["none","hidden"]);function DI(n,e){return Yf.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function NI(n,e){return t=>tt(n,e,t)}function ap(n){return typeof n=="number"?NI:typeof n=="string"?jd(n)?uc:$t.test(n)?Ly:OI:Array.isArray(n)?Fw:typeof n=="object"?$t.test(n)?Ly:MI:uc}function Fw(n,e){const t=[...n],i=t.length,o=n.map((l,c)=>ap(l)(l,e[c]));return l=>{for(let c=0;c<i;c++)t[c]=o[c](l);return t}}function MI(n,e){const t={...n,...e},i={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(i[o]=ap(n[o])(n[o],e[o]));return o=>{for(const l in i)t[l]=i[l](o);return t}}function LI(n,e){var t;const i=[],o={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const c=e.types[l],f=n.indexes[c][o[c]],p=(t=n.values[f])!==null&&t!==void 0?t:0;i[l]=p,o[c]++}return i}const OI=(n,e)=>{const t=Ei.createTransformer(e),i=ol(n),o=ol(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Yf.has(n)&&!o.values.length||Yf.has(e)&&!i.values.length?DI(n,e):wl(Fw(LI(i,o),o.values),t):uc(n,e)};function Uw(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?tt(n,e,t):ap(n)(n,e)}const bI=5;function Bw(n,e,t){const i=Math.max(e-bI,0);return dw(t-n(i),e-i)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Oy=.001;function FI({duration:n=it.duration,bounce:e=it.bounce,velocity:t=it.velocity,mass:i=it.mass}){let o,l,c=1-e;c=Or(it.minDamping,it.maxDamping,c),n=Or(it.minDuration,it.maxDuration,Mr(n)),c<1?(o=g=>{const _=g*c,w=_*n,T=_-t,P=Jf(g,c),O=Math.exp(-w);return Oy-T/P*O},l=g=>{const w=g*c*n,T=w*t+t,P=Math.pow(c,2)*Math.pow(g,2)*n,O=Math.exp(-w),N=Jf(Math.pow(g,2),c);return(-o(g)+Oy>0?-1:1)*((T-P)*O)/N}):(o=g=>{const _=Math.exp(-g*n),w=(g-t)*n+1;return-.001+_*w},l=g=>{const _=Math.exp(-g*n),w=(t-g)*(n*n);return _*w});const f=5/n,p=BI(o,l,f);if(n=Nr(n),isNaN(p))return{stiffness:it.stiffness,damping:it.damping,duration:n};{const g=Math.pow(p,2)*i;return{stiffness:g,damping:c*2*Math.sqrt(i*g),duration:n}}}const UI=12;function BI(n,e,t){let i=t;for(let o=1;o<UI;o++)i=i-n(i)/e(i);return i}function Jf(n,e){return n*Math.sqrt(1-e*e)}const jI=["duration","bounce"],zI=["stiffness","damping","mass"];function by(n,e){return e.some(t=>n[t]!==void 0)}function $I(n){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...n};if(!by(n,zI)&&by(n,jI))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),o=i*i,l=2*Or(.05,1,1-(n.bounce||0))*Math.sqrt(o);e={...e,mass:it.mass,stiffness:o,damping:l}}else{const t=FI(n);e={...e,...t,mass:it.mass},e.isResolvedFromDuration=!0}return e}function jw(n=it.visualDuration,e=it.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:o}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],f={done:!1,value:l},{stiffness:p,damping:g,mass:_,duration:w,velocity:T,isResolvedFromDuration:P}=$I({...t,velocity:-Mr(t.velocity||0)}),O=T||0,N=g/(2*Math.sqrt(p*_)),M=c-l,q=Mr(Math.sqrt(p/_)),H=Math.abs(M)<5;i||(i=H?it.restSpeed.granular:it.restSpeed.default),o||(o=H?it.restDelta.granular:it.restDelta.default);let G;if(N<1){const re=Jf(q,N);G=ae=>{const k=Math.exp(-N*q*ae);return c-k*((O+N*q*M)/re*Math.sin(re*ae)+M*Math.cos(re*ae))}}else if(N===1)G=re=>c-Math.exp(-q*re)*(M+(O+q*M)*re);else{const re=q*Math.sqrt(N*N-1);G=ae=>{const k=Math.exp(-N*q*ae),S=Math.min(re*ae,300);return c-k*((O+N*q*M)*Math.sinh(S)+re*M*Math.cosh(S))/re}}const ne={calculatedDuration:P&&w||null,next:re=>{const ae=G(re);if(P)f.done=re>=w;else{let k=0;N<1&&(k=re===0?Nr(O):Bw(G,re,ae));const S=Math.abs(k)<=i,R=Math.abs(c-ae)<=o;f.done=S&&R}return f.value=f.done?c:ae,f},toString:()=>{const re=Math.min(sw(ne),qf),ae=ow(k=>ne.next(re*k).value,re,30);return re+"ms "+ae}};return ne}function Fy({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:p,restDelta:g=.5,restSpeed:_}){const w=n[0],T={done:!1,value:w},P=S=>f!==void 0&&S<f||p!==void 0&&S>p,O=S=>f===void 0?p:p===void 0||Math.abs(f-S)<Math.abs(p-S)?f:p;let N=t*e;const M=w+N,q=c===void 0?M:c(M);q!==M&&(N=q-w);const H=S=>-N*Math.exp(-S/i),G=S=>q+H(S),ne=S=>{const R=H(S),V=G(S);T.done=Math.abs(R)<=g,T.value=T.done?q:V};let re,ae;const k=S=>{P(T.value)&&(re=S,ae=jw({keyframes:[T.value,O(T.value)],velocity:Bw(G,S,T.value),damping:o,stiffness:l,restDelta:g,restSpeed:_}))};return k(0),{calculatedDuration:null,next:S=>{let R=!1;return!ae&&re===void 0&&(R=!0,ne(S),k(S)),re!==void 0&&S>=re?ae.next(S-re):(!R&&ne(S),T)}}}const qI=vl(.42,0,1,1),WI=vl(0,0,.58,1),zw=vl(.42,0,.58,1),HI=n=>Array.isArray(n)&&typeof n[0]!="number",Uy={linear:yn,easeIn:qI,easeInOut:zw,easeOut:WI,circIn:np,circInOut:Tw,circOut:Ew,backIn:tp,backInOut:vw,backOut:_w,anticipate:ww},By=n=>{if(Xd(n)){zf(n.length===4);const[e,t,i,o]=n;return vl(e,t,i,o)}else if(typeof n=="string")return zf(Uy[n]!==void 0),Uy[n];return n};function KI(n,e,t){const i=[],o=t||Uw,l=n.length-1;for(let c=0;c<l;c++){let f=o(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||yn:e;f=wl(p,f)}i.push(f)}return i}function GI(n,e,{clamp:t=!0,ease:i,mixer:o}={}){const l=n.length;if(zf(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=KI(e,i,o),p=f.length,g=_=>{if(c&&_<n[0])return e[0];let w=0;if(p>1)for(;w<n.length-2&&!(_<n[w+1]);w++);const T=Io(n[w],n[w+1],_);return f[w](T)};return t?_=>g(Or(n[0],n[l-1],_)):g}function QI(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const o=Io(0,e,i);n.push(tt(t,1,o))}}function XI(n){const e=[0];return QI(e,n.length-1),e}function YI(n,e){return n.map(t=>t*e)}function JI(n,e){return n.map(()=>e||zw).splice(0,n.length-1)}function cc({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const o=HI(i)?i.map(By):By(i),l={done:!1,value:e[0]},c=YI(t&&t.length===e.length?t:XI(e),n),f=GI(c,e,{ease:Array.isArray(o)?o:JI(e,o)});return{calculatedDuration:n,next:p=>(l.value=f(p),l.done=p>=n,l)}}const ZI=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Qe.update(e,!0),stop:()=>wi(e),now:()=>Mt.isProcessing?Mt.timestamp:hr.now()}},eR={decay:Fy,inertia:Fy,tween:cc,keyframes:cc,spring:jw},tR=n=>n/100;class lp extends bw{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()};const{name:t,motionValue:i,element:o,keyframes:l}=this.options,c=(o==null?void 0:o.KeyframeResolver)||op,f=(p,g)=>this.onKeyframesResolved(p,g);this.resolver=new c(l,f,t,i,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l,velocity:c=0}=this.options,f=Qd(t)?t:eR[t]||cc;let p,g;f!==cc&&typeof e[0]!="number"&&(p=wl(tR,Uw(e[0],e[1])),e=[0,100]);const _=f({...this.options,keyframes:e});l==="mirror"&&(g=f({...this.options,keyframes:[...e].reverse(),velocity:-c})),_.calculatedDuration===null&&(_.calculatedDuration=sw(_));const{calculatedDuration:w}=_,T=w+o,P=T*(i+1)-o;return{generator:_,mirroredGenerator:g,mapPercentToKeyframes:p,calculatedDuration:w,resolvedDuration:T,totalDuration:P}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:o,generator:l,mirroredGenerator:c,mapPercentToKeyframes:f,keyframes:p,calculatedDuration:g,totalDuration:_,resolvedDuration:w}=i;if(this.startTime===null)return l.next(0);const{delay:T,repeat:P,repeatType:O,repeatDelay:N,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-_/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const q=this.currentTime-T*(this.speed>=0?1:-1),H=this.speed>=0?q<0:q>_;this.currentTime=Math.max(q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=_);let G=this.currentTime,ne=l;if(P){const S=Math.min(this.currentTime,_)/w;let R=Math.floor(S),V=S%1;!V&&S>=1&&(V=1),V===1&&R--,R=Math.min(R,P+1),!!(R%2)&&(O==="reverse"?(V=1-V,N&&(V-=N/w)):O==="mirror"&&(ne=c)),G=Or(0,1,V)*w}const re=H?{done:!1,value:p[0]}:ne.next(G);f&&(re.value=f(re.value));let{done:ae}=re;!H&&g!==null&&(ae=this.speed>=0?this.currentTime>=_:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ae);return k&&o!==void 0&&(re.value=Pc(p,this.options,o)),M&&M(re.value),k&&this.finish(),re}get duration(){const{resolved:e}=this;return e?Mr(e.calculatedDuration):0}get time(){return Mr(this.currentTime)}set time(e){e=Nr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Mr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=ZI,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),t&&t();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const nR=new Set(["opacity","clipPath","filter","transform"]);function rR(n,e,t,{delay:i=0,duration:o=300,repeat:l=0,repeatType:c="loop",ease:f="easeInOut",times:p}={}){const g={[e]:t};p&&(g.offset=p);const _=lw(f,o);return Array.isArray(_)&&(g.easing=_),n.animate(g,{delay:i,duration:o,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}const iR=Nd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hc=10,sR=2e4;function oR(n){return Qd(n.type)||n.type==="spring"||!aw(n.ease)}function aR(n,e){const t=new lp({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const o=[];let l=0;for(;!i.done&&l<sR;)i=t.sample(l),o.push(i.value),l+=hc;return{times:void 0,keyframes:o,duration:l-hc,ease:"linear"}}const $w={anticipate:ww,backInOut:vw,circInOut:Tw};function lR(n){return n in $w}class jy extends bw{constructor(e){super(e);const{name:t,motionValue:i,element:o,keyframes:l}=this.options;this.resolver=new Ow(l,(c,f)=>this.onKeyframesResolved(c,f),t,i,o),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:o,ease:l,type:c,motionValue:f,name:p,startTime:g}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof l=="string"&&lc()&&lR(l)&&(l=$w[l]),oR(this.options)){const{onComplete:w,onUpdate:T,motionValue:P,element:O,...N}=this.options,M=aR(e,N);e=M.keyframes,e.length===1&&(e[1]=e[0]),i=M.duration,o=M.times,l=M.ease,c="keyframes"}const _=rR(f.owner.current,p,e,{...this.options,duration:i,times:o,ease:l});return _.startTime=g??this.calcStartTime(),this.pendingTimeline?(Ay(_,this.pendingTimeline),this.pendingTimeline=void 0):_.onfinish=()=>{const{onComplete:w}=this.options;f.set(Pc(e,this.options,t)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:_,duration:i,times:o,type:c,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Mr(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Mr(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Nr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return yn;const{animation:i}=t;Ay(i,e)}return yn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:o,type:l,ease:c,times:f}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:g,onUpdate:_,onComplete:w,element:T,...P}=this.options,O=new lp({...P,keyframes:i,duration:o,type:l,ease:c,times:f,isGenerator:!0}),N=Nr(this.time);g.setWithVelocity(O.sample(N-hc).value,O.sample(N).value,hc)}const{onStop:p}=this.options;p&&p(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:o,repeatType:l,damping:c,type:f}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:g}=t.owner.getProps();return iR()&&i&&nR.has(i)&&!p&&!g&&!o&&l!=="mirror"&&c!==0&&f!=="inertia"}}const uR={type:"spring",stiffness:500,damping:25,restSpeed:10},cR=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),hR={type:"keyframes",duration:.8},fR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dR=(n,{keyframes:e})=>e.length>2?hR:ps.has(n)?n.startsWith("scale")?cR(e[1]):uR:fR;function pR({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:f,from:p,elapsed:g,..._}){return!!Object.keys(_).length}const up=(n,e,t,i={},o,l)=>c=>{const f=Gd(i,n)||{},p=f.delay||i.delay||0;let{elapsed:g=0}=i;g=g-Nr(p);let _={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-g,onUpdate:T=>{e.set(T),f.onUpdate&&f.onUpdate(T)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:l?void 0:o};pR(f)||(_={..._,...dR(n,_)}),_.duration&&(_.duration=Nr(_.duration)),_.repeatDelay&&(_.repeatDelay=Nr(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let w=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(_.duration=0,_.delay===0&&(w=!0)),w&&!l&&e.get()!==void 0){const T=Pc(_.keyframes,f);if(T!==void 0)return Qe.update(()=>{_.onUpdate(T),_.onComplete()}),new MS([])}return!l&&jy.supports(_)?new jy(_):new lp(_)};function mR({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function qw(n,e,{delay:t=0,transitionOverride:i,type:o}={}){var l;let{transition:c=n.getDefaultTransition(),transitionEnd:f,...p}=e;i&&(c=i);const g=[],_=o&&n.animationState&&n.animationState.getState()[o];for(const w in p){const T=n.getValue(w,(l=n.latestValues[w])!==null&&l!==void 0?l:null),P=p[w];if(P===void 0||_&&mR(_,w))continue;const O={delay:t,...Gd(c||{},w)};let N=!1;if(window.MotionHandoffAnimation){const q=pw(n);if(q){const H=window.MotionHandoffAnimation(q,w,Qe);H!==null&&(O.startTime=H,N=!0)}}Hf(n,w),T.start(up(w,T,P,n.shouldReduceMotion&&fw.has(w)?{type:!1}:O,n,N));const M=T.animation;M&&g.push(M)}return f&&Promise.all(g).then(()=>{Qe.update(()=>{f&&GS(n,f)})}),g}function Zf(n,e,t={}){var i;const o=Rc(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:l=n.getDefaultTransition()||{}}=o||{};t.transitionOverride&&(l=t.transitionOverride);const c=o?()=>Promise.all(qw(n,o,t)):()=>Promise.resolve(),f=n.variantChildren&&n.variantChildren.size?(g=0)=>{const{delayChildren:_=0,staggerChildren:w,staggerDirection:T}=l;return gR(n,e,_+g,w,T,t)}:()=>Promise.resolve(),{when:p}=l;if(p){const[g,_]=p==="beforeChildren"?[c,f]:[f,c];return g().then(()=>_())}else return Promise.all([c(),f(t.delay)])}function gR(n,e,t=0,i=0,o=1,l){const c=[],f=(n.variantChildren.size-1)*i,p=o===1?(g=0)=>g*i:(g=0)=>f-g*i;return Array.from(n.variantChildren).sort(yR).forEach((g,_)=>{g.notify("AnimationStart",e),c.push(Zf(g,e,{...l,delay:t+p(_)}).then(()=>g.notify("AnimationComplete",e)))}),Promise.all(c)}function yR(n,e){return n.sortNodePosition(e)}function _R(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>Zf(n,l,t));i=Promise.all(o)}else if(typeof e=="string")i=Zf(n,e,t);else{const o=typeof e=="function"?Rc(n,e,t.custom):e;i=Promise.all(qw(n,o,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const vR=Ld.length;function Ww(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Ww(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<vR;t++){const i=Ld[t],o=n.props[i];(nl(o)||o===!1)&&(e[i]=o)}return e}const wR=[...Md].reverse(),ER=Md.length;function TR(n){return e=>Promise.all(e.map(({animation:t,options:i})=>_R(n,t,i)))}function AR(n){let e=TR(n),t=zy(),i=!0;const o=p=>(g,_)=>{var w;const T=Rc(n,_,p==="exit"?(w=n.presenceContext)===null||w===void 0?void 0:w.custom:void 0);if(T){const{transition:P,transitionEnd:O,...N}=T;g={...g,...N,...O}}return g};function l(p){e=p(n)}function c(p){const{props:g}=n,_=Ww(n.parent)||{},w=[],T=new Set;let P={},O=1/0;for(let M=0;M<ER;M++){const q=wR[M],H=t[q],G=g[q]!==void 0?g[q]:_[q],ne=nl(G),re=q===p?H.isActive:null;re===!1&&(O=M);let ae=G===_[q]&&G!==g[q]&&ne;if(ae&&i&&n.manuallyAnimateOnMount&&(ae=!1),H.protectedKeys={...P},!H.isActive&&re===null||!G&&!H.prevProp||Sc(G)||typeof G=="boolean")continue;const k=SR(H.prevProp,G);let S=k||q===p&&H.isActive&&!ae&&ne||M>O&&ne,R=!1;const V=Array.isArray(G)?G:[G];let L=V.reduce(o(q),{});re===!1&&(L={});const{prevResolvedValues:F={}}=H,C={...F,...L},Xe=Se=>{S=!0,T.has(Se)&&(R=!0,T.delete(Se)),H.needsAnimating[Se]=!0;const ee=n.getValue(Se);ee&&(ee.liveStyle=!1)};for(const Se in C){const ee=L[Se],me=F[Se];if(P.hasOwnProperty(Se))continue;let ie=!1;$f(ee)&&$f(me)?ie=!iw(ee,me):ie=ee!==me,ie?ee!=null?Xe(Se):T.add(Se):ee!==void 0&&T.has(Se)?Xe(Se):H.protectedKeys[Se]=!0}H.prevProp=G,H.prevResolvedValues=L,H.isActive&&(P={...P,...L}),i&&n.blockInitialAnimation&&(S=!1),S&&(!(ae&&k)||R)&&w.push(...V.map(Se=>({animation:Se,options:{type:q}})))}if(T.size){const M={};T.forEach(q=>{const H=n.getBaseTarget(q),G=n.getValue(q);G&&(G.liveStyle=!0),M[q]=H??null}),w.push({animation:M})}let N=!!w.length;return i&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(w):Promise.resolve()}function f(p,g){var _;if(t[p].isActive===g)return Promise.resolve();(_=n.variantChildren)===null||_===void 0||_.forEach(T=>{var P;return(P=T.animationState)===null||P===void 0?void 0:P.setActive(p,g)}),t[p].isActive=g;const w=c(p);for(const T in t)t[T].protectedKeys={};return w}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>t,reset:()=>{t=zy(),i=!0}}}function SR(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!iw(e,n):!1}function rs(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zy(){return{animate:rs(!0),whileInView:rs(),whileHover:rs(),whileTap:rs(),whileDrag:rs(),whileFocus:rs(),exit:rs()}}class Pi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class IR extends Pi{constructor(e){super(e),e.animationState||(e.animationState=AR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Sc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let RR=0;class PR extends Pi{constructor(){super(...arguments),this.id=RR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const CR={animation:{Feature:IR},exit:{Feature:PR}};function al(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function El(n){return{point:{x:n.pageX,y:n.pageY}}}const xR=n=>e=>Yd(e)&&n(e,El(e));function Ga(n,e,t,i){return al(n,e,xR(t),i)}const $y=(n,e)=>Math.abs(n-e);function kR(n,e){const t=$y(n.x,e.x),i=$y(n.y,e.y);return Math.sqrt(t**2+i**2)}class Hw{constructor(e,t,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=If(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,P=kR(w.offset,{x:0,y:0})>=3;if(!T&&!P)return;const{point:O}=w,{timestamp:N}=Mt;this.history.push({...O,timestamp:N});const{onStart:M,onMove:q}=this.handlers;T||(M&&M(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,w)},this.handlePointerMove=(w,T)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Sf(T,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(w,T)=>{this.end();const{onEnd:P,onSessionEnd:O,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=If(w.type==="pointercancel"?this.lastMoveEventInfo:Sf(T,this.transformPagePoint),this.history);this.startEvent&&P&&P(w,M),O&&O(w,M)},!Yd(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=i,this.contextWindow=o||window;const c=El(e),f=Sf(c,this.transformPagePoint),{point:p}=f,{timestamp:g}=Mt;this.history=[{...p,timestamp:g}];const{onSessionStart:_}=t;_&&_(e,If(f,this.history)),this.removeListeners=wl(Ga(this.contextWindow,"pointermove",this.handlePointerMove),Ga(this.contextWindow,"pointerup",this.handlePointerUp),Ga(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wi(this.updatePoint)}}function Sf(n,e){return e?{point:e(n.point)}:n}function qy(n,e){return{x:n.x-e.x,y:n.y-e.y}}function If({point:n},e){return{point:n,delta:qy(n,Kw(e)),offset:qy(n,VR(e)),velocity:DR(e,.1)}}function VR(n){return n[0]}function Kw(n){return n[n.length-1]}function DR(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const o=Kw(n);for(;t>=0&&(i=n[t],!(o.timestamp-i.timestamp>Nr(e)));)t--;if(!i)return{x:0,y:0};const l=Mr(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const Gw=1e-4,NR=1-Gw,MR=1+Gw,Qw=.01,LR=0-Qw,OR=0+Qw;function Jt(n){return n.max-n.min}function bR(n,e,t){return Math.abs(n-e)<=t}function Wy(n,e,t,i=.5){n.origin=i,n.originPoint=tt(e.min,e.max,n.origin),n.scale=Jt(t)/Jt(e),n.translate=tt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=NR&&n.scale<=MR||isNaN(n.scale))&&(n.scale=1),(n.translate>=LR&&n.translate<=OR||isNaN(n.translate))&&(n.translate=0)}function Qa(n,e,t,i){Wy(n.x,e.x,t.x,i?i.originX:void 0),Wy(n.y,e.y,t.y,i?i.originY:void 0)}function Hy(n,e,t){n.min=t.min+e.min,n.max=n.min+Jt(e)}function FR(n,e,t){Hy(n.x,e.x,t.x),Hy(n.y,e.y,t.y)}function Ky(n,e,t){n.min=e.min-t.min,n.max=n.min+Jt(e)}function Xa(n,e,t){Ky(n.x,e.x,t.x),Ky(n.y,e.y,t.y)}function UR(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?tt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?tt(t,n,i.max):Math.min(n,t)),n}function Gy(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function BR(n,{top:e,left:t,bottom:i,right:o}){return{x:Gy(n.x,t,o),y:Gy(n.y,e,i)}}function Qy(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function jR(n,e){return{x:Qy(n.x,e.x),y:Qy(n.y,e.y)}}function zR(n,e){let t=.5;const i=Jt(n),o=Jt(e);return o>i?t=Io(e.min,e.max-i,n.min):i>o&&(t=Io(n.min,n.max-o,e.min)),Or(0,1,t)}function $R(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ed=.35;function qR(n=ed){return n===!1?n=0:n===!0&&(n=ed),{x:Xy(n,"left","right"),y:Xy(n,"top","bottom")}}function Xy(n,e,t){return{min:Yy(n,e),max:Yy(n,t)}}function Yy(n,e){return typeof n=="number"?n:n[e]||0}const Jy=()=>({translate:0,scale:1,origin:0,originPoint:0}),vo=()=>({x:Jy(),y:Jy()}),Zy=()=>({min:0,max:0}),ut=()=>({x:Zy(),y:Zy()});function kn(n){return[n("x"),n("y")]}function Xw({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function WR({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function HR(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Rf(n){return n===void 0||n===1}function td({scale:n,scaleX:e,scaleY:t}){return!Rf(n)||!Rf(e)||!Rf(t)}function is(n){return td(n)||Yw(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Yw(n){return e_(n.x)||e_(n.y)}function e_(n){return n&&n!=="0%"}function fc(n,e,t){const i=n-t,o=e*i;return t+o}function t_(n,e,t,i,o){return o!==void 0&&(n=fc(n,o,i)),fc(n,t,i)+e}function nd(n,e=0,t=1,i,o){n.min=t_(n.min,e,t,i,o),n.max=t_(n.max,e,t,i,o)}function Jw(n,{x:e,y:t}){nd(n.x,e.translate,e.scale,e.originPoint),nd(n.y,t.translate,t.scale,t.originPoint)}const n_=.999999999999,r_=1.0000000000001;function KR(n,e,t,i=!1){const o=t.length;if(!o)return;e.x=e.y=1;let l,c;for(let f=0;f<o;f++){l=t[f],c=l.projectionDelta;const{visualElement:p}=l.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Eo(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Jw(n,c)),i&&is(l.latestValues)&&Eo(n,l.latestValues))}e.x<r_&&e.x>n_&&(e.x=1),e.y<r_&&e.y>n_&&(e.y=1)}function wo(n,e){n.min=n.min+e,n.max=n.max+e}function i_(n,e,t,i,o=.5){const l=tt(n.min,n.max,o);nd(n,e,t,l,i)}function Eo(n,e){i_(n.x,e.x,e.scaleX,e.scale,e.originX),i_(n.y,e.y,e.scaleY,e.scale,e.originY)}function Zw(n,e){return Xw(HR(n.getBoundingClientRect(),e))}function GR(n,e,t){const i=Zw(n,t),{scroll:o}=e;return o&&(wo(i.x,o.offset.x),wo(i.y,o.offset.y)),i}const eE=({current:n})=>n?n.ownerDocument.defaultView:null,QR=new WeakMap;class XR{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ut(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(El(_).point)},l=(_,w)=>{const{drag:T,dragPropagation:P,onDragStart:O}=this.getProps();if(T&&!P&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$S(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(M=>{let q=this.getAxisMotionValue(M).get()||0;if(cr.test(q)){const{projection:H}=this.visualElement;if(H&&H.layout){const G=H.layout.layoutBox[M];G&&(q=Jt(G)*(parseFloat(q)/100))}}this.originPoint[M]=q}),O&&Qe.postRender(()=>O(_,w)),Hf(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},c=(_,w)=>{const{dragPropagation:T,dragDirectionLock:P,onDirectionLock:O,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:M}=w;if(P&&this.currentDirection===null){this.currentDirection=YR(M),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",w.point,M),this.updateAxis("y",w.point,M),this.visualElement.render(),N&&N(_,w)},f=(_,w)=>this.stop(_,w),p=()=>kn(_=>{var w;return this.getAnimationState(_)==="paused"&&((w=this.getAxisMotionValue(_).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new Hw(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:eE(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Qe.postRender(()=>l(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:o}=this.getProps();if(!i||!qu(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=UR(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;t&&yo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=BR(o.layoutBox,t):this.constraints=!1,this.elastic=qR(i),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&kn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=$R(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!yo(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=GR(i,o.root,this.visualElement.getTransformPagePoint());let c=jR(o.layout.layoutBox,l);if(t){const f=t(WR(c));this.hasMutatedConstraints=!!f,f&&(c=Xw(f))}return c}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),p=this.constraints||{},g=kn(_=>{if(!qu(_,t,this.currentDirection))return;let w=p[_]||{};c&&(w={min:0,max:0});const T=o?200:1e6,P=o?40:1e7,O={type:"inertia",velocity:i?e[_]:0,bounceStiffness:T,bounceDamping:P,timeConstant:750,restDelta:1,restSpeed:10,...l,...w};return this.startAxisValueAnimation(_,O)});return Promise.all(g).then(f)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Hf(this.visualElement,e),i.start(up(e,i,0,t,this.visualElement,!1))}stopAnimation(){kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[t];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){kn(t=>{const{drag:i}=this.getProps();if(!qu(t,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:f}=o.layout.layoutBox[t];l.set(e[t]-tt(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!yo(t)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};kn(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const p=f.get();o[c]=zR({min:p,max:p},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),kn(c=>{if(!qu(c,e,null))return;const f=this.getAxisMotionValue(c),{min:p,max:g}=this.constraints[c];f.set(tt(p,g,o[c]))})}addListeners(){if(!this.visualElement.current)return;QR.set(this.visualElement,this);const e=this.visualElement.current,t=Ga(e,"pointerdown",p=>{const{drag:g,dragListener:_=!0}=this.getProps();g&&_&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();yo(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Qe.read(i);const c=al(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g})=>{this.isDragging&&g&&(kn(_=>{const w=this.getAxisMotionValue(_);w&&(this.originPoint[_]+=p[_].translate,w.set(w.get()+p[_].translate))}),this.visualElement.render())});return()=>{c(),t(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=ed,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function qu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function YR(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class JR extends Pi{constructor(e){super(e),this.removeGroupControls=yn,this.removeListeners=yn,this.controls=new XR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yn}unmount(){this.removeGroupControls(),this.removeListeners()}}const s_=n=>(e,t)=>{n&&Qe.postRender(()=>n(e,t))};class ZR extends Pi{constructor(){super(...arguments),this.removePointerDownListener=yn}onPointerDown(e){this.session=new Hw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:s_(e),onStart:s_(t),onMove:i,onEnd:(l,c)=>{delete this.session,o&&Qe.postRender(()=>o(l,c))}}}mount(){this.removePointerDownListener=Ga(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ec={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function o_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fa={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(we.test(n))n=parseFloat(n);else return n;const t=o_(n,e.target.x),i=o_(n,e.target.y);return`${t}% ${i}%`}},eP={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,o=Ei.parse(n);if(o.length>5)return i;const l=Ei.createTransformer(n),c=typeof o[0]!="number"?1:0,f=t.x.scale*e.x,p=t.y.scale*e.y;o[0+c]/=f,o[1+c]/=p;const g=tt(f,p,.5);return typeof o[2+c]=="number"&&(o[2+c]/=g),typeof o[3+c]=="number"&&(o[3+c]/=g),l(o)}};class tP extends fe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;TS(nP),l&&(t.group&&t.group.add(l),i&&i.register&&o&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),ec.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:o,isPresent:l}=this.props,c=i.projection;return c&&(c.isPresent=l,o||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||Qe.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tE(n){const[e,t]=bA(),i=fe.useContext(Uv);return de.jsx(tP,{...n,layoutGroup:i,switchLayoutGroup:fe.useContext(Hv),isPresent:e,safeToRemove:t})}const nP={borderRadius:{...Fa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fa,borderTopRightRadius:Fa,borderBottomLeftRadius:Fa,borderBottomRightRadius:Fa,boxShadow:eP};function rP(n,e,t){const i=Ht(n)?n:sl(n);return i.start(up("",i,e,t)),i.animation}function iP(n){return n instanceof SVGElement&&n.tagName!=="svg"}const sP=(n,e)=>n.depth-e.depth;class oP{constructor(){this.children=[],this.isDirty=!1}add(e){Jd(this.children,e),this.isDirty=!0}remove(e){Zd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sP),this.isDirty=!1,this.children.forEach(e)}}function aP(n,e){const t=hr.now(),i=({timestamp:o})=>{const l=o-t;l>=e&&(wi(i),n(l-e))};return Qe.read(i,!0),()=>wi(i)}const nE=["TopLeft","TopRight","BottomLeft","BottomRight"],lP=nE.length,a_=n=>typeof n=="string"?parseFloat(n):n,l_=n=>typeof n=="number"||we.test(n);function uP(n,e,t,i,o,l){o?(n.opacity=tt(0,t.opacity!==void 0?t.opacity:1,cP(i)),n.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,hP(i))):l&&(n.opacity=tt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let c=0;c<lP;c++){const f=`border${nE[c]}Radius`;let p=u_(e,f),g=u_(t,f);if(p===void 0&&g===void 0)continue;p||(p=0),g||(g=0),p===0||g===0||l_(p)===l_(g)?(n[f]=Math.max(tt(a_(p),a_(g),i),0),(cr.test(g)||cr.test(p))&&(n[f]+="%")):n[f]=g}(e.rotate||t.rotate)&&(n.rotate=tt(e.rotate||0,t.rotate||0,i))}function u_(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const cP=rE(0,.5,Ew),hP=rE(.5,.95,yn);function rE(n,e,t){return i=>i<n?0:i>e?1:t(Io(n,e,i))}function c_(n,e){n.min=e.min,n.max=e.max}function xn(n,e){c_(n.x,e.x),c_(n.y,e.y)}function h_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function f_(n,e,t,i,o){return n-=e,n=fc(n,1/t,i),o!==void 0&&(n=fc(n,1/o,i)),n}function fP(n,e=0,t=1,i=.5,o,l=n,c=n){if(cr.test(e)&&(e=parseFloat(e),e=tt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=tt(l.min,l.max,i);n===l&&(f-=e),n.min=f_(n.min,e,t,f,o),n.max=f_(n.max,e,t,f,o)}function d_(n,e,[t,i,o],l,c){fP(n,e[t],e[i],e[o],e.scale,l,c)}const dP=["x","scaleX","originX"],pP=["y","scaleY","originY"];function p_(n,e,t,i){d_(n.x,e,dP,t?t.x:void 0,i?i.x:void 0),d_(n.y,e,pP,t?t.y:void 0,i?i.y:void 0)}function m_(n){return n.translate===0&&n.scale===1}function iE(n){return m_(n.x)&&m_(n.y)}function g_(n,e){return n.min===e.min&&n.max===e.max}function mP(n,e){return g_(n.x,e.x)&&g_(n.y,e.y)}function y_(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function sE(n,e){return y_(n.x,e.x)&&y_(n.y,e.y)}function __(n){return Jt(n.x)/Jt(n.y)}function v_(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class gP{constructor(){this.members=[]}add(e){Jd(this.members,e),e.scheduleRender()}remove(e){if(Zd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let i;for(let o=t;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yP(n,e,t){let i="";const o=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((o||l||c)&&(i=`translate3d(${o}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:g,rotate:_,rotateX:w,rotateY:T,skewX:P,skewY:O}=t;g&&(i=`perspective(${g}px) ${i}`),_&&(i+=`rotate(${_}deg) `),w&&(i+=`rotateX(${w}deg) `),T&&(i+=`rotateY(${T}deg) `),P&&(i+=`skewX(${P}deg) `),O&&(i+=`skewY(${O}deg) `)}const f=n.x.scale*e.x,p=n.y.scale*e.y;return(f!==1||p!==1)&&(i+=`scale(${f}, ${p})`),i||"none"}const ss={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},za=typeof window<"u"&&window.MotionDebug!==void 0,Pf=["","X","Y","Z"],_P={visibility:"hidden"},w_=1e3;let vP=0;function Cf(n,e,t,i){const{latestValues:o}=e;o[n]&&(t[n]=o[n],e.setStaticValue(n,0),i&&(i[n]=0))}function oE(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=pw(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:o,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Qe,!(o||l))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&oE(i)}function aE({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},f=e==null?void 0:e()){this.id=vP++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,za&&(ss.totalNodes=ss.resolvedTargetDeltas=ss.recalculatedProjection=0),this.nodes.forEach(TP),this.nodes.forEach(PP),this.nodes.forEach(CP),this.nodes.forEach(AP),za&&window.MotionDebug.record(ss)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new oP)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new ep),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const p=this.eventHandlers.get(c);p&&p.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=iP(c),this.instance=c;const{layoutId:p,layout:g,visualElement:_}=this.options;if(_&&!_.current&&_.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(g||p)&&(this.isLayoutDirty=!0),n){let w;const T=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=aP(T,250),ec.hasAnimatedSinceResize&&(ec.hasAnimatedSinceResize=!1,this.nodes.forEach(T_))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&_&&(p||g)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:T,hasRelativeLayoutChanged:P,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||_.getDefaultTransition()||NP,{onLayoutAnimationStart:M,onLayoutAnimationComplete:q}=_.getProps(),H=!this.targetLayout||!sE(this.targetLayout,O),G=!T&&P;if(this.options.layoutRoot||this.resumeFrom||G||T&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,G);const ne={...Gd(N,"layout"),onPlay:M,onComplete:q};(_.shouldReduceMotion||this.options.layoutRoot)&&(ne.delay=0,ne.type=!1),this.startAnimation(ne)}else T||T_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xP),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const w=this.path[_];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:f,layout:p}=this.options;if(f===void 0&&!p)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(E_);return}this.isUpdating||this.nodes.forEach(IP),this.isUpdating=!1,this.nodes.forEach(RP),this.nodes.forEach(wP),this.nodes.forEach(EP),this.clearAllSnapshots();const f=hr.now();Mt.delta=Or(0,1e3/60,f-Mt.timestamp),Mt.timestamp=f,Mt.isProcessing=!0,vf.update.process(Mt),vf.preRender.process(Mt),vf.render.process(Mt),Mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SP),this.sharedNodes.forEach(kP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jt(this.snapshot.measuredBox.x)&&!Jt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:p,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!iE(this.projectionDelta),p=this.getTransformTemplate(),g=p?p(this.latestValues,""):void 0,_=g!==this.prevTransformTemplateValue;c&&(f||is(this.latestValues)||_)&&(o(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let p=this.removeElementScroll(f);return c&&(p=this.removeTransform(p)),MP(p),{animationId:this.root.animationId,measuredBox:f,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:f}=this.options;if(!f)return ut();const p=f.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(LP))){const{scroll:_}=this.root;_&&(wo(p.x,_.offset.x),wo(p.y,_.offset.y))}return p}removeElementScroll(c){var f;const p=ut();if(xn(p,c),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return p;for(let g=0;g<this.path.length;g++){const _=this.path[g],{scroll:w,options:T}=_;_!==this.root&&w&&T.layoutScroll&&(w.wasRoot&&xn(p,c),wo(p.x,w.offset.x),wo(p.y,w.offset.y))}return p}applyTransform(c,f=!1){const p=ut();xn(p,c);for(let g=0;g<this.path.length;g++){const _=this.path[g];!f&&_.options.layoutScroll&&_.scroll&&_!==_.root&&Eo(p,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),is(_.latestValues)&&Eo(p,_.latestValues)}return is(this.latestValues)&&Eo(p,this.latestValues),p}removeTransform(c){const f=ut();xn(f,c);for(let p=0;p<this.path.length;p++){const g=this.path[p];if(!g.instance||!is(g.latestValues))continue;td(g.latestValues)&&g.updateSnapshot();const _=ut(),w=g.measurePageBox();xn(_,w),p_(f,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,_)}return is(this.latestValues)&&p_(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var f;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==p;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:T}=this.options;if(!(!this.layout||!(w||T))){if(this.resolvedRelativeTargetAt=Mt.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),Xa(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ut(),this.targetWithTransforms=ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xn(this.target,this.layout.layoutBox),Jw(this.target,this.targetDelta)):xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),Xa(this.relativeTargetOrigin,this.target,P.target),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}za&&ss.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||td(this.parent.latestValues)||Yw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const f=this.getLead(),p=!!this.resumingFrom||this!==f;let g=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(g=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Mt.timestamp&&(g=!1),g)return;const{layout:_,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||w))return;xn(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,P=this.treeScale.y;KR(this.layoutCorrected,this.treeScale,this.path,p),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=ut());const{target:O}=f;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(h_(this.prevProjectionDelta.x,this.projectionDelta.x),h_(this.prevProjectionDelta.y,this.projectionDelta.y)),Qa(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==P||!v_(this.projectionDelta.x,this.prevProjectionDelta.x)||!v_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O)),za&&ss.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),c){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vo(),this.projectionDelta=vo(),this.projectionDeltaWithTransform=vo()}setAnimationOrigin(c,f=!1){const p=this.snapshot,g=p?p.latestValues:{},_={...this.latestValues},w=vo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const T=ut(),P=p?p.source:void 0,O=this.layout?this.layout.source:void 0,N=P!==O,M=this.getStack(),q=!M||M.members.length<=1,H=!!(N&&!q&&this.options.crossfade===!0&&!this.path.some(DP));this.animationProgress=0;let G;this.mixTargetDelta=ne=>{const re=ne/1e3;A_(w.x,c.x,re),A_(w.y,c.y,re),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xa(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VP(this.relativeTarget,this.relativeTargetOrigin,T,re),G&&mP(this.relativeTarget,G)&&(this.isProjectionDirty=!1),G||(G=ut()),xn(G,this.relativeTarget)),N&&(this.animationValues=_,uP(_,g,this.latestValues,re,H,q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=re},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{ec.hasAnimatedSinceResize=!0,this.currentAnimation=rP(0,w_,{...c,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(w_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:p,layout:g,latestValues:_}=c;if(!(!f||!p||!g)){if(this!==c&&this.layout&&g&&lE(this.options.animationType,this.layout.layoutBox,g.layoutBox)){p=this.target||ut();const w=Jt(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+w;const T=Jt(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+T}xn(f,p),Eo(f,_),Qa(this.projectionDeltaWithTransform,this.layoutCorrected,f,_)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new gP),this.sharedNodes.get(c).add(f);const g=f.options.initialPromotionConfig;f.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:f}=this.options;return f?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:f}=this.options;return f?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:p}={}){const g=this.getStack();g&&g.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:p}=c;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(f=!0),!f)return;const g={};p.z&&Cf("z",c,g,this.animationValues);for(let _=0;_<Pf.length;_++)Cf(`rotate${Pf[_]}`,c,g,this.animationValues),Cf(`skew${Pf[_]}`,c,g,this.animationValues);c.render();for(const _ in g)c.setStaticValue(_,g[_]),this.animationValues&&(this.animationValues[_]=g[_]);c.scheduleRender()}getProjectionStyles(c){var f,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _P;const g={visibility:""},_=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=Ju(c==null?void 0:c.pointerEvents)||"",g.transform=_?_(this.latestValues,""):"none",g;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Ju(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!is(this.latestValues)&&(N.transform=_?_({},""):"none",this.hasProjected=!1),N}const T=w.animationValues||w.latestValues;this.applyTransformsToTarget(),g.transform=yP(this.projectionDeltaWithTransform,this.treeScale,T),_&&(g.transform=_(T,g.transform));const{x:P,y:O}=this.projectionDelta;g.transformOrigin=`${P.origin*100}% ${O.origin*100}% 0`,w.animationValues?g.opacity=w===this?(p=(f=T.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:g.opacity=w===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in il){if(T[N]===void 0)continue;const{correct:M,applyTo:q,isCSSVariable:H}=il[N],G=g.transform==="none"?T[N]:M(T[N],w);if(q){const ne=q.length;for(let re=0;re<ne;re++)g[q[re]]=G}else H?this.options.visualElement.renderState.vars[N]=G:g[N]=G}return this.options.layoutId&&(g.pointerEvents=w===this?Ju(c==null?void 0:c.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(E_),this.root.sharedNodes.clear()}}}function wP(n){n.updateLayout()}function EP(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=n.layout,{animationType:l}=n.options,c=t.source!==n.layout.source;l==="size"?kn(w=>{const T=c?t.measuredBox[w]:t.layoutBox[w],P=Jt(T);T.min=i[w].min,T.max=T.min+P}):lE(l,t.layoutBox,i)&&kn(w=>{const T=c?t.measuredBox[w]:t.layoutBox[w],P=Jt(i[w]);T.max=T.min+P,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+P)});const f=vo();Qa(f,i,t.layoutBox);const p=vo();c?Qa(p,n.applyTransform(o,!0),t.measuredBox):Qa(p,i,t.layoutBox);const g=!iE(f);let _=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:T,layout:P}=w;if(T&&P){const O=ut();Xa(O,t.layoutBox,T.layoutBox);const N=ut();Xa(N,i,P.layoutBox),sE(O,N)||(_=!0),w.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=O,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:p,layoutDelta:f,hasLayoutChanged:g,hasRelativeLayoutChanged:_})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function TP(n){za&&ss.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function AP(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function SP(n){n.clearSnapshot()}function E_(n){n.clearMeasurements()}function IP(n){n.isLayoutDirty=!1}function RP(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function T_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function PP(n){n.resolveTargetDelta()}function CP(n){n.calcProjection()}function xP(n){n.resetSkewAndRotation()}function kP(n){n.removeLeadSnapshot()}function A_(n,e,t){n.translate=tt(e.translate,0,t),n.scale=tt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function S_(n,e,t,i){n.min=tt(e.min,t.min,i),n.max=tt(e.max,t.max,i)}function VP(n,e,t,i){S_(n.x,e.x,t.x,i),S_(n.y,e.y,t.y,i)}function DP(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const NP={duration:.45,ease:[.4,0,.1,1]},I_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),R_=I_("applewebkit/")&&!I_("chrome/")?Math.round:yn;function P_(n){n.min=R_(n.min),n.max=R_(n.max)}function MP(n){P_(n.x),P_(n.y)}function lE(n,e,t){return n==="position"||n==="preserve-aspect"&&!bR(__(e),__(t),.2)}function LP(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const OP=aE({attachResizeListener:(n,e)=>al(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xf={current:void 0},uE=aE({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!xf.current){const n=new OP({});n.mount(window),n.setOptions({layoutScroll:!0}),xf.current=n}return xf.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),bP={pan:{Feature:ZR},drag:{Feature:JR,ProjectionNode:uE,MeasureLayout:tE}};function C_(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const o="onHover"+t,l=i[o];l&&Qe.postRender(()=>l(e,El(e)))}class FP extends Pi{mount(){const{current:e}=this.node;e&&(this.unmount=FS(e,(t,i)=>(C_(this.node,i,"Start"),o=>C_(this.node,o,"End"))))}unmount(){}}class UP extends Pi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wl(al(this.node.current,"focus",()=>this.onFocus()),al(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function x_(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const o="onTap"+(t==="End"?"":t),l=i[o];l&&Qe.postRender(()=>l(e,El(e)))}class BP extends Pi{mount(){const{current:e}=this.node;e&&(this.unmount=zS(e,(t,i)=>(x_(this.node,i,"Start"),(o,{success:l})=>x_(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rd=new WeakMap,kf=new WeakMap,jP=n=>{const e=rd.get(n.target);e&&e(n)},zP=n=>{n.forEach(jP)};function $P({root:n,...e}){const t=n||document;kf.has(t)||kf.set(t,{});const i=kf.get(t),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(zP,{root:n,...e})),i[o]}function qP(n,e,t){const i=$P(e);return rd.set(n,t),i.observe(n),()=>{rd.delete(n),i.unobserve(n)}}const WP={some:0,all:1};class HP extends Pi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:o="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:WP[o]},f=p=>{const{isIntersecting:g}=p;if(this.isInView===g||(this.isInView=g,l&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:_,onViewportLeave:w}=this.node.getProps(),T=g?_:w;T&&T(p)};return qP(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(KP(e,t))&&this.startObserver()}unmount(){}}function KP({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const GP={inView:{Feature:HP},tap:{Feature:BP},focus:{Feature:UP},hover:{Feature:FP}},QP={layout:{ProjectionNode:uE,MeasureLayout:tE}},id={current:null},cE={current:!1};function XP(){if(cE.current=!0,!!Dd)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>id.current=n.matches;n.addListener(e),e()}else id.current=!1}const YP=[...Lw,$t,Ei],JP=n=>YP.find(Mw(n)),k_=new WeakMap;function ZP(n,e,t){for(const i in e){const o=e[i],l=t[i];if(Ht(o))n.addValue(i,o);else if(Ht(l))n.addValue(i,sl(o,{owner:n}));else if(l!==o)if(n.hasValue(i)){const c=n.getValue(i);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=n.getStaticValue(i);n.addValue(i,sl(c!==void 0?c:o,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const V_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class e1{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=op,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const P=hr.now();this.renderScheduledAt<P&&(this.renderScheduledAt=P,Qe.render(this.render,!1,!0))};const{latestValues:p,renderState:g,onUpdate:_}=c;this.onUpdate=_,this.latestValues=p,this.baseTarget={...p},this.initialValues=t.initial?{...p}:{},this.renderState=g,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=Ic(t),this.isVariantNode=qv(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...T}=this.scrapeMotionValuesFromProps(t,{},this);for(const P in T){const O=T[P];p[P]!==void 0&&Ht(O)&&O.set(p[P],!1)}}mount(e){this.current=e,k_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),cE.current||XP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:id.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){k_.delete(this.current),this.projection&&this.projection.unmount(),wi(this.notifyUpdate),wi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ps.has(e),o=t.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&Qe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=t.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),l(),c&&c(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ro){const t=Ro[e];if(!t)continue;const{isEnabled:i,Feature:o}=t;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<V_.length;i++){const o=V_[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,c=e[l];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=ZP(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=sl(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(Dw(o)||Aw(o))?o=parseFloat(o):!JP(o)&&Ei.test(t)&&(o=xw(e,t)),this.setBaseTarget(e,Ht(o)?o.get():o)),Ht(o)?o.get():o}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let o;if(typeof i=="string"||typeof i=="object"){const c=Ud(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);c&&(o=c[e])}if(i&&o!==void 0)return o;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Ht(l)?l:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ep),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class hE extends e1{constructor(){super(...arguments),this.KeyframeResolver=Ow}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ht(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function t1(n){return window.getComputedStyle(n)}class n1 extends hE{constructor(){super(...arguments),this.type="html",this.renderInstance=Jv}readValueFromInstance(e,t){if(ps.has(t)){const i=sp(t);return i&&i.default||0}else{const i=t1(e),o=(Bd(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Zw(e,t)}build(e,t,i){$d(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Kd(e,t,i)}}class r1 extends hE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ut}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ps.has(t)){const i=sp(t);return i&&i.default||0}return t=Zv.has(t)?t:Od(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return nw(e,t,i)}build(e,t,i){qd(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,o){ew(e,t,i,o)}mount(e){this.isSVGTag=Hd(e.tagName),super.mount(e)}}const i1=(n,e)=>Fd(n)?new r1(e):new n1(e,{allowProjection:n!==fe.Fragment}),s1=VS({...CR,...GP,...bP,...QP},i1),o1=HA(s1);function a1({type:n="text",...e}){return de.jsx("input",{type:n,className:"p-2 rounded bg-purple-700 text-white",...e})}function fE({username:n,setUsername:e,country:t,setCountry:i}){return de.jsxs("div",{className:"mb-4",children:[de.jsx(a1,{placeholder:"Select a temporary username (optional)",value:n,onChange:o=>e(o.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white"}),de.jsxs("select",{value:t,onChange:o=>i(o.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white",children:[de.jsx("option",{value:"",children:"Select a country"}),de.jsx("option",{value:"",children:"United States"}),de.jsx("option",{value:"",children:"United Kingdom"}),de.jsx("option",{value:"",children:"Germany"}),de.jsx("option",{value:"",children:"France"}),de.jsx("option",{value:"",children:"Japan"}),de.jsx("option",{value:"",children:"India"})]})]})}var D_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},l1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},pE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,_=l>>2,w=(l&3)<<4|f>>4;let T=(f&15)<<2|g>>6,P=g&63;p||(P=64,c||(T=64)),i.push(t[_],t[w],t[T],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):l1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||g==null||w==null)throw new u1;const T=l<<2|f>>4;if(i.push(T),g!==64){const P=f<<4&240|g>>2;if(i.push(P),w!==64){const O=g<<6&192|w;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class u1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c1=function(n){const e=dE(n);return pE.encodeByteArray(e,!0)},dc=function(n){return c1(n).replace(/\./g,"")},h1=function(n){try{return pE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=()=>f1().__FIREBASE_DEFAULTS__,p1=()=>{if(typeof process>"u"||typeof D_>"u")return;const n=D_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},m1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&h1(n[1]);return e&&JSON.parse(e)},cp=()=>{try{return d1()||p1()||m1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},g1=n=>{var e,t;return(t=(e=cp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mE=n=>{const e=g1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},gE=()=>{var n;return(n=cp())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[dc(JSON.stringify(t)),dc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v1(){var n;const e=(n=cp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w1(){return!v1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E1(){try{return typeof indexedDB=="object"}catch{return!1}}function T1(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="FirebaseError";class ms extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=A1,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_E.prototype.create)}}class _E{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?S1(l,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ms(o,f,i)}}function S1(n,e){return n.replace(I1,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const I1=/\{\$([^}]+)}/g;function sd(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(N_(l)&&N_(c)){if(!sd(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function N_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n){return n&&n._delegate?n._delegate:n}class Co{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new y1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C1(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:P1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P1(n){return n===os?void 0:n}function C1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const k1={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},V1=Le.INFO,D1={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},N1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=D1[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vE{constructor(e){this.name=e,this._logLevel=V1,this._logHandler=N1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const M1=(n,e)=>e.some(t=>n instanceof t);let M_,L_;function L1(){return M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O1(){return L_||(L_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wE=new WeakMap,od=new WeakMap,EE=new WeakMap,Vf=new WeakMap,hp=new WeakMap;function b1(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(pi(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&wE.set(t,n)}).catch(()=>{}),hp.set(e,n),e}function F1(n){if(od.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});od.set(n,e)}let ad={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return od.get(n);if(e==="objectStoreNames")return n.objectStoreNames||EE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function U1(n){ad=n(ad)}function B1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Df(this),e,...t);return EE.set(i,e.sort?e.sort():[e]),pi(i)}:O1().includes(n)?function(...e){return n.apply(Df(this),e),pi(wE.get(this))}:function(...e){return pi(n.apply(Df(this),e))}}function j1(n){return typeof n=="function"?B1(n):(n instanceof IDBTransaction&&F1(n),M1(n,L1())?new Proxy(n,ad):n)}function pi(n){if(n instanceof IDBRequest)return b1(n);if(Vf.has(n))return Vf.get(n);const e=j1(n);return e!==n&&(Vf.set(n,e),hp.set(e,n)),e}const Df=n=>hp.get(n);function z1(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=pi(c);return i&&c.addEventListener("upgradeneeded",p=>{i(pi(c.result),p.oldVersion,p.newVersion,pi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const $1=["get","getKey","getAll","getAllKeys","count"],q1=["put","add","delete","clear"],Nf=new Map;function O_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=q1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||$1.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),o&&p.done]))[0]};return Nf.set(e,l),l}U1(n=>({...n,get:(e,t,i)=>O_(e,t)||n.get(e,t,i),has:(e,t)=>!!O_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(H1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function H1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ld="@firebase/app",b_="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new vE("@firebase/app"),K1="@firebase/app-compat",G1="@firebase/analytics-compat",Q1="@firebase/analytics",X1="@firebase/app-check-compat",Y1="@firebase/app-check",J1="@firebase/auth",Z1="@firebase/auth-compat",eC="@firebase/database",tC="@firebase/data-connect",nC="@firebase/database-compat",rC="@firebase/functions",iC="@firebase/functions-compat",sC="@firebase/installations",oC="@firebase/installations-compat",aC="@firebase/messaging",lC="@firebase/messaging-compat",uC="@firebase/performance",cC="@firebase/performance-compat",hC="@firebase/remote-config",fC="@firebase/remote-config-compat",dC="@firebase/storage",pC="@firebase/storage-compat",mC="@firebase/firestore",gC="@firebase/vertexai",yC="@firebase/firestore-compat",_C="firebase",vC="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",wC={[ld]:"fire-core",[K1]:"fire-core-compat",[Q1]:"fire-analytics",[G1]:"fire-analytics-compat",[Y1]:"fire-app-check",[X1]:"fire-app-check-compat",[J1]:"fire-auth",[Z1]:"fire-auth-compat",[eC]:"fire-rtdb",[tC]:"fire-data-connect",[nC]:"fire-rtdb-compat",[rC]:"fire-fn",[iC]:"fire-fn-compat",[sC]:"fire-iid",[oC]:"fire-iid-compat",[aC]:"fire-fcm",[lC]:"fire-fcm-compat",[uC]:"fire-perf",[cC]:"fire-perf-compat",[hC]:"fire-rc",[fC]:"fire-rc-compat",[dC]:"fire-gcs",[pC]:"fire-gcs-compat",[mC]:"fire-fst",[yC]:"fire-fst-compat",[gC]:"fire-vertex","fire-js":"fire-js",[_C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Map,EC=new Map,cd=new Map;function F_(n,e){try{n.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ll(n){const e=n.name;if(cd.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,n);for(const t of pc.values())F_(t,n);for(const t of EC.values())F_(t,n);return!0}function TE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new _E("app","Firebase",TC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=vC;function SE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ud,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw mi.create("bad-app-name",{appName:String(o)});if(t||(t=gE()),!t)throw mi.create("no-options");const l=pc.get(o);if(l){if(sd(t,l.options)&&sd(i,l.config))return l;throw mi.create("duplicate-app",{appName:o})}const c=new x1(o);for(const p of cd.values())c.addComponent(p);const f=new AC(t,i,c);return pc.set(o,f),f}function IE(n=ud){const e=pc.get(n);if(!e&&n===ud&&gE())return SE();if(!e)throw mi.create("no-app",{appName:n});return e}function gi(n,e,t){var i;let o=(i=wC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(f.join(" "));return}ll(new Co(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebase-heartbeat-database",IC=1,ul="firebase-heartbeat-store";let Mf=null;function RE(){return Mf||(Mf=z1(SC,IC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(n=>{throw mi.create("idb-open",{originalErrorMessage:n.message})})),Mf}async function RC(n){try{const t=(await RE()).transaction(ul),i=await t.objectStore(ul).get(PE(n));return await t.done,i}catch(e){if(e instanceof ms)br.warn(e.message);else{const t=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(t.message)}}}async function U_(n,e){try{const i=(await RE()).transaction(ul,"readwrite");await i.objectStore(ul).put(e,PE(n)),await i.done}catch(t){if(t instanceof ms)br.warn(t.message);else{const i=mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});br.warn(i.message)}}}function PE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1024,CC=30*24*60*60*1e3;class xC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=B_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=CC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=B_(),{heartbeatsToSend:i,unsentEntries:o}=kC(this._heartbeatsCache.heartbeats),l=dc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return br.warn(t),""}}}function B_(){return new Date().toISOString().substring(0,10)}function kC(n,e=PC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),j_(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),j_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class VC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E1()?T1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return U_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return U_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function j_(n){return dc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n){ll(new Co("platform-logger",e=>new W1(e),"PRIVATE")),ll(new Co("heartbeat",e=>new xC(e),"PRIVATE")),gi(ld,b_,n),gi(ld,b_,"esm2017"),gi("fire-js","")}DC("");var NC="firebase",MC="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(NC,MC,"app");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,CE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function R(){}R.prototype=S.prototype,k.D=S.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(V,L,F){for(var C=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)C[Xe-2]=arguments[Xe];return S.prototype[L].apply(V,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,R){R||(R=0);var V=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)V[L]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(L=0;16>L;++L)V[L]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=k.g[0],R=k.g[1],L=k.g[2];var F=k.g[3],C=S+(F^R&(L^F))+V[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+V[1]+3905402710&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+V[2]+606105819&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+V[3]+3250441966&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(F^R&(L^F))+V[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+V[5]+1200080426&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+V[6]+2821735955&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+V[7]+4249261313&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(F^R&(L^F))+V[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+V[9]+2336552879&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+V[10]+4294925233&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+V[11]+2304563134&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(F^R&(L^F))+V[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=F+(L^S&(R^L))+V[13]+4254626195&4294967295,F=S+(C<<12&4294967295|C>>>20),C=L+(R^F&(S^R))+V[14]+2792965006&4294967295,L=F+(C<<17&4294967295|C>>>15),C=R+(S^L&(F^S))+V[15]+1236535329&4294967295,R=L+(C<<22&4294967295|C>>>10),C=S+(L^F&(R^L))+V[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+V[6]+3225465664&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+V[11]+643717713&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+V[0]+3921069994&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(L^F&(R^L))+V[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+V[10]+38016083&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+V[15]+3634488961&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+V[4]+3889429448&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(L^F&(R^L))+V[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+V[14]+3275163606&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+V[3]+4107603335&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+V[8]+1163531501&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(L^F&(R^L))+V[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=F+(R^L&(S^R))+V[2]+4243563512&4294967295,F=S+(C<<9&4294967295|C>>>23),C=L+(S^R&(F^S))+V[7]+1735328473&4294967295,L=F+(C<<14&4294967295|C>>>18),C=R+(F^S&(L^F))+V[12]+2368359562&4294967295,R=L+(C<<20&4294967295|C>>>12),C=S+(R^L^F)+V[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+V[8]+2272392833&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+V[11]+1839030562&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+V[14]+4259657740&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(R^L^F)+V[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+V[4]+1272893353&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+V[7]+4139469664&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+V[10]+3200236656&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(R^L^F)+V[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+V[0]+3936430074&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+V[3]+3572445317&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+V[6]+76029189&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(R^L^F)+V[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=F+(S^R^L)+V[12]+3873151461&4294967295,F=S+(C<<11&4294967295|C>>>21),C=L+(F^S^R)+V[15]+530742520&4294967295,L=F+(C<<16&4294967295|C>>>16),C=R+(L^F^S)+V[2]+3299628645&4294967295,R=L+(C<<23&4294967295|C>>>9),C=S+(L^(R|~F))+V[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+V[7]+1126891415&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+V[14]+2878612391&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+V[5]+4237533241&4294967295,R=L+(C<<21&4294967295|C>>>11),C=S+(L^(R|~F))+V[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+V[3]+2399980690&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+V[10]+4293915773&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+V[1]+2240044497&4294967295,R=L+(C<<21&4294967295|C>>>11),C=S+(L^(R|~F))+V[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+V[15]+4264355552&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+V[6]+2734768916&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+V[13]+1309151649&4294967295,R=L+(C<<21&4294967295|C>>>11),C=S+(L^(R|~F))+V[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=F+(R^(S|~L))+V[11]+3174756917&4294967295,F=S+(C<<10&4294967295|C>>>22),C=L+(S^(F|~R))+V[2]+718787259&4294967295,L=F+(C<<15&4294967295|C>>>17),C=R+(F^(L|~S))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+F&4294967295}i.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var R=S-this.blockSize,V=this.B,L=this.h,F=0;F<S;){if(L==0)for(;F<=R;)o(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<S;)if(V[L++]=k.charCodeAt(F++),L==this.blockSize){o(this,V),L=0;break}}else for(;F<S;)if(V[L++]=k[F++],L==this.blockSize){o(this,V),L=0;break}}this.h=L,this.o+=S},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var R=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=R&255,R/=256;for(this.u(k),k=Array(16),S=R=0;4>S;++S)for(var V=0;32>V;V+=8)k[R++]=this.g[S]>>>V&255;return k};function l(k,S){var R=f;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=S(k)}function c(k,S){this.h=S;for(var R=[],V=!0,L=k.length-1;0<=L;L--){var F=k[L]|0;V&&F==S||(R[L]=F,V=!1)}this.g=R}var f={};function p(k){return-128<=k&&128>k?l(k,function(S){return new c([S|0],0>S?-1:0)}):new c([k|0],0>k?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return M(g(-k));for(var S=[],R=1,V=0;k>=R;V++)S[V]=k/R|0,R*=4294967296;return new c(S,0)}function _(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return M(_(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(S,8)),V=w,L=0;L<k.length;L+=8){var F=Math.min(8,k.length-L),C=parseInt(k.substring(L,L+F),S);8>F?(F=g(Math.pow(S,F)),V=V.j(F).add(g(C))):(V=V.j(R),V=V.add(g(C)))}return V}var w=p(0),T=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(N(this))return-M(this).m();for(var k=0,S=1,R=0;R<this.g.length;R++){var V=this.i(R);k+=(0<=V?V:4294967296+V)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(N(this))return"-"+M(this).toString(k);for(var S=g(Math.pow(k,6)),R=this,V="";;){var L=ne(R,S).g;R=q(R,L.j(S));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=L,O(R))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function N(k){return k.h==-1}n.l=function(k){return k=q(this,k),N(k)?-1:O(k)?0:1};function M(k){for(var S=k.g.length,R=[],V=0;V<S;V++)R[V]=~k.g[V];return new c(R,~k.h).add(T)}n.abs=function(){return N(this)?M(this):this},n.add=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],V=0,L=0;L<=S;L++){var F=V+(this.i(L)&65535)+(k.i(L)&65535),C=(F>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);V=C>>>16,F&=65535,C&=65535,R[L]=C<<16|F}return new c(R,R[R.length-1]&-2147483648?-1:0)};function q(k,S){return k.add(M(S))}n.j=function(k){if(O(this)||O(k))return w;if(N(this))return N(k)?M(this).j(M(k)):M(M(this).j(k));if(N(k))return M(this.j(M(k)));if(0>this.l(P)&&0>k.l(P))return g(this.m()*k.m());for(var S=this.g.length+k.g.length,R=[],V=0;V<2*S;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<k.g.length;L++){var F=this.i(V)>>>16,C=this.i(V)&65535,Xe=k.i(L)>>>16,Ct=k.i(L)&65535;R[2*V+2*L]+=C*Ct,H(R,2*V+2*L),R[2*V+2*L+1]+=F*Ct,H(R,2*V+2*L+1),R[2*V+2*L+1]+=C*Xe,H(R,2*V+2*L+1),R[2*V+2*L+2]+=F*Xe,H(R,2*V+2*L+2)}for(V=0;V<S;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=S;V<2*S;V++)R[V]=0;return new c(R,0)};function H(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function G(k,S){this.g=k,this.h=S}function ne(k,S){if(O(S))throw Error("division by zero");if(O(k))return new G(w,w);if(N(k))return S=ne(M(k),S),new G(M(S.g),M(S.h));if(N(S))return S=ne(k,M(S)),new G(M(S.g),S.h);if(30<k.g.length){if(N(k)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var R=T,V=S;0>=V.l(k);)R=re(R),V=re(V);var L=ae(R,1),F=ae(V,1);for(V=ae(V,2),R=ae(R,2);!O(V);){var C=F.add(V);0>=C.l(k)&&(L=L.add(R),F=C),V=ae(V,1),R=ae(R,1)}return S=q(k,L.j(S)),new G(L,S)}for(L=w;0<=k.l(S);){for(R=Math.max(1,Math.floor(k.m()/S.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=g(R),C=F.j(S);N(C)||0<C.l(k);)R-=V,F=g(R),C=F.j(S);O(F)&&(F=T),L=L.add(F),k=q(k,C)}return new G(L,k)}n.A=function(k){return ne(this,k).h},n.and=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)&k.i(V);return new c(R,this.h&k.h)},n.or=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)|k.i(V);return new c(R,this.h|k.h)},n.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)^k.i(V);return new c(R,this.h^k.h)};function re(k){for(var S=k.g.length+1,R=[],V=0;V<S;V++)R[V]=k.i(V)<<1|k.i(V-1)>>>31;return new c(R,k.h)}function ae(k,S){var R=S>>5;S%=32;for(var V=k.g.length-R,L=[],F=0;F<V;F++)L[F]=0<S?k.i(F+R)>>>S|k.i(F+R+1)<<32-S:k.i(F+R);return new c(L,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CE=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,yi=c}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,$a,kE,tc,hd,VE,DE,NE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in v))break e;v=v[U]}u=u[u.length-1],A=v[u],m=m(A),m!=A&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,A=!1,U={next:function(){if(!A&&v<u.length){var $=v++;return{value:m($,u[$]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function P(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function O(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(A,U,$){for(var te=Array(arguments.length-2),je=2;je<arguments.length;je++)te[je-2]=arguments[je];return m.prototype[U].apply(A,te)}}function N(u){const m=u.length;if(0<m){const v=Array(m);for(let A=0;A<m;A++)v[A]=u[A];return v}return[]}function M(u,m){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(p(A)){const U=u.length||0,$=A.length||0;u.length=U+$;for(let te=0;te<$;te++)u[U+te]=A[te]}else u.push(A)}}class q{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){return/^[\s\xa0]*$/.test(u)}function G(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ne(u){return ne[" "](u),u}ne[" "]=function(){};var re=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ae(u,m,v){for(const A in u)m.call(v,u[A],A,u)}function k(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function S(u){const m={};for(const v in u)m[v]=u[v];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)u[v]=A[v];for(let $=0;$<R.length;$++)v=R[$],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function F(u){f.setTimeout(()=>{throw u},0)}function C(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Xe{constructor(){this.h=this.g=null}add(m,v){const A=Ct.get();A.set(m,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Ct=new q(()=>new xt,u=>u.reset());class xt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,ee=!1,me=new Xe,ie=()=>{const u=f.Promise.resolve(void 0);Se=()=>{u.then(b)}};var b=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){F(v)}var m=Ct;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ee=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u}();function Pe(u,m){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(re){e:{try{ne(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}O(Pe,ge);var De={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function $e(u,m,v,A,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!A,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function Tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function mr(u){this.src=u,this.g={},this.h=0}mr.prototype.add=function(u,m,v,A,U){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var te=Br(u,m,A,U);return-1<te?(m=u[te],v||(m.fa=!1)):(m=new $e(m,this.src,$,!!A,U),m.fa=v,u.push(m)),m};function ws(u,m){var v=m.type;if(v in u.g){var A=u.g[v],U=Array.prototype.indexOf.call(A,m,void 0),$;($=0<=U)&&Array.prototype.splice.call(A,U,1),$&&(Tt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Br(u,m,v,A){for(var U=0;U<u.length;++U){var $=u[U];if(!$.da&&$.listener==m&&$.capture==!!v&&$.ha==A)return U}return-1}var xi="closure_lm_"+(1e6*Math.random()|0),Es={};function $o(u,m,v,A,U){if(Array.isArray(m)){for(var $=0;$<m.length;$++)$o(u,m[$],v,A,U);return null}return v=Ho(v),u&&u[Fe]?u.K(m,v,g(A)?!!A.capture:!1,U):qo(u,m,v,!1,A,U)}function qo(u,m,v,A,U,$){if(!m)throw Error("Invalid event type");var te=g(U)?!!U.capture:!!U,je=As(u);if(je||(u[xi]=je=new mr(u)),v=je.add(m,v,A,te,$),v.proxy)return v;if(A=Rl(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)Re||(U=te),U===void 0&&(U=!1),u.addEventListener(m.toString(),A,U);else if(u.attachEvent)u.attachEvent(yr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Rl(){function u(v){return m.call(u.src,u.listener,v)}const m=Wo;return u}function Ts(u,m,v,A,U){if(Array.isArray(m))for(var $=0;$<m.length;$++)Ts(u,m[$],v,A,U);else A=g(A)?!!A.capture:!!A,v=Ho(v),u&&u[Fe]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],v=Br($,v,A,U),-1<v&&(Tt($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=As(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Br(m,v,A,U)),(v=-1<u?m[u]:null)&&gr(v))}function gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fe])ws(m.i,u);else{var v=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(v,A,u.capture):m.detachEvent?m.detachEvent(yr(v),A):m.addListener&&m.removeListener&&m.removeListener(A),(v=As(m))?(ws(v,u),v.h==0&&(v.src=null,m[xi]=null)):Tt(u)}}}function yr(u){return u in Es?Es[u]:Es[u]="on"+u}function Wo(u,m){if(u.da)u=!0;else{m=new Pe(m,this);var v=u.listener,A=u.ha||u.src;u.fa&&gr(u),u=v.call(A,m)}return u}function As(u){return u=u[xi],u instanceof mr?u:null}var Ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(u){return typeof u=="function"?u:(u[Ss]||(u[Ss]=function(m){return u.handleEvent(m)}),u[Ss])}function mt(){K.call(this),this.i=new mr(this),this.M=this,this.F=null}O(mt,K),mt.prototype[Fe]=!0,mt.prototype.removeEventListener=function(u,m,v,A){Ts(this,u,m,v,A)};function gt(u,m){var v,A=u.F;if(A)for(v=[];A;A=A.F)v.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new ge(m,u);else if(m instanceof ge)m.target=m.target||u;else{var U=m;m=new ge(A,u),V(m,U)}if(U=!0,v)for(var $=v.length-1;0<=$;$--){var te=m.g=v[$];U=_r(te,A,!0,m)&&U}if(te=m.g=u,U=_r(te,A,!0,m)&&U,U=_r(te,A,!1,m)&&U,v)for($=0;$<v.length;$++)te=m.g=v[$],U=_r(te,A,!1,m)&&U}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],A=0;A<v.length;A++)Tt(v[A]);delete u.g[m],u.h--}}this.F=null},mt.prototype.K=function(u,m,v,A){return this.i.add(String(u),m,!1,v,A)},mt.prototype.L=function(u,m,v,A){return this.i.add(String(u),m,!0,v,A)};function _r(u,m,v,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,$=0;$<m.length;++$){var te=m[$];if(te&&!te.da&&te.capture==v){var je=te.listener,yt=te.ha||te.src;te.fa&&ws(u.i,te),U=je.call(yt,A)!==!1&&U}}return U&&!A.defaultPrevented}function Ko(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function jr(u){u.g=Ko(()=>{u.g=null,u.i&&(u.i=!1,jr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ki extends K{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(u){K.call(this),this.h=u,this.g={}}O(Vi,K);var Go=[];function Qo(u){ae(u.g,function(m,v){this.g.hasOwnProperty(v)&&gr(m)},u),u.g={}}Vi.prototype.N=function(){Vi.aa.N.call(this),Qo(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xo=f.JSON.stringify,Yo=f.JSON.parse,Jo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Di(){}Di.prototype.h=null;function Is(u){return u.h||(u.h=u.i())}function Rs(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yn(){ge.call(this,"d")}O(Yn,ge);function Ps(){ge.call(this,"c")}O(Ps,ge);var Jn={},Zo=null;function Ni(){return Zo=Zo||new mt}Jn.La="serverreachability";function ea(u){ge.call(this,Jn.La,u)}O(ea,ge);function vr(u){const m=Ni();gt(m,new ea(m))}Jn.STAT_EVENT="statevent";function ta(u,m){ge.call(this,Jn.STAT_EVENT,u),this.stat=m}O(ta,ge);function at(u){const m=Ni();gt(m,new ta(m,u))}Jn.Ma="timingevent";function Cs(u,m){ge.call(this,Jn.Ma,u),this.size=m}O(Cs,ge);function Dn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function Li(u,m,v,A,U,$){u.info(function(){if(u.g)if($)for(var te="",je=$.split("&"),yt=0;yt<je.length;yt++){var Ne=je[yt].split("=");if(1<Ne.length){var At=Ne[0];Ne=Ne[1];var ht=At.split("_");te=2<=ht.length&&ht[1]=="type"?te+(At+"="+Ne+"&"):te+(At+"=redacted&")}}else te=null;else te=$;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+v+`
`+te})}function xs(u,m,v,A,U,$,te){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+v+`
`+$+" "+te})}function Nn(u,m,v,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+jc(u,v)+(A?" "+A:"")})}function na(u,m){u.info(function(){return"TIMEOUT: "+m})}Mi.prototype.info=function(){};function jc(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var A=v[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var $=U[0];if($!="noop"&&$!="stop"&&$!="close")for(var te=1;te<U.length;te++)U[te]=""}}}}return Xo(v)}catch{return m}}var ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mn;function Oi(){}O(Oi,Di),Oi.prototype.g=function(){return new XMLHttpRequest},Oi.prototype.i=function(){return{}},Mn=new Oi;function Ln(u,m,v,A){this.j=u,this.i=m,this.l=v,this.R=A||1,this.U=new Vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var ra={},Vs={};function Ds(u,m,v){u.L=1,u.v=Hr(cn(m)),u.m=v,u.P=!0,ia(u,null)}function ia(u,m){u.F=Date.now(),qe(u),u.A=cn(u.v);var v=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Gr(v.i,"t",A),u.C=0,v=u.j.J,u.h=new Cl,u.g=Hl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new ki(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Go[0]=U.toString()),U=Go);for(var $=0;$<U.length;$++){var te=$o(v,U[$],A||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),vr(),Li(u.i,u.u,u.A,u.l,u.R,u.m)}Ln.prototype.ca=function(u){u=u.target;const m=this.M;m&&en(u)==3?m.j():this.Y(u)},Ln.prototype.Y=function(u){try{if(u==this.g)e:{const ht=en(this.g);var m=this.g.Ba();const Tn=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||ht!=4||m==7||(m==8||0>=Tn?vr(3):vr(2)),bi(this);var v=this.g.Z();this.X=v;t:if(xl(this)){var A=ca(this.g);u="";var U=A.length,$=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),zr(this);var te="";break t}this.h.i=new f.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!($&&m==U-1)});A.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=v==200,xs(this.i,this.u,this.A,this.l,this.R,ht,v),this.o){if(this.T&&!this.K){t:{if(this.g){var je,yt=this.g;if((je=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(je)){var Ne=je;break t}}Ne=null}if(v=Ne)Nn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sa(this,v);else{this.o=!1,this.s=3,at(12),wn(this),zr(this);break e}}if(this.P){v=!0;let fn;for(;!this.J&&this.C<te.length;)if(fn=zc(this,te),fn==Vs){ht==4&&(this.s=4,at(14),v=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==ra){this.s=4,at(15),Nn(this.i,this.l,te,"[Invalid Chunk]"),v=!1;break}else Nn(this.i,this.l,fn,null),sa(this,fn);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||te.length!=0||this.h.h||(this.s=1,at(16),v=!1),this.o=this.o&&v,!v)Nn(this.i,this.l,te,"[Invalid Chunked Response]"),wn(this),zr(this);else if(0<te.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),fa(At),At.M=!0,at(11))}}else Nn(this.i,this.l,te,null),sa(this,te);ht==4&&wn(this),this.o&&!this.J&&(ht==4?$s(this.j,this):(this.o=!1,qe(this)))}else Fs(this.g),v==400&&0<te.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),wn(this),zr(this)}}}catch{}finally{}};function xl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function zc(u,m){var v=u.C,A=m.indexOf(`
`,v);return A==-1?Vs:(v=Number(m.substring(v,A)),isNaN(v)?ra:(A+=1,A+v>m.length?Vs:(m=m.slice(A,A+v),u.C=A+v,m)))}Ln.prototype.cancel=function(){this.J=!0,wn(this)};function qe(u){u.S=Date.now()+u.I,kl(u,u.I)}function kl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Dn(T(u.ba,u),m)}function bi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Ln.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(na(this.i,this.A),this.L!=2&&(vr(),at(17)),wn(this),this.s=2,zr(this)):kl(this,this.S-u)};function zr(u){u.j.G==0||u.J||$s(u.j,u)}function wn(u){bi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Qo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function sa(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Kt(v.h,u))){if(!u.K&&Kt(v.h,u)&&v.G==3){try{var A=v.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)zs(v),Bn(v);else break e;js(v),at(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Dn(T(v.Za,v),6e3));if(1>=Dl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Sr(v,11)}else if((u.K||v.g==u)&&zs(v),!H(m))for(U=v.Da.g.parse(m),m=0;m<U.length;m++){let Ne=U[m];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const At=Ne[3];At!=null&&(v.la=At,v.j.info("VER="+v.la));const ht=Ne[4];ht!=null&&(v.Aa=ht,v.j.info("SVER="+v.Aa));const Tn=Ne[5];Tn!=null&&typeof Tn=="number"&&0<Tn&&(A=1.5*Tn,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const fn=u.g;if(fn){const qi=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var $=A.h;$.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(oa($,$.h),$.h=null))}if(A.D){const Ws=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ws&&(A.ya=Ws,ze(A.I,A.D,Ws))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var te=u;if(A.qa=Wl(A,A.J?A.ia:null,A.W),te.K){Nl(A.h,te);var je=te,yt=A.L;yt&&(je.I=yt),je.B&&(bi(je),qe(je)),A.g=te}else $i(A);0<v.i.length&&nr(v)}else Ne[0]!="stop"&&Ne[0]!="close"||Sr(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Sr(v,7):Vt(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}vr(4)}catch{}}var Vl=class{constructor(u,m){this.g=u,this.map=m}};function Fi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function Kt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function oa(u,m){u.g?u.g.add(m):u.h=m}function Nl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Fi.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ml(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return N(u.i)}function Ns(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,A=0;A<v;A++)m.push(u[A]);return m}m=[],v=0;for(A in u)m[v++]=u[A];return m}function Ms(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const A in u)m[v++]=A;return m}}}function $r(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Ms(u),A=Ns(u),U=A.length,$=0;$<U;$++)m.call(void 0,A[$],v&&v[$],u)}var Ui=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $c(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var A=u[v].indexOf("="),U=null;if(0<=A){var $=u[v].substring(0,A);U=u[v].substring(A+1)}else $=u[v];m($,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wr){this.h=u.h,Bi(this,u.j),this.o=u.o,this.g=u.g,qr(this,u.s),this.l=u.l;var m=u.i,v=new Zn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Wr(this,v),this.m=u.m}else u&&(m=String(u).match(Ui))?(this.h=!1,Bi(this,m[1]||"",!0),this.o=ke(m[2]||""),this.g=ke(m[3]||"",!0),qr(this,m[4]),this.l=ke(m[5]||"",!0),Wr(this,m[6]||"",!0),this.m=ke(m[7]||"")):(this.h=!1,this.i=new Zn(null,this.h))}wr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Kr(m,Ls,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Kr(m,Ls,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Kr(v,v.charAt(0)=="/"?bl:Ol,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Kr(v,aa)),u.join("")};function cn(u){return new wr(u)}function Bi(u,m,v){u.j=v?ke(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Wr(u,m,v){m instanceof Zn?(u.i=m,er(u.i,u.h)):(v||(m=Kr(m,Fl)),u.i=new Zn(m,u.h))}function ze(u,m,v){u.i.set(m,v)}function Hr(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ke(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Kr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Ll),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ls=/[#\/\?@]/g,Ol=/[#\?:]/g,bl=/[#\?]/g,Fl=/[#\?@]/g,aa=/#/g;function Zn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function kt(u){u.g||(u.g=new Map,u.h=0,u.i&&$c(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Zn.prototype,n.add=function(u,m){kt(this),this.i=null,u=En(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function On(u,m){kt(u),m=En(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function bn(u,m){return kt(u),m=En(u,m),u.g.has(m)}n.forEach=function(u,m){kt(this),this.g.forEach(function(v,A){v.forEach(function(U){u.call(m,U,A,this)},this)},this)},n.na=function(){kt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let A=0;A<m.length;A++){const U=u[A];for(let $=0;$<U.length;$++)v.push(m[A])}return v},n.V=function(u){kt(this);let m=[];if(typeof u=="string")bn(this,u)&&(m=m.concat(this.g.get(En(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return kt(this),this.i=null,u=En(this,u),bn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Gr(u,m,v){On(u,m),0<v.length&&(u.i=null,u.g.set(En(u,m),N(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var A=m[v];const $=encodeURIComponent(String(A)),te=this.V(A);for(A=0;A<te.length;A++){var U=$;te[A]!==""&&(U+="="+encodeURIComponent(String(te[A]))),u.push(U)}}return this.i=u.join("&")};function En(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function er(u,m){m&&!u.j&&(kt(u),u.i=null,u.g.forEach(function(v,A){var U=A.toLowerCase();A!=U&&(On(this,A),Gr(this,U,v))},u)),u.j=m}function qc(u,m){const v=new Mi;if(f.Image){const A=new Image;A.onload=P(Zt,v,"TestLoadImage: loaded",!0,m,A),A.onerror=P(Zt,v,"TestLoadImage: error",!1,m,A),A.onabort=P(Zt,v,"TestLoadImage: abort",!1,m,A),A.ontimeout=P(Zt,v,"TestLoadImage: timeout",!1,m,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Ul(u,m){const v=new Mi,A=new AbortController,U=setTimeout(()=>{A.abort(),Zt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then($=>{clearTimeout(U),$.ok?Zt(v,"TestPingServer: ok",!0,m):Zt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Zt(v,"TestPingServer: error",!1,m)})}function Zt(u,m,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Wc(){this.g=new Jo}function Bl(u,m,v){const A=v||"";try{$r(u,function(U,$){let te=U;g(U)&&(te=Xo(U)),m.push(A+$+"="+encodeURIComponent(te))})}catch(U){throw m.push(A+"type="+encodeURIComponent("_badmap")),U}}function Er(u){this.l=u.Ub||null,this.j=u.eb||!1}O(Er,Di),Er.prototype.g=function(){return new ji(this.l,this.j)},Er.prototype.i=function(u){return function(){return u}}({});function ji(u,m){mt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ji,mt),n=ji.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Un(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Fn(this):Un(this),this.readyState==3&&jl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Fn(this))},n.Qa=function(u){this.g&&(this.response=u,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Un(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Un(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tr(u){let m="";return ae(u,function(v,A){m+=A,m+=":",m+=v,m+=`\r
`}),m}function Qr(u,m,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Tr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):ze(u,m,v))}function Ye(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ye,mt);var Hc=/^https?$/i,la=["POST","PUT"];n=Ye.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mn.g(),this.v=this.o?Is(this.o):Is(Mn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){zi(this,$);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())v.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),U=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(la,m,void 0))||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of v)this.g.setRequestHeader($,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bs(this),this.u=!0,this.g.send(u),this.u=!1}catch($){zi(this,$)}};function zi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Os(u),hn(u)}function Os(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),hn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ua(this):this.bb())},n.bb=function(){ua(this)};function ua(u){if(u.h&&typeof c<"u"&&(!u.v[1]||en(u)!=4||u.Z()!=2)){if(u.u&&en(u)==4)Ko(u.Ea,0,u);else if(gt(u,"readystatechange"),en(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var A;if(A=te===0){var U=String(u.D).match(Ui)[1]||null;!U&&f.self&&f.self.location&&(U=f.self.location.protocol.slice(0,-1)),A=!Hc.test(U?U.toLowerCase():"")}v=A}if(v)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var $=2<en(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Os(u)}}finally{hn(u)}}}}function hn(u,m){if(u.g){bs(u);const v=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||gt(u,"ready");try{v.onreadystatechange=A}catch{}}}function bs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function en(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Yo(m)}};function ca(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fs(u){const m={};u=(u.g&&2<=en(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(H(u[A]))continue;var v=L(u[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=m[U]||[];m[U]=$,$.push(v)}k(m,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ha(u){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,u),this.cb=tr("retryDelaySeedMs",1e4,u),this.Wa=tr("forwardChannelMaxRetries",2,u),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(u&&u.concurrentRequestLimit),this.Da=new Wc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ha.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,A){at(0),this.W=u,this.H=m||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=Wl(this,null,this.W),nr(this)};function Vt(u){if(Us(u),u.G==3){var m=u.U++,v=cn(u.I);if(ze(v,"SID",u.K),ze(v,"RID",m),ze(v,"TYPE","terminate"),Ar(u,v),m=new Ln(u,u.j,m),m.L=2,m.v=Hr(cn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.v,v=!0),v||(m.g=Hl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),qe(m)}ql(u)}function Bn(u){u.g&&(fa(u),u.g.cancel(),u.g=null)}function Us(u){Bn(u),u.u&&(f.clearTimeout(u.u),u.u=null),zs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function nr(u){if(!un(u.h)&&!u.s){u.s=!0;var m=u.Ga;Se||ie(),ee||(Se(),ee=!0),me.add(m,u),u.B=0}}function Kc(u,m){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Dn(T(u.Ga,u,m),$l(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Ln(this,this.j,u);let $=this.o;if(this.S&&($?($=S($),V($,this.S)):$=this.S),this.m!==null||this.O||(U.H=$,$=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Xr(this,U,m),v=cn(this.I),ze(v,"RID",u),ze(v,"CVER",22),this.D&&ze(v,"X-HTTP-Session-Id",this.D),Ar(this,v),$&&(this.O?m="headers="+encodeURIComponent(String(Tr($)))+"&"+m:this.m&&Qr(v,this.m,$)),oa(this.h,U),this.Ua&&ze(v,"TYPE","init"),this.P?(ze(v,"$req",m),ze(v,"SID","null"),U.T=!0,Ds(U,v,null)):Ds(U,v,m),this.G=2}}else this.G==3&&(u?Bs(this,u):this.i.length==0||un(this.h)||Bs(this))};function Bs(u,m){var v;m?v=m.l:v=u.U++;const A=cn(u.I);ze(A,"SID",u.K),ze(A,"RID",v),ze(A,"AID",u.T),Ar(u,A),u.m&&u.o&&Qr(A,u.m,u.o),v=new Ln(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Xr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),oa(u.h,v),Ds(v,A,m)}function Ar(u,m){u.H&&ae(u.H,function(v,A){ze(m,A,v)}),u.l&&$r({},function(v,A){ze(m,A,v)})}function Xr(u,m,v){v=Math.min(u.i.length,v);var A=u.l?T(u.l.Na,u.l,u):null;e:{var U=u.i;let $=-1;for(;;){const te=["count="+v];$==-1?0<v?($=U[0].g,te.push("ofs="+$)):$=0:te.push("ofs="+$);let je=!0;for(let yt=0;yt<v;yt++){let Ne=U[yt].g;const At=U[yt].map;if(Ne-=$,0>Ne)$=Math.max(0,U[yt].g-100),je=!1;else try{Bl(At,te,"req"+Ne+"_")}catch{A&&A(At)}}if(je){A=te.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,A}function $i(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Se||ie(),ee||(Se(),ee=!0),me.add(m,u),u.v=0}}function js(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Dn(T(u.Fa,u),$l(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,zl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Dn(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Bn(this),zl(this))};function fa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function zl(u){u.g=new Ln(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=cn(u.qa);ze(m,"RID","rpc"),ze(m,"SID",u.K),ze(m,"AID",u.T),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(m,"TO",u.ja),ze(m,"TYPE","xmlhttp"),Ar(u,m),u.m&&u.o&&Qr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Hr(cn(m)),v.m=null,v.P=!0,ia(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Bn(this),js(this),at(19))};function zs(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function $s(u,m){var v=null;if(u.g==m){zs(u),fa(u),u.g=null;var A=2}else if(Kt(u.h,m))v=m.D,Nl(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;A=Ni(),gt(A,new Cs(A,v)),nr(u)}else $i(u);else if(U=m.s,U==3||U==0&&0<m.X||!(A==1&&Kc(u,m)||A==2&&js(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),U){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function $l(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Sr(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),A=u.Xa;const U=!A;A=new wr(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Bi(A,"https"),Hr(A),U?qc(A.toString(),v):Ul(A.toString(),v)}else at(2);u.G=0,u.l&&u.l.sa(m),ql(u),Us(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=Ml(u.h);(m.length!=0||u.i.length!=0)&&(M(u.ka,m),M(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function Wl(u,m,v){var A=v instanceof wr?cn(v):new wr(v);if(A.g!="")m&&(A.g=m+"."+A.g),qr(A,A.s);else{var U=f.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var $=new wr(null);A&&Bi($,A),m&&($.g=m),U&&qr($,U),v&&($.l=v),A=$}return v=u.D,m=u.ya,v&&m&&ze(A,v,m),ze(A,"VER",u.la),Ar(u,A),A}function Hl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new Er({eb:v})):new Ye(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function da(){}n=da.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qs(){}qs.prototype.g=function(u,m){return new Gt(u,m)};function Gt(u,m){mt.call(this),this.g=new ha(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!H(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!H(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new rr(this)}O(Gt,mt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Vt(this.g)},Gt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Xo(u),u=v);m.i.push(new Vl(m.Ya++,u)),m.G==3&&nr(m)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Gt.aa.N.call(this)};function Kl(u){Yn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}O(Kl,Yn);function Gl(){Ps.call(this),this.status=1}O(Gl,Ps);function rr(u){this.g=u}O(rr,da),rr.prototype.ua=function(){gt(this.g,"a")},rr.prototype.ta=function(u){gt(this.g,new Kl(u))},rr.prototype.sa=function(u){gt(this.g,new Gl)},rr.prototype.ra=function(){gt(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,NE=function(){return new qs},DE=function(){return Ni()},VE=Jn,hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,tc=ks,Pl.COMPLETE="complete",kE=Pl,Rs.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,$a=Rs,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,xE=Ye}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const $_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new vE("@firebase/firestore");function fo(){return fs.logLevel}function oe(n,...e){if(fs.logLevel<=Le.DEBUG){const t=e.map(fp);fs.debug(`Firestore (${Fo}): ${n}`,...t)}}function Fr(n,...e){if(fs.logLevel<=Le.ERROR){const t=e.map(fp);fs.error(`Firestore (${Fo}): ${n}`,...t)}}function xo(n,...e){if(fs.logLevel<=Le.WARN){const t=e.map(fp);fs.warn(`Firestore (${Fo}): ${n}`,...t)}}function fp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function Be(n,e){n||Te()}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qt.UNAUTHENTICATED))}shutdown(){}}class OC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bC{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string"),new ME(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new qt(e)}}class FC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class UC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new FC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Be(this.o===void 0);const i=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string"),this.R=t.token,new BC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=zC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Ve(n,e){return n<e?-1:n>e?1:0}function ko(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new wt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new wt(0,0))}static max(){return new Ae(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=lr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=lr.isNumericId(e),o=lr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?lr.extractNumericId(e).compare(lr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class Ge extends lr{construct(e,t,i){return new Ge(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Ge(t)}static emptyPath(){return new Ge([])}}const $C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends lr{construct(e,t,i){return new Ot(e,t,i)}static isValidIdentifier(e){return $C.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ue(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(l(),o++)}if(l(),c)throw new ue(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ge.fromString(e))}static fromName(e){return new ye(Ge.fromString(e).popFirst(5))}static empty(){return new ye(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ge(e.slice()))}}function qC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new wt(t+1,0):new wt(t,i));return new Ti(o,ye.empty(),e)}function WC(n){return new Ti(n.readTime,n.key,-1)}class Ti{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ti(Ae.min(),ye.empty(),-1)}static max(){return new Ti(Ae.max(),ye.empty(),-1)}}function HC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==KC)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,i)=>{t(e)})}static reject(e){return new W((t,i)=>{i(e)})}static waitFor(e){return new W((t,i)=>{let o=0,l=0,c=!1;e.forEach(f=>{++o,f.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=W.resolve(!1);for(const i of e)t=t.next(o=>o?W.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new W((i,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(_=>{c[g]=_,++f,f===l&&i(c)},_=>o(_))}})}static doWhile(e,t){return new W((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function QC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Cc.oe=-1;function xc(n){return n==null}function mc(n){return n===0&&1/n==-1/0}function XC(n){return typeof n=="number"&&Number.isInteger(n)&&!mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=q_(e)),e=JC(n.get(t),e);return q_(e)}function JC(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function q_(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Lt.RED,this.left=o??Lt.EMPTY,this.right=l??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Lt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new H_(this.data.getIterator())}getIteratorFrom(e){return new H_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class H_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Et(Ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bE("Invalid base64 string: "+l):l}}(e);return new bt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const ZC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(n){if(Be(!!n),typeof n=="string"){let e=0;const t=ZC.exec(n);if(Be(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Si(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function kc(n){const e=n.mapValue.fields.__previous_value__;return dp(e)?kc(e):e}function cl(n){const e=Ai(n.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,i,o,l,c,f,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g}}class hl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ii(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dp(n)?4:nx(n)?9007199254740991:tx(n)?10:11:Te()}function pr(n,e){if(n===e)return!0;const t=Ii(n);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cl(n).isEqual(cl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ai(o.timestampValue),f=Ai(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return Si(o.bytesValue).isEqual(Si(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ct(o.doubleValue),f=ct(l.doubleValue);return c===f?mc(c)===mc(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return ko(n.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(W_(c)!==W_(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!pr(c[p],f[p])))return!1;return!0}(n,e);default:return Te()}}function fl(n,e){return(n.values||[]).find(t=>pr(t,e))!==void 0}function Vo(n,e){if(n===e)return 0;const t=Ii(n),i=Ii(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(l,c){const f=ct(l.integerValue||l.doubleValue),p=ct(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return K_(n.timestampValue,e.timestampValue);case 4:return K_(cl(n),cl(e));case 5:return Ve(n.stringValue,e.stringValue);case 6:return function(l,c){const f=Si(l),p=Si(c);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),p=c.split("/");for(let g=0;g<f.length&&g<p.length;g++){const _=Ve(f[g],p[g]);if(_!==0)return _}return Ve(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Ve(ct(l.latitude),ct(c.latitude));return f!==0?f:Ve(ct(l.longitude),ct(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return G_(n.arrayValue,e.arrayValue);case 10:return function(l,c){var f,p,g,_;const w=l.fields||{},T=c.fields||{},P=(f=w.value)===null||f===void 0?void 0:f.arrayValue,O=(p=T.value)===null||p===void 0?void 0:p.arrayValue,N=Ve(((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return N!==0?N:G_(P,O)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Ku.mapValue&&c===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(c===Ku.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const T=Ve(p[w],_[w]);if(T!==0)return T;const P=Vo(f[p[w]],g[_[w]]);if(P!==0)return P}return Ve(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Te()}}function K_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Ai(n),i=Ai(e),o=Ve(t.seconds,i.seconds);return o!==0?o:Ve(t.nanos,i.nanos)}function G_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Vo(t[o],i[o]);if(l)return l}return Ve(t.length,i.length)}function Do(n){return fd(n)}function fd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ai(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Si(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=fd(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${fd(t.fields[c])}`;return o+"}"}(n.mapValue):Te()}function nc(n){switch(Ii(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kc(n);return e?16+nc(e):16;case 5:return 2*n.stringValue.length;case 6:return Si(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+nc(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return gs(i.fields,(l,c)=>{o+=l.length+nc(c)}),o}(n.mapValue);default:throw Te()}}function Q_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dd(n){return!!n&&"integerValue"in n}function pp(n){return!!n&&"arrayValue"in n}function X_(n){return!!n&&"nullValue"in n}function Y_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rc(n){return!!n&&"mapValue"in n}function tx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ya(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gs(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ya(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ya(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(t)}setAll(e){let t=Ot.emptyPath(),i={},o=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=Ya(c):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){gs(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new Vn(Ya(this.value))}}function FE(n){const e=[];return gs(n.fields,(t,i)=>{const o=new Ot([t]);if(rc(i)){const l=FE(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,i,o,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Wt(e,0,Ae.min(),Ae.min(),Ae.min(),Vn.empty(),0)}static newFoundDocument(e,t,i,o){return new Wt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Wt(e,2,t,Ae.min(),Ae.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Ae.min(),Ae.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.position=e,this.inclusive=t}}function J_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(c.referenceValue),t.key):i=Vo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Z_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t="asc"){this.field=e,this.dir=t}}function rx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{}class pt extends UE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sx(e,t,i):t==="array-contains"?new lx(e,i):t==="in"?new ux(e,i):t==="not-in"?new cx(e,i):t==="array-contains-any"?new hx(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ox(e,i):new ax(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Vo(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends UE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Xn(e,t)}matches(e){return BE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BE(n){return n.op==="and"}function jE(n){return ix(n)&&BE(n)}function ix(n){for(const e of n.filters)if(e instanceof Xn)return!1;return!0}function pd(n){if(n instanceof pt)return n.field.canonicalString()+n.op.toString()+Do(n.value);if(jE(n))return n.filters.map(e=>pd(e)).join(",");{const e=n.filters.map(t=>pd(t)).join(",");return`${n.op}(${e})`}}function zE(n,e){return n instanceof pt?function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&pr(i.value,o.value)}(n,e):n instanceof Xn?function(i,o){return o instanceof Xn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,f)=>l&&zE(c,o.filters[f]),!0):!1}(n,e):void Te()}function $E(n){return n instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`}(n):n instanceof Xn?function(t){return t.op.toString()+" {"+t.getFilters().map($E).join(" ,")+"}"}(n):"Filter"}class sx extends pt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class ox extends pt{constructor(e,t){super(e,"in",t),this.keys=qE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ax extends pt{constructor(e,t){super(e,"not-in",t),this.keys=qE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class lx extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pp(t)&&fl(t.arrayValue,this.value)}}class ux extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}}class cx extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!fl(this.value.arrayValue,t)}}class hx extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>fl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t=null,i=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.ue=null}}function ev(n,e=null,t=[],i=[],o=null,l=null,c=null){return new fx(n,e,t,i,o,l,c)}function mp(n){const e=Ie(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>pd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),xc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Do(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Do(i)).join(",")),e.ue=t}return e.ue}function gp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Z_(n.startAt,e.startAt)&&Z_(n.endAt,e.endAt)}function md(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t=null,i=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dx(n,e,t,i,o,l,c,f){return new jo(n,e,t,i,o,l,c,f)}function yp(n){return new jo(n)}function tv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WE(n){return n.collectionGroup!==null}function Ja(n){const e=Ie(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Et(Ot.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new dl(l,i))}),t.has(Ot.keyField().canonicalString())||e.ce.push(new dl(Ot.keyField(),i))}return e.ce}function fr(n){const e=Ie(n);return e.le||(e.le=px(e,Ja(n))),e.le}function px(n,e){if(n.limitType==="F")return ev(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new dl(o.field,l)});const t=n.endAt?new gc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new gc(n.startAt.position,n.startAt.inclusive):null;return ev(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gd(n,e){const t=n.filters.concat([e]);return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yd(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vc(n,e){return gp(fr(n),fr(e))&&n.limitType===e.limitType}function HE(n){return`${mp(fr(n))}|lt:${n.limitType}`}function po(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>$E(o)).join(", ")}]`),xc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Do(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Do(o)).join(",")),`Target(${i})`}(fr(n))}; limitType=${n.limitType})`}function Dc(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of Ja(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,f,p){const g=J_(c,f,p);return c.inclusive?g<=0:g<0}(i.startAt,Ja(i),o)||i.endAt&&!function(c,f,p){const g=J_(c,f,p);return c.inclusive?g>=0:g>0}(i.endAt,Ja(i),o))}(n,e)}function mx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KE(n){return(e,t)=>{let i=!1;for(const o of Ja(n)){const l=gx(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function gx(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):function(l,c,f){const p=c.data.field(l),g=f.data.field(l);return p!==null&&g!==null?Vo(p,g):Te()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return OE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new nt(ye.comparator);function Ur(){return yx}const GE=new nt(ye.comparator);function qa(...n){let e=GE;for(const t of n)e=e.insert(t.key,t);return e}function QE(n){let e=GE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ls(){return Za()}function XE(){return Za()}function Za(){return new ys(n=>n.toString(),(n,e)=>n.isEqual(e))}const _x=new nt(ye.comparator),vx=new Et(ye.comparator);function xe(...n){let e=vx;for(const t of n)e=e.add(t);return e}const wx=new Et(Ve);function Ex(){return wx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function YE(n){return{integerValue:""+n}}function Tx(n,e){return XC(e)?YE(e):_p(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function Ax(n,e,t){return n instanceof pl?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&dp(l)&&(l=kc(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):n instanceof ml?ZE(n,e):n instanceof gl?eT(n,e):function(o,l){const c=JE(o,l),f=nv(c)+nv(o.Pe);return dd(c)&&dd(o.Pe)?YE(f):_p(o.serializer,f)}(n,e)}function Sx(n,e,t){return n instanceof ml?ZE(n,e):n instanceof gl?eT(n,e):t}function JE(n,e){return n instanceof yc?function(i){return dd(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class pl extends Nc{}class ml extends Nc{constructor(e){super(),this.elements=e}}function ZE(n,e){const t=tT(e);for(const i of n.elements)t.some(o=>pr(o,i))||t.push(i);return{arrayValue:{values:t}}}class gl extends Nc{constructor(e){super(),this.elements=e}}function eT(n,e){let t=tT(e);for(const i of n.elements)t=t.filter(o=>!pr(o,i));return{arrayValue:{values:t}}}class yc extends Nc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function nv(n){return ct(n.integerValue||n.doubleValue)}function tT(n){return pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t){this.field=e,this.transform=t}}function Rx(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?ko(i.elements,o.elements,pr):i instanceof yc&&o instanceof yc?pr(i.Pe,o.Pe):i instanceof pl&&o instanceof pl}(n.transform,e.transform)}class Px{constructor(e,t){this.version=e,this.transformResults=t}}class Lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mc{}function nT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new iT(n.key,Lr.none()):new Tl(n.key,n.data,Lr.none());{const t=n.data,i=Vn.empty();let o=new Et(Ot.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new _s(n.key,i,new Gn(o.toArray()),Lr.none())}}function Cx(n,e,t){n instanceof Tl?function(o,l,c){const f=o.value.clone(),p=iv(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof _s?function(o,l,c){if(!ic(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=iv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(rT(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function el(n,e,t,i){return n instanceof Tl?function(l,c,f,p){if(!ic(l.precondition,c))return f;const g=l.value.clone(),_=sv(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof _s?function(l,c,f,p){if(!ic(l.precondition,c))return f;const g=sv(l.fieldTransforms,p,c),_=c.data;return _.setAll(rT(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(l,c,f){return ic(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function xx(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=JE(i.transform,o||null);l!=null&&(t===null&&(t=Vn.empty()),t.set(i.field,l))}return t||null}function rv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ko(i,o,(l,c)=>Rx(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tl extends Mc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _s extends Mc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function rT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function iv(n,e,t){const i=new Map;Be(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);i.set(l.field,Sx(c,f,t[o]))}return i}function sv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,Ax(l,c,e))}return i}class iT extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kx extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Cx(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=XE();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=nT(c,f);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(t,i)=>rv(t,i))&&ko(this.baseMutations,e.baseMutations,(t,i)=>rv(t,i))}}class vp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length);let o=function(){return _x}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new vp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Me;function Mx(n){switch(n){default:return Te();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function sT(n){if(n===void 0)return Fr("GRPC error has no .code"),Q.UNKNOWN;switch(n){case dt.OK:return Q.OK;case dt.CANCELLED:return Q.CANCELLED;case dt.UNKNOWN:return Q.UNKNOWN;case dt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case dt.INTERNAL:return Q.INTERNAL;case dt.UNAVAILABLE:return Q.UNAVAILABLE;case dt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case dt.NOT_FOUND:return Q.NOT_FOUND;case dt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case dt.ABORTED:return Q.ABORTED;case dt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case dt.DATA_LOSS:return Q.DATA_LOSS;default:return Te()}}(Me=dt||(dt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new yi([4294967295,4294967295],0);function ov(n){const e=Lx().encode(n),t=new CE;return t.update(e),new Uint8Array(t.digest())}function av(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new yi([t,i],0),new yi([o,l],0)]}class wp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(i<0)throw new Wa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=yi.fromNumber(this.Te)}de(e,t,i){let o=e.add(t.multiply(yi.fromNumber(i)));return o.compare(Ox)===1&&(o=new yi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=ov(e),[i,o]=av(t);for(let l=0;l<this.hashCount;l++){const c=this.de(i,o,l);if(!this.Ee(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new wp(l,o,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.Te===0)return;const t=ov(e),[i,o]=av(t);for(let l=0;l<this.hashCount;l++){const c=this.de(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lc(Ae.min(),o,new nt(Ve),Ur(),xe())}}class Al{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Al(i,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class oT{constructor(e,t){this.targetId=e,this.me=t}}class aT{constructor(e,t,i=bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class lv{constructor(){this.fe=0,this.ge=uv(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),i=xe();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te()}}),new Al(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=uv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bx{constructor(e){this.Be=e,this.Le=new Map,this.ke=Ur(),this.qe=Gu(),this.Qe=Gu(),this.Ke=new nt(Ve)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(md(l))if(i===0){const c=new ye(l.path);this.We(t,c,Wt.newNoDocument(c,Ae.min()))}else Be(i===1);else{const c=this.Ze(t);if(c!==i){const f=this.Xe(e),p=f?this.et(f,e,c):1;if(p!==0){this.He(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Si(i).toUint8Array()}catch(p){if(p instanceof bE)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new wp(c,o,l)}catch(p){return xo(p instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Te===0?null:f}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.Be.nt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,c)=>{const f=this.Ye(c);if(f){if(l.current&&md(f.target)){const p=new ye(f.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,Wt.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=xe();this.Qe.forEach((l,c)=>{let f=!0;c.forEachWhile(p=>{const g=this.Ye(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Lc(e,t,this.Ke,this.ke,i);return this.ke=Ur(),this.qe=Gu(),this.Qe=Gu(),this.Ke=new nt(Ve),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new lv,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Et(Ve),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Et(Ve),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new lv),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Gu(){return new nt(ye.comparator)}function uv(){return new nt(ye.comparator)}const Fx={asc:"ASCENDING",desc:"DESCENDING"},Ux={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bx={and:"AND",or:"OR"};class jx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _d(n,e){return n.useProto3Json||xc(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zx(n,e){return _c(n,e.toTimestamp())}function dr(n){return Be(!!n),Ae.fromTimestamp(function(t){const i=Ai(t);return new wt(i.seconds,i.nanos)}(n))}function Ep(n,e){return vd(n,e).canonicalString()}function vd(n,e){const t=function(o){return new Ge(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uT(n){const e=Ge.fromString(n);return Be(pT(e)),e}function wd(n,e){return Ep(n.databaseId,e.path)}function Lf(n,e){const t=uT(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(hT(t))}function cT(n,e){return Ep(n.databaseId,e)}function $x(n){const e=uT(n);return e.length===4?Ge.emptyPath():hT(e)}function Ed(n){return new Ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hT(n){return Be(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function cv(n,e,t){return{name:wd(n,e),fields:t.value.mapValue.fields}}function qx(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(Be(_===void 0||typeof _=="string"),bt.fromBase64String(_||"")):(Be(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),bt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(g){const _=g.code===void 0?Q.UNKNOWN:sT(g.code);return new ue(_,g.message||"")}(c);t=new aT(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Lf(n,i.document.name),l=dr(i.document.updateTime),c=i.document.createTime?dr(i.document.createTime):Ae.min(),f=new Vn({mapValue:{fields:i.document.fields}}),p=Wt.newFoundDocument(o,l,c,f),g=i.targetIds||[],_=i.removedTargetIds||[];t=new sc(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Lf(n,i.document),l=i.readTime?dr(i.readTime):Ae.min(),c=Wt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new sc([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Lf(n,i.document),l=i.removedTargetIds||[];t=new sc([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new Nx(o,l),f=i.targetId;t=new oT(f,c)}}return t}function Wx(n,e){let t;if(e instanceof Tl)t={update:cv(n,e.key,e.value)};else if(e instanceof iT)t={delete:wd(n,e.key)};else if(e instanceof _s)t={update:cv(n,e.key,e.data),updateMask:ek(e.fieldMask)};else{if(!(e instanceof kx))return Te();t={verify:wd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof pl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ml)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof gl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof yc)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw Te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:zx(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(n,e.precondition)),t}function Hx(n,e){return n&&n.length>0?(Be(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?dr(o.updateTime):dr(l);return c.isEqual(Ae.min())&&(c=dr(l)),new Px(c,o.transformResults||[])}(t,e))):[]}function Kx(n,e){return{documents:[cT(n,e.path)]}}function Gx(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=cT(n,o);const l=function(g){if(g.length!==0)return dT(Xn.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(T){return{field:mo(T.field),direction:Yx(T.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=_d(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ct:t,parent:o}}function Qx(n){let e=$x(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(w){const T=fT(w);return T instanceof Xn&&jE(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(T=>function(O){return new dl(go(O.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(T))}(t.orderBy));let f=null;t.limit&&(f=function(w){let T;return T=typeof w=="object"?w.value:w,xc(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(w){const T=!!w.before,P=w.values||[];return new gc(P,T)}(t.startAt));let g=null;return t.endAt&&(g=function(w){const T=!w.before,P=w.values||[];return new gc(P,T)}(t.endAt)),dx(e,o,c,l,f,"F",p,g)}function Xx(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=go(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=go(t.unaryFilter.field);return pt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return pt.create(go(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xn.create(t.compositeFilter.filters.map(i=>fT(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function Yx(n){return Fx[n]}function Jx(n){return Ux[n]}function Zx(n){return Bx[n]}function mo(n){return{fieldPath:n.canonicalString()}}function go(n){return Ot.fromServerFormat(n.fieldPath)}function dT(n){return n instanceof pt?function(t){if(t.op==="=="){if(Y_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(X_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Y_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(X_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:Jx(t.op),value:t.value}}}(n):n instanceof Xn?function(t){const i=t.getFilters().map(o=>dT(o));return i.length===1?i[0]:{compositeFilter:{op:Zx(t.op),filters:i}}}(n):Te()}function ek(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,i,o,l=Ae.min(),c=Ae.min(),f=bt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.ht=e}}function nk(n){const e=Qx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.ln=new ik}addToCollectionParentIndex(e,t){return this.ln.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Ti.min())}updateCollectionGroup(e,t,i){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class ik{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Et(Ge.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Et(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new No(0)}static Qn(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv([n,e],[t,i]){const o=Ve(n,t);return o===0?Ve(e,i):o}class sk{constructor(e){this.Gn=e,this.buffer=new Et(fv),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();fv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ok{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Yn(3e5)})}}class ak{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Cc.oe);const i=new sk(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(hv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hv):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,c,f,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,f=Date.now(),this.removeTargets(e,i,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(g=Date.now(),fo()<=Le.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w})))}}function lk(n,e){return new ak(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.changes=new ys(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?W.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&el(i.mutation,o,Gn.empty(),wt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,xe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=xe()){const o=ls();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=qa();return l.forEach((f,p)=>{c=c.insert(f,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=ls();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,xe()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,o){let l=Ur();const c=Za(),f=function(){return Za()}();return t.forEach((p,g)=>{const _=i.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof _s)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),el(_.mutation,g,_.mutation.getFieldMask(),wt.now())):c.set(g.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>{var w;return f.set(g,new ck(_,(w=c.get(g))!==null&&w!==void 0?w:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Za();let o=new nt((c,f)=>c-f),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||Gn.empty();_=f.applyToLocalView(g,_),i.set(p,_);const w=(o.get(f.batchId)||xe()).add(p);o=o.insert(f.batchId,w)})}).next(()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,_=p.value,w=XE();_.forEach(T=>{if(!l.has(T)){const P=nT(t.get(T),i.get(T));P!==null&&w.set(T,P),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return W.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):W.resolve(ls());let f=-1,p=l;return c.next(g=>W.forEach(g,(_,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(_)?W.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{p=p.insert(_,T)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,xe())).next(_=>({batchId:f,changes:QE(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let o=qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=qa();return this.indexManager.getCollectionParents(e,l).next(f=>W.forEach(f,p=>{const g=function(w,T){return new jo(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next(_=>{_.forEach((w,T)=>{c=c.insert(w,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Wt.newInvalidDocument(_)))});let f=qa();return c.forEach((p,g)=>{const _=l.get(p);_!==void 0&&el(_.mutation,g,Gn.empty(),wt.now()),Dc(t,g)&&(f=f.insert(p,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return W.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:dr(o.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:nk(o.bundledQuery),readTime:dr(o.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.overlays=new nt(ye.comparator),this.dr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ls();return W.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),W.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.dr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(i)),W.resolve()}getOverlaysForCollection(e,t,i){const o=ls(),l=t.length+1,c=new ye(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return W.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new nt((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=ls(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=ls(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>f.set(g,_)),!(f.size()>=o)););return W.resolve(f)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.dr.get(o.largestBatchId).delete(i.key);this.dr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Dx(t,i));let l=this.dr.get(t);l===void 0&&(l=xe(),this.dr.set(t,l)),this.dr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.Er=new Et(Pt.Ar),this.Rr=new Et(Pt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new Pt(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new Pt(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new ye(new Ge([])),i=new Pt(t,e),o=new Pt(t,e+1),l=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ye(new Ge([])),i=new Pt(t,e),o=new Pt(t,e+1);let l=xe();return this.Rr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Pt(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Pt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ye.comparator(e.key,t.key)||Ve(e.br,t.br)}static Vr(e,t){return Ve(e.br,t.br)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Et(Pt.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Vx(l,t,i,o);this.mutationQueue.push(c);for(const f of o)this.vr=this.vr.add(new Pt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return W.resolve(c)}lookupMutationBatch(e,t){return W.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return W.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],c=>{const f=this.Cr(c.br);l.push(f)}),W.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(Ve);return t.forEach(o=>{const l=new Pt(o,0),c=new Pt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],f=>{i=i.add(f.br)})}),W.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const c=new Pt(new ye(l),0);let f=new Et(Ve);return this.vr.forEachWhile(p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(f=f.add(p.br)),!0)},c),W.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Be(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return W.forEach(t.mutations,o=>{const l=new Pt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Bn(e){}containsKey(e,t){const i=new Pt(t,0),o=this.vr.firstAfterOrEqual(i);return W.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.Nr=e,this.docs=function(){return new nt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return W.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let i=Ur();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Wt.newInvalidDocument(o))}),W.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ur();const c=t.path,f=new ye(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||HC(WC(_),i)<=0||(o.has(_.key)||Dc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return W.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te()}Br(e,t){return W.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new yk(this)}getSize(e){return W.resolve(this.size)}}class yk extends uk{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),W.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.persistence=e,this.Lr=new ys(t=>mp(t),gp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new Tp,this.targetCount=0,this.Qr=No.qn()}forEachTarget(e,t){return this.Lr.forEach((i,o)=>t(o)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),W.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new No(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Un(t),W.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Lr.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Lr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),W.waitFor(l).next(()=>o)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return W.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),W.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),W.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return W.resolve(i)}containsKey(e,t){return W.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Cc(0),this.Ur=!1,this.Ur=!0,this.Wr=new pk,this.referenceDelegate=e(this),this.Gr=new _k(this),this.indexManager=new rk,this.remoteDocumentCache=function(o){return new gk(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new tk(t),this.jr=new fk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new mk(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);const o=new vk(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return W.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class vk extends GC{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Zr=new Tp,this.Xr=null}static ei(e){return new Ap(e)}get ti(){if(this.Xr)return this.Xr;throw Te()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),W.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),W.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,i=>{const o=ye.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ae.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return W.or([()=>W.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class vc{constructor(e,t){this.persistence=e,this.ri=new ys(i=>YC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=lk(this,t)}static ei(e,t){return new vc(e,t)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return W.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?W.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,c=>this.ir(e,c,t).next(f=>{f||(i++,l.removeEntry(c,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),W.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}ir(e,t,i){return W.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return W.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Sp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return w1()?8:QC(_1())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new wk;return this.ts(e,t,c).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,c,f.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(fo()<=Le.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(fo()<=Le.DEBUG&&oe("QueryEngine","Query:",po(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(fo()<=Le.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fr(t))):W.resolve())}Xi(e,t){if(tv(t))return W.resolve(null);let i=fr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=yd(t,null,"F"),i=fr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=xe(...l);return this.Zi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(p=>{const g=this.rs(t,f);return this.ss(t,g,c,p.readTime)?this.Xi(e,yd(t,null,"F")):this.os(e,g,t,p)}))})))}es(e,t,i,o){return tv(t)||o.isEqual(Ae.min())?W.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const c=this.rs(t,l);return this.ss(t,c,i,o)?W.resolve(null):(fo()<=Le.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.os(e,c,t,qC(o,-1)).next(f=>f))})}rs(e,t){let i=new Et(KE(e));return t.forEach((o,l)=>{Dc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return fo()<=Le.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",po(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ti.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new nt(Ve),this.cs=new ys(l=>mp(l),gp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hk(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Ak(n,e,t,i){return new Tk(n,e,t,i)}async function gT(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let p=xe();for(const g of o){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(g=>({Ts:g,removedBatchIds:c,addedBatchIds:f}))})})}function Sk(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,p,g,_){const w=g.batch,T=w.keys();let P=W.resolve();return T.forEach(O=>{P=P.next(()=>_.getEntry(p,O)).next(N=>{const M=g.docVersions.get(O);Be(M!==null),N.version.compareTo(M)<0&&(w.applyToRemoteDocument(N,g),N.isValidDocument()&&(N.setReadTime(g.commitVersion),_.addEntry(N)))})}),P.next(()=>f.mutationQueue.removeMutationBatch(p,w))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let p=xe();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function yT(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Ik(n,e){const t=Ie(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((_,w)=>{const T=o.get(w);if(!T)return;f.push(t.Gr.removeMatchingKeys(l,_.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(l,_.addedDocuments,w)));let P=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(bt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(w,P),function(N,M,q){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(T,P,_)&&f.push(t.Gr.updateTargetData(l,P))});let p=Ur(),g=xe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),f.push(Rk(l,c,e.documentUpdates).next(_=>{p=_.Is,g=_.ds})),!i.isEqual(Ae.min())){const _=t.Gr.getLastRemoteSnapshotVersion(l).next(w=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(_)}return W.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.us=o,l))}function Rk(n,e,t){let i=xe(),o=xe();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Ur();return t.forEach((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):oe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)}),{Is:c,ds:o}})}function Pk(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ck(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,W.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new di(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function Td(n,e,t){const i=Ie(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Bo(c))throw c;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function dv(n,e,t){const i=Ie(n);let o=Ae.min(),l=xe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,_){const w=Ie(p),T=w.cs.get(_);return T!==void 0?W.resolve(w.us.get(T)):w.Gr.getTargetData(g,_)}(i,c,fr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,f.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Ae.min(),t?l:xe())).next(f=>(xk(i,mx(e),f),{documents:f,Es:l})))}function xk(n,e,t){let i=n.ls.get(e)||Ae.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class pv{constructor(){this.activeTargetIds=Ex()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kk{constructor(){this._o=new pv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new pv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function Of(){return Qu===null?Qu=function(){return 268435456+Math.round(2147483648*Math.random())}():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class Mk extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,c){const f=Of(),p=this.No(t,i.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${f}:`,p,o);const g={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(g,l,c),this.Lo(t,p,g,o).then(_=>(oe("RestConnection",`Received RPC '${t}' ${f}: `,_),_),_=>{throw xo("RestConnection",`RPC '${t}' ${f} failed with error: `,_,"url: ",p,"request:",o),_})}ko(t,i,o,l,c,f){return this.Oo(t,i,o,l,c)}Bo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,i){const o=Dk[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,o){const l=Of();return new Promise((c,f)=>{const p=new xE;p.setWithCredentials(!0),p.listenOnce(kE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case tc.NO_ERROR:const _=p.getResponseJson();oe(zt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case tc.TIMEOUT:oe(zt,`RPC '${e}' ${l} timed out`),f(new ue(Q.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const w=p.getStatus();if(oe(zt,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const P=T==null?void 0:T.error;if(P&&P.status&&P.message){const O=function(M){const q=M.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(q)>=0?q:Q.UNKNOWN}(P.status);f(new ue(O,P.message))}else f(new ue(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ue(Q.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{oe(zt,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(o);oe(zt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",g,i,15)})}qo(e,t,i){const o=Of(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=NE(),f=DE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");oe(zt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=c.createWebChannel(_,p);let T=!1,P=!1;const O=new Nk({Eo:M=>{P?oe(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(T||(oe(zt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),oe(zt,`RPC '${e}' stream ${o} sending:`,M),w.send(M))},Ao:()=>w.close()}),N=(M,q,H)=>{M.listen(q,G=>{try{H(G)}catch(ne){setTimeout(()=>{throw ne},0)}})};return N(w,$a.EventType.OPEN,()=>{P||(oe(zt,`RPC '${e}' stream ${o} transport opened.`),O.So())}),N(w,$a.EventType.CLOSE,()=>{P||(P=!0,oe(zt,`RPC '${e}' stream ${o} transport closed`),O.Do())}),N(w,$a.EventType.ERROR,M=>{P||(P=!0,xo(zt,`RPC '${e}' stream ${o} transport errored:`,M),O.Do(new ue(Q.UNAVAILABLE,"The operation could not be completed")))}),N(w,$a.EventType.MESSAGE,M=>{var q;if(!P){const H=M.data[0];Be(!!H);const G=H,ne=(G==null?void 0:G.error)||((q=G[0])===null||q===void 0?void 0:q.error);if(ne){oe(zt,`RPC '${e}' stream ${o} received error:`,ne);const re=ne.status;let ae=function(R){const V=dt[R];if(V!==void 0)return sT(V)}(re),k=ne.message;ae===void 0&&(ae=Q.INTERNAL,k="Unknown error status: "+re+" with message "+ne.message),P=!0,O.Do(new ue(ae,k)),w.close()}else oe(zt,`RPC '${e}' stream ${o} received:`,H),O.vo(H)}}),N(f,VE.STAT_EVENT,M=>{M.stat===hd.PROXY?oe(zt,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===hd.NOPROXY&&oe(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{O.bo()},0),O}}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){return new jx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t,i,o,l,c,f,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new _T(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new ue(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.d_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lk extends vT{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=qx(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?dr(c.readTime):Ae.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=Ed(this.serializer),t.addTarget=function(l,c){let f;const p=c.target;if(f=md(p)?{documents:Kx(l,p)}:{query:Gx(l,p).ct},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=lT(l,c.resumeToken);const g=_d(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ae.min())>0){f.readTime=_c(l,c.snapshotVersion.toTimestamp());const g=_d(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,e);const i=Xx(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=Ed(this.serializer),t.removeTarget=e,this.c_(t)}}class Ok extends vT{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Hx(e.writeResults,e.commitTime),i=dr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=Ed(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Wx(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,vd(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(Q.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.ko(e,vd(t,i),o,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(Q.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Fk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Fr(t),this.C_=!1):oe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{vs(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(p){const g=Ie(p);g.k_.add(4),await Sl(g),g.K_.set("Unknown"),g.k_.delete(4),await bc(g)}(this))})}),this.K_=new Fk(i,o)}}async function bc(n){if(vs(n))for(const e of n.q_)await e(!0)}async function Sl(n){for(const e of n.q_)await e(!1)}function wT(n,e){const t=Ie(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),Cp(t)?Pp(t):zo(t).s_()&&Rp(t,e))}function Ip(n,e){const t=Ie(n),i=zo(t);t.L_.delete(e),i.s_()&&ET(t,e),t.L_.size===0&&(i.s_()?i.a_():vs(t)&&t.K_.set("Unknown"))}function Rp(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(n).V_(e)}function ET(n,e){n.U_.xe(e),zo(n).m_(e)}function Pp(n){n.U_=new bx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),zo(n).start(),n.K_.F_()}function Cp(n){return vs(n)&&!zo(n).i_()&&n.L_.size>0}function vs(n){return Ie(n).k_.size===0}function TT(n){n.U_=void 0}async function Bk(n){n.K_.set("Online")}async function jk(n){n.L_.forEach((e,t)=>{Rp(n,e)})}async function zk(n,e){TT(n),Cp(n)?(n.K_.O_(e),Pp(n)):n.K_.set("Unknown")}async function $k(n,e,t){if(n.K_.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const f of l.targetIds)o.L_.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.L_.delete(f),o.U_.removeTarget(f))}(n,e)}catch(i){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wc(n,i)}else if(e instanceof sc?n.U_.$e(e):e instanceof oT?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ae.min()))try{const i=await yT(n.localStore);t.compareTo(i)>=0&&await function(l,c){const f=l.U_.it(c);return f.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.L_.get(g);_&&l.L_.set(g,_.withResumeToken(p.resumeToken,c))}}),f.targetMismatches.forEach((p,g)=>{const _=l.L_.get(p);if(!_)return;l.L_.set(p,_.withResumeToken(bt.EMPTY_BYTE_STRING,_.snapshotVersion)),ET(l,p);const w=new di(_.target,p,g,_.sequenceNumber);Rp(l,w)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){oe("RemoteStore","Failed to raise snapshot:",i),await wc(n,i)}}async function wc(n,e,t){if(!Bo(e))throw e;n.k_.add(1),await Sl(n),n.K_.set("Offline"),t||(t=()=>yT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await bc(n)})}function AT(n,e){return e().catch(t=>wc(n,t,e))}async function Fc(n){const e=Ie(n),t=Ri(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;qk(e);)try{const o=await Pk(e.localStore,i);if(o===null){e.B_.length===0&&t.a_();break}i=o.batchId,Wk(e,o)}catch(o){await wc(e,o)}ST(e)&&IT(e)}function qk(n){return vs(n)&&n.B_.length<10}function Wk(n,e){n.B_.push(e);const t=Ri(n);t.s_()&&t.f_&&t.g_(e.mutations)}function ST(n){return vs(n)&&!Ri(n).i_()&&n.B_.length>0}function IT(n){Ri(n).start()}async function Hk(n){Ri(n).w_()}async function Kk(n){const e=Ri(n);for(const t of n.B_)e.g_(t.mutations)}async function Gk(n,e,t){const i=n.B_.shift(),o=vp.from(i,e,t);await AT(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Fc(n)}async function Qk(n,e){e&&Ri(n).f_&&await async function(i,o){if(function(c){return Mx(c)&&c!==Q.ABORTED}(o.code)){const l=i.B_.shift();Ri(i).__(),await AT(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Fc(i)}}(n,e),ST(n)&&IT(n)}async function gv(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const i=vs(t);t.k_.add(3),await Sl(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await bc(t)}async function Xk(n,e){const t=Ie(n);e?(t.k_.delete(2),await bc(t)):e||(t.k_.add(2),await Sl(t),t.K_.set("Unknown"))}function zo(n){return n.W_||(n.W_=function(t,i,o){const l=Ie(t);return l.b_(),new Lk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:Bk.bind(null,n),mo:jk.bind(null,n),po:zk.bind(null,n),R_:$k.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Cp(n)?Pp(n):n.K_.set("Unknown")):(await n.W_.stop(),TT(n))})),n.W_}function Ri(n){return n.G_||(n.G_=function(t,i,o){const l=Ie(t);return l.b_(),new Ok(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Hk.bind(null,n),po:Qk.bind(null,n),p_:Kk.bind(null,n),y_:Gk.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Fc(n)):(await n.G_.stop(),n.B_.length>0&&(oe("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,f=new xp(e,t,c,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),Bo(n))return new ue(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=qa(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new To;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.z_=new nt(ye.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Te():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Mo{constructor(e,t,i,o,l,c,f,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Mo(e,t,To.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class Jk{constructor(){this.queries=_v(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ie(t),l=o.queries;o.queries=_v(),l.forEach((c,f)=>{for(const p of f.J_)p.onError(i)})})(this,new ue(Q.ABORTED,"Firestore shutting down"))}}function _v(){return new ys(n=>HE(n),Vc)}async function RT(n,e){const t=Ie(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new Yk,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=kp(c,`Initialization of query '${po(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Vp(t)}async function PT(n,e){const t=Ie(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Zk(n,e){const t=Ie(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.J_)f.ta(o)&&(i=!0);c.H_=o}}i&&Vp(t)}function eV(n,e,t){const i=Ie(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function Vp(n){n.X_.forEach(e=>{e.next()})}var Ad,vv;(vv=Ad||(Ad={})).na="default",vv.Cache="cache";class CT{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Ad.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.key=e}}class kT{constructor(e){this.key=e}}class tV{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=xe(),this.mutatedKeys=xe(),this.Va=KE(e),this.ma=new To(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new yv,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const T=o.get(_),P=Dc(this.query,w)?w:null,O=!!T&&this.mutatedKeys.has(T.key),N=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let M=!1;T&&P?T.data.isEqual(P.data)?O!==N&&(i.track({type:3,doc:P}),M=!0):this.ya(T,P)||(i.track({type:2,doc:P}),M=!0,(p&&this.Va(P,p)>0||g&&this.Va(P,g)<0)&&(f=!0)):!T&&P?(i.track({type:0,doc:P}),M=!0):T&&!P&&(i.track({type:1,doc:T}),M=!0,(p||g)&&(f=!0)),M&&(P?(c=c.add(P),l=N?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{ma:c,pa:i,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((_,w)=>function(P,O){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return N(P)-N(O)}(_.type,w.type)||this.Va(_.doc,w.doc)),this.wa(i),o=o!=null&&o;const f=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,g=p!==this.Aa;return this.Aa=p,c.length!==0||g?{snapshot:new Mo(this.query,e.ma,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new yv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=xe(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new kT(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new xT(i))}),t}va(e){this.Ea=e.Es,this.Ra=xe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Mo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class nV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rV{constructor(e){this.key=e,this.Fa=!1}}class iV{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new ys(f=>HE(f),Vc),this.Oa=new Map,this.Na=new Set,this.Ba=new nt(ye.comparator),this.La=new Map,this.ka=new Tp,this.qa={},this.Qa=new Map,this.Ka=No.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function sV(n,e,t=!0){const i=OT(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await VT(i,e,t,!0),o}async function oV(n,e){const t=OT(n);await VT(t,e,!0,!1)}async function VT(n,e,t,i){const o=await Ck(n.localStore,fr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await aV(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&wT(n.remoteStore,o),f}async function aV(n,e,t,i,o){n.Ua=(w,T,P)=>async function(N,M,q,H){let G=M.view.ga(q);G.ss&&(G=await dv(N.localStore,M.query,!1).then(({documents:k})=>M.view.ga(k,G)));const ne=H&&H.targetChanges.get(M.targetId),re=H&&H.targetMismatches.get(M.targetId)!=null,ae=M.view.applyChanges(G,N.isPrimaryClient,ne,re);return Ev(N,M.targetId,ae.ba),ae.snapshot}(n,w,T,P);const l=await dv(n.localStore,e,!0),c=new tV(e,l.Es),f=c.ga(l.documents),p=Al.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),g=c.applyChanges(f,n.isPrimaryClient,p);Ev(n,t,g.ba);const _=new nV(e,t,c);return n.xa.set(e,_),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),g.snapshot}async function lV(n,e,t){const i=Ie(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(c=>!Vc(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Td(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ip(i.remoteStore,o.targetId),Sd(i,o.targetId)}).catch(Uo)):(Sd(i,o.targetId),await Td(i.localStore,o.targetId,!0))}async function uV(n,e){const t=Ie(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(t.remoteStore,i.targetId))}async function cV(n,e,t){const i=yV(n);try{const o=await function(c,f){const p=Ie(c),g=wt.now(),_=f.reduce((P,O)=>P.add(O.key),xe());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let O=Ur(),N=xe();return p.hs.getEntries(P,_).next(M=>{O=M,O.forEach((q,H)=>{H.isValidDocument()||(N=N.add(q))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,O)).next(M=>{w=M;const q=[];for(const H of f){const G=xx(H,w.get(H.key).overlayedDocument);G!=null&&q.push(new _s(H.key,G,FE(G.value.mapValue),Lr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,q,f)}).next(M=>{T=M;const q=M.applyToLocalDocumentSet(w,N);return p.documentOverlayCache.saveOverlays(P,M.batchId,q)})}).then(()=>({batchId:T.batchId,changes:QE(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,f,p){let g=c.qa[c.currentUser.toKey()];g||(g=new nt(Ve)),g=g.insert(f,p),c.qa[c.currentUser.toKey()]=g}(i,o.batchId,t),await Il(i,o.changes),await Fc(i.remoteStore)}catch(o){const l=kp(o,"Failed to persist write");t.reject(l)}}async function DT(n,e){const t=Ie(n);try{const i=await Ik(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.La.get(l);c&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?Be(c.Fa):o.removedDocuments.size>0&&(Be(c.Fa),c.Fa=!1))}),await Il(t,i,e)}catch(i){await Uo(i)}}function wv(n,e,t){const i=Ie(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,c)=>{const f=c.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(c,f){const p=Ie(c);p.onlineState=f;let g=!1;p.queries.forEach((_,w)=>{for(const T of w.J_)T.ea(f)&&(g=!0)}),g&&Vp(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hV(n,e,t){const i=Ie(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.La.get(e),l=o&&o.key;if(l){let c=new nt(ye.comparator);c=c.insert(l,Wt.newNoDocument(l,Ae.min()));const f=xe().add(l),p=new Lc(Ae.min(),new Map,new nt(Ve),c,f);await DT(i,p),i.Ba=i.Ba.remove(l),i.La.delete(e),Dp(i)}else await Td(i.localStore,e,!1).then(()=>Sd(i,e,t)).catch(Uo)}async function fV(n,e){const t=Ie(n),i=e.batch.batchId;try{const o=await Sk(t.localStore,e);MT(t,i,null),NT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Il(t,o)}catch(o){await Uo(o)}}async function dV(n,e,t){const i=Ie(n);try{const o=await function(c,f){const p=Ie(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,f).next(w=>(Be(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(i.localStore,e);MT(i,e,t),NT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Il(i,o)}catch(o){await Uo(o)}}function NT(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function MT(n,e,t){const i=Ie(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function Sd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||LT(n,i)})}function LT(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(Ip(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),Dp(n))}function Ev(n,e,t){for(const i of t)i instanceof xT?(n.ka.addReference(i.key,e),pV(n,i)):i instanceof kT?(oe("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||LT(n,i.key)):Te()}function pV(n,e){const t=e.key,i=t.path.canonicalString();n.Ba.get(t)||n.Na.has(i)||(oe("SyncEngine","New document in limbo: "+t),n.Na.add(i),Dp(n))}function Dp(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new ye(Ge.fromString(e)),i=n.Ka.next();n.La.set(i,new rV(t)),n.Ba=n.Ba.insert(t,i),wT(n.remoteStore,new di(fr(yp(t.path)),i,"TargetPurposeLimboResolution",Cc.oe))}}async function Il(n,e,t){const i=Ie(n),o=[],l=[],c=[];i.xa.isEmpty()||(i.xa.forEach((f,p)=>{c.push(i.Ua(p,e,t).then(g=>{var _;if((g||t)&&i.isPrimaryClient){const w=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=Sp.zi(p.targetId,g);l.push(w)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(p,g){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>W.forEach(g,T=>W.forEach(T.Wi,P=>_.persistence.referenceDelegate.addReference(w,T.targetId,P)).next(()=>W.forEach(T.Gi,P=>_.persistence.referenceDelegate.removeReference(w,T.targetId,P)))))}catch(w){if(!Bo(w))throw w;oe("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const P=_.us.get(T),O=P.snapshotVersion,N=P.withLastLimboFreeSnapshotVersion(O);_.us=_.us.insert(T,N)}}}(i.localStore,l))}async function mV(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const i=await gT(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(f=>{f.forEach(p=>{p.reject(new ue(Q.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Il(t,i.Ts)}}function gV(n,e){const t=Ie(n),i=t.La.get(e);if(i&&i.Fa)return xe().add(i.key);{let o=xe();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const f=t.xa.get(c);o=o.unionWith(f.view.fa)}return o}}function OT(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hV.bind(null,e),e.Ma.R_=Zk.bind(null,e.eventManager),e.Ma.Wa=eV.bind(null,e.eventManager),e}function yV(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dV.bind(null,e),e}class Ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Ak(this.persistence,new Ek,e.initialUser,this.serializer)}ja(e){return new mT(Ap.ei,this.serializer)}za(e){return new kk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ec.provider={build:()=>new Ec};class _V extends Ec{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Be(this.persistence.referenceDelegate instanceof vc);const i=this.persistence.referenceDelegate.garbageCollector;return new ok(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new mT(i=>vc.ei(i,t),this.serializer)}}class Id{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mV.bind(null,this.syncEngine),await Xk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jk}()}createDatastore(e){const t=Oc(e.databaseInfo.databaseId),i=function(l){return new Mk(l)}(e.databaseInfo);return function(l,c,f,p){return new bk(l,c,f,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,f){return new Uk(i,o,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>wv(this.syncEngine,t,0),function(){return mv.p()?new mv:new Vk}())}createSyncEngine(e,t){return function(o,l,c,f,p,g,_){const w=new iV(o,l,c,f,p,g);return _&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);oe("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await Sl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Id.provider={build:()=>new Id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=qt.UNAUTHENTICATED,this.clientId=LE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{oe("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=kp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ff(n,e){n.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await gT(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Tv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wV(n);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>gv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>gv(e.remoteStore,o)),n._onlineComponents=e}async function wV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ff(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;xo("Error using user provided cache. Falling back to memory cache: "+t),await Ff(n,new Ec)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Ff(n,new _V(void 0));return n._offlineComponents}async function FT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await Tv(n,n._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await Tv(n,new Id))),n._onlineComponents}function EV(n){return FT(n).then(e=>e.syncEngine)}async function Rd(n){const e=await FT(n),t=e.eventManager;return t.onListen=sV.bind(null,e.syncEngine),t.onUnlisten=lV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uV.bind(null,e.syncEngine),t}function TV(n,e,t={}){const i=new _i;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,p,g){const _=new bT({next:T=>{_.eu(),c.enqueueAndForget(()=>PT(l,w)),T.fromCache&&p.source==="server"?g.reject(new ue(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new CT(f,_,{includeMetadataChanges:!0,ua:!0});return RT(l,w)}(await Rd(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(n,e,t){if(!t)throw new ue(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AV(n,e,t,i){if(e===!0&&i===!0)throw new ue(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sv(n){if(!ye.isDocumentKey(n))throw new ue(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Iv(n){if(ye.isDocumentKey(n))throw new ue(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Uc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function cs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uc(n);throw new ue(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new LC;switch(i.type){case"firstParty":return new UC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Av.get(t);i&&(oe("ComponentProvider","Removing Datastore"),Av.delete(t),i.terminate())}(this),Promise.resolve()}}function SV(n,e,t,i={}){var o;const l=(n=cs(n,Bc))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=qt.MOCK_USER;else{f=yE(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new ue(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new qt(g)}n._authCredentials=new OC(new ME(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class _n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class vi extends Ci{constructor(e,t,i){super(e,t,yp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new ye(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function Ao(n,e,...t){if(n=Qn(n),BT("collection","path",e),n instanceof Bc){const i=Ge.fromString(e,...t);return Iv(i),new vi(n,null,i)}{if(!(n instanceof _n||n instanceof vi))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ge.fromString(e,...t));return Iv(i),new vi(n.firestore,null,i)}}function IV(n,e,...t){if(n=Qn(n),arguments.length===1&&(e=LE.newId()),BT("doc","path",e),n instanceof Bc){const i=Ge.fromString(e,...t);return Sv(i),new _n(n,null,new ye(i))}{if(!(n instanceof _n||n instanceof vi))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ge.fromString(e,...t));return Sv(i),new _n(n.firestore,n instanceof vi?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new _T(this,"async_queue_retry"),this.fu=()=>{const i=bf();i&&oe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new _i;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Bo(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(i);throw Fr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=xp.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function Cv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(n,["next","error","complete"])}class yl extends Bc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Pv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pv(e),this._firestoreClient=void 0,await e}}}function RV(n,e){const t=typeof n=="object"?n:IE(),i=typeof n=="string"?n:"(default)",o=TE(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=mE("firestore");l&&SV(o,...l)}return o}function Np(n){if(n._terminated)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PV(n),n._firestoreClient}function PV(n){var e,t,i;const o=n._freezeSettings(),l=function(f,p,g,_){return new ex(f,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,UT(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new vV(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(bt.fromBase64String(e))}catch(t){throw new ue(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lo(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=/^__.*__$/;class xV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}function jT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Fp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Bu(e),o}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Tc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(jT(this.Mu)&&CV.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class kV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Oc(e)}$u(e,t,i,o=!1){return new Fp({Mu:e,methodName:t,Ku:i,path:Ot.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zT(n){const e=n._freezeSettings(),t=Oc(n._databaseId);return new kV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VV(n,e,t,i,o,l={}){const c=n.$u(l.merge||l.mergeFields?2:0,e,t,o);WT("Data must be an object, but it was:",c,i);const f=$T(i,c);let p,g;if(l.merge)p=new Gn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const T=NV(e,w,t);if(!c.contains(T))throw new ue(Q.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);LV(_,T)||_.push(T)}p=new Gn(_),g=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=c.fieldTransforms;return new xV(new Vn(f),p,g)}class Up extends Lp{_toFieldTransform(e){return new Ix(e.path,new pl)}isEqual(e){return e instanceof Up}}function DV(n,e,t,i=!1){return Bp(t,n.$u(i?4:3,e))}function Bp(n,e){if(qT(n=Qn(n)))return WT("Unsupported field value:",e,n),$T(n,e);if(n instanceof Lp)return function(i,o){if(!jT(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const f of i){let p=Bp(f,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=Qn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Tx(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=wt.fromDate(i);return{timestampValue:_c(o.serializer,l)}}if(i instanceof wt){const l=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(o.serializer,l)}}if(i instanceof Op)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lo)return{bytesValue:lT(o.serializer,i._byteString)};if(i instanceof _n){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ep(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof bp)return function(c,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.qu("VectorValues must only contain numeric values.");return _p(f.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Uc(i)}`)}(n,e)}function $T(n,e){const t={};return OE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(n,(i,o)=>{const l=Bp(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function qT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Op||n instanceof Lo||n instanceof _n||n instanceof Lp||n instanceof bp)}function WT(n,e,t){if(!qT(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Uc(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function NV(n,e,t){if((e=Qn(e))instanceof Mp)return e._internalPath;if(typeof e=="string")return HT(n,e);throw Tc("Field path arguments must be of type string or ",n,!1,void 0,t)}const MV=new RegExp("[~\\*/\\[\\]]");function HT(n,e,t){if(e.search(MV)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mp(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ue(Q.INVALID_ARGUMENT,f+n+p)}function LV(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OV extends KT{data(){return super.data()}}function jp(n,e){return typeof e=="string"?HT(n,e):e instanceof Mp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class QT extends zp{}function $p(n,e,...t){let i=[];e instanceof zp&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof Wp).length,f=l.filter(p=>p instanceof qp).length;if(c>1||c>0&&f>0)throw new ue(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class qp extends QT{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new qp(e,t,i)}_apply(e){const t=this._parse(e);return XT(e._query,t),new Ci(e.firestore,e.converter,gd(e._query,t))}_parse(e){const t=zT(e.firestore);return function(l,c,f,p,g,_,w){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ue(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){kv(w,_);const P=[];for(const O of w)P.push(xv(p,l,O));T={arrayValue:{values:P}}}else T=xv(p,l,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||kv(w,_),T=DV(f,c,w,_==="in"||_==="not-in");return pt.create(g,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wp extends zp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wp(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)XT(c,p),c=gd(c,p)}(e._query,t),new Ci(e.firestore,e.converter,gd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hp extends QT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hp(e,t)}_apply(e){const t=function(o,l,c){if(o.startAt!==null)throw new ue(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dl(l,c)}(e._query,this._field,this._direction);return new Ci(e.firestore,e.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new jo(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Kp(n,e="asc"){const t=e,i=jp("orderBy",n);return Hp._create(i,t)}function xv(n,e,t){if(typeof(t=Qn(t))=="string"){if(t==="")throw new ue(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WE(e)&&t.indexOf("/")!==-1)throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ge.fromString(t));if(!ye.isDocumentKey(i))throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Q_(n,new ye(i))}if(t instanceof _n)return Q_(n,t._key);throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(t)}.`)}function kv(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XT(n,e){const t=function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ue(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class bV{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return gs(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>ct(c.doubleValue));return new bp(l)}convertGeoPoint(e){return new Op(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=kc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ge.fromString(e);Be(pT(i));const o=new hl(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||Fr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YT extends KT{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class oc extends YT{data(e={}){return super.data(e)}}class JT{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ha(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new oc(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(f=>{const p=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ha(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ha(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:UV(f.type),doc:p,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class Gp extends bV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,t)}}function BV(n){n=cs(n,Ci);const e=cs(n.firestore,yl),t=Np(e),i=new Gp(e);return GT(n._query),TV(t,n._query).then(o=>new JT(e,i,n,o))}function Pd(n,e){const t=cs(n.firestore,yl),i=IV(n),o=FV(n.converter,e);return jV(t,[VV(zT(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Lr.exists(!1))]).then(()=>i)}function Qp(n,...e){var t,i,o;n=Qn(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Cv(e[c])||(l=e[c],c++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Cv(e[c])){const w=e[c];e[c]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[c+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[c+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,_;if(n instanceof _n)g=cs(n.firestore,yl),_=yp(n._key.path),p={next:w=>{e[c]&&e[c](zV(g,n,w))},error:e[c+1],complete:e[c+2]};else{const w=cs(n,Ci);g=cs(w.firestore,yl),_=w._query;const T=new Gp(g);p={next:P=>{e[c]&&e[c](new JT(g,T,w,P))},error:e[c+1],complete:e[c+2]},GT(n._query)}return function(T,P,O,N){const M=new bT(N),q=new CT(P,M,O);return T.asyncQueue.enqueueAndForget(async()=>RT(await Rd(T),q)),()=>{M.eu(),T.asyncQueue.enqueueAndForget(async()=>PT(await Rd(T),q))}}(Np(g),_,f,p)}function jV(n,e){return function(i,o){const l=new _i;return i.asyncQueue.enqueueAndForget(async()=>cV(await EV(i),o,l)),l.promise}(Np(n),e)}function zV(n,e,t){const i=t.docs.get(e._key),o=new Gp(n);return new YT(n,o,e._key,i,new Ha(t.hasPendingWrites,t.fromCache),e.converter)}function Cd(){return new Up("serverTimestamp")}(function(e,t=!0){(function(o){Fo=o})(AE),ll(new Co("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new yl(new bC(i.getProvider("auth-internal")),new jC(i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ue(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(g.options.projectId,_)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),gi($_,"4.7.6",e),gi($_,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="firebasestorage.googleapis.com",e0="storageBucket",$V=2*60*1e3,qV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends ms{constructor(e,t,i=0){super(Uf(e),`Firebase Storage: ${t} (${Uf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function Uf(n){return"storage/"+n}function Xp(){const n="An unknown error occurred, please check the error payload for server response.";return new ot(st.UNKNOWN,n)}function WV(n){return new ot(st.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function HV(n){return new ot(st.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function KV(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(st.UNAUTHENTICATED,n)}function GV(){return new ot(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function QV(n){return new ot(st.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function XV(){return new ot(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YV(){return new ot(st.CANCELED,"User canceled the upload/download.")}function JV(n){return new ot(st.INVALID_URL,"Invalid URL '"+n+"'.")}function ZV(n){return new ot(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function eD(){return new ot(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+e0+"' property when initializing the app?")}function tD(){return new ot(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nD(){return new ot(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rD(n){return new ot(st.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xd(n){return new ot(st.INVALID_ARGUMENT,n)}function t0(){return new ot(st.APP_DELETED,"The Firebase app was deleted.")}function iD(n){return new ot(st.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tl(n,e){return new ot(st.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ua(n){throw new ot(st.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=gn.makeFromUrl(e,t)}catch{return new gn(e,"")}if(i.path==="")return i;throw ZV(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+o+c,"i"),p={bucket:1,path:3};function g(ne){ne.path_=decodeURIComponent(ne.path)}const _="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",P=new RegExp(`^https?://${w}/${_}/b/${o}/o${T}`,"i"),O={bucket:1,path:3},N=t===ZT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",q=new RegExp(`^https?://${N}/${o}/${M}`,"i"),G=[{regex:f,indices:p,postModify:l},{regex:P,indices:O,postModify:g},{regex:q,indices:{bucket:1,path:2},postModify:g}];for(let ne=0;ne<G.length;ne++){const re=G[ne],ae=re.regex.exec(e);if(ae){const k=ae[re.indices.bucket];let S=ae[re.indices.path];S||(S=""),i=new gn(k,S),re.postModify(i);break}}if(i==null)throw JV(e);return i}}class sD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n,e,t){let i=1,o=null,l=null,c=!1,f=0;function p(){return f===2}let g=!1;function _(...M){g||(g=!0,e.apply(null,M))}function w(M){o=setTimeout(()=>{o=null,n(P,p())},M)}function T(){l&&clearTimeout(l)}function P(M,...q){if(g){T();return}if(M){T(),_.call(null,M,...q);return}if(p()||c){T(),_.call(null,M,...q);return}i<64&&(i*=2);let G;f===1?(f=2,G=0):G=(i+Math.random())*1e3,w(G)}let O=!1;function N(M){O||(O=!0,T(),!g&&(o!==null?(M||(f=2),clearTimeout(o),w(0)):M||(f=1)))}return w(0),l=setTimeout(()=>{c=!0,N(!0)},t),N}function aD(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n){return n!==void 0}function uD(n){return typeof n=="object"&&!Array.isArray(n)}function Yp(n){return typeof n=="string"||n instanceof String}function Vv(n){return Jp()&&n instanceof Blob}function Jp(){return typeof Blob<"u"}function Dv(n,e,t,i){if(i<e)throw xd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw xd(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function n0(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var hs;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(hs||(hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t,i,o,l,c,f,p,g,_,w,T=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,O)=>{this.resolve_=P,this.reject_=O,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Xu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const p=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===hs.NO_ERROR,p=l.getStatus();if(!f||cD(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===hs.ABORT;i(!1,new Xu(!1,null,_));return}const g=this.successCodes_.indexOf(p)!==-1;i(!0,new Xu(g,l))})},t=(i,o)=>{const l=this.resolve_,c=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());lD(p)?l(p):l()}catch(p){c(p)}else if(f!==null){const p=Xp();p.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,p)):c(p)}else if(o.canceled){const p=this.appDelete_?t0():YV();c(p)}else{const p=XV();c(p)}};this.canceled_?t(!1,new Xu(!1,null,!0)):this.backoffId_=oD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xu{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function fD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function dD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function mD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function gD(n,e,t,i,o,l,c=!0){const f=n0(n.urlParams),p=n.url+f,g=Object.assign({},n.headers);return pD(g,e),fD(g,t),dD(g,l),mD(g,i),new hD(p,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _D(...n){const e=yD();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Jp())return new Blob(n);throw new ot(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(n){if(typeof atob>"u")throw rD("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bf{constructor(e,t){this.data=e,this.contentType=t||null}}function ED(n,e){switch(n){case ur.RAW:return new Bf(r0(e));case ur.BASE64:case ur.BASE64URL:return new Bf(i0(n,e));case ur.DATA_URL:return new Bf(AD(e),SD(e))}throw Xp()}function r0(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=n.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function TD(n){let e;try{e=decodeURIComponent(n)}catch{throw tl(ur.DATA_URL,"Malformed data URL.")}return r0(e)}function i0(n,e){switch(n){case ur.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw tl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ur.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw tl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=wD(e)}catch(o){throw o.message.includes("polyfill")?o:tl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class s0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw tl(ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=ID(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function AD(n){const e=new s0(n);return e.base64?i0(ur.BASE64,e.rest):TD(e.rest)}function SD(n){return new s0(n).contentType}function ID(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){let i=0,o="";Vv(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Vv(this.data_)){const i=this.data_,o=vD(i,e,t);return o===null?null:new fi(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new fi(i,!0)}}static getBlob(...e){if(Jp()){const t=e.map(i=>i instanceof fi?i.data_:i);return new fi(_D.apply(null,t))}else{const t=e.map(c=>Yp(c)?ED(ur.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const o=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)o[l++]=c[f]}),new fi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n){let e;try{e=JSON.parse(n)}catch{return null}return uD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function PD(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function a0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n,e){return e}class Yt{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||CD}}let Yu=null;function xD(n){return!Yp(n)||n.length<2?n:a0(n)}function l0(){if(Yu)return Yu;const n=[];n.push(new Yt("bucket")),n.push(new Yt("generation")),n.push(new Yt("metageneration")),n.push(new Yt("name","fullPath",!0));function e(l,c){return xD(c)}const t=new Yt("name");t.xform=e,n.push(t);function i(l,c){return c!==void 0?Number(c):c}const o=new Yt("size");return o.xform=i,n.push(o),n.push(new Yt("timeCreated")),n.push(new Yt("updated")),n.push(new Yt("md5Hash",null,!0)),n.push(new Yt("cacheControl",null,!0)),n.push(new Yt("contentDisposition",null,!0)),n.push(new Yt("contentEncoding",null,!0)),n.push(new Yt("contentLanguage",null,!0)),n.push(new Yt("contentType",null,!0)),n.push(new Yt("metadata","customMetadata",!0)),Yu=n,Yu}function kD(n,e){function t(){const i=n.bucket,o=n.fullPath,l=new gn(i,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function VD(n,e,t){const i={};i.type="file";const o=t.length;for(let l=0;l<o;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return kD(i,n),i}function u0(n,e,t){const i=o0(e);return i===null?null:VD(n,i,t)}function DD(n,e,t,i){const o=o0(e);if(o===null||!Yp(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const _=n.bucket,w=n.fullPath,T="/b/"+c(_)+"/o/"+c(w),P=Zp(T,t,i),O=n0({alt:"media",token:g});return P+O})[0]}function ND(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class c0{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(n){if(!n)throw Xp()}function MD(n,e){function t(i,o){const l=u0(n,o,e);return h0(l!==null),l}return t}function LD(n,e){function t(i,o){const l=u0(n,o,e);return h0(l!==null),DD(l,o,n.host,n._protocol)}return t}function f0(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=GV():o=KV():t.getStatus()===402?o=HV(n.bucket):t.getStatus()===403?o=QV(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function OD(n){const e=f0(n);function t(i,o){let l=e(i,o);return i.getStatus()===404&&(l=WV(n.path)),l.serverResponse=o.serverResponse,l}return t}function bD(n,e,t){const i=e.fullServerUrl(),o=Zp(i,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,f=new c0(o,l,LD(n,t),c);return f.errorHandler=OD(e),f}function FD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function UD(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=FD(null,e)),i}function BD(n,e,t,i,o){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let G="";for(let ne=0;ne<2;ne++)G=G+Math.random().toString().slice(2);return G}const p=f();c["Content-Type"]="multipart/related; boundary="+p;const g=UD(e,i,o),_=ND(g,t),w="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,T=`\r
--`+p+"--",P=fi.getBlob(w,i,T);if(P===null)throw tD();const O={name:g.fullPath},N=Zp(l,n.host,n._protocol),M="POST",q=n.maxUploadRetryTime,H=new c0(N,M,MD(n,t),q);return H.urlParams=O,H.headers=c,H.body=P.uploadData(),H.errorHandler=f0(e),H}class jD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o){if(this.sent_)throw Ua("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ua("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ua("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ua("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ua("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zD extends jD{initXhr(){this.xhr_.responseType="text"}}function d0(){return new zD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this._service=e,t instanceof gn?this._location=t:this._location=gn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ds(e,t)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return a0(this._location.path)}get storage(){return this._service}get parent(){const e=RD(this._location.path);if(e===null)return null;const t=new gn(this._location.bucket,e);return new ds(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iD(e)}}function $D(n,e,t){n._throwIfRoot("uploadBytes");const i=BD(n.storage,n._location,l0(),new fi(e,!0),t);return n.storage.makeRequestWithTokens(i,d0).then(o=>({metadata:o,ref:n}))}function qD(n){n._throwIfRoot("getDownloadURL");const e=bD(n.storage,n._location,l0());return n.storage.makeRequestWithTokens(e,d0).then(t=>{if(t===null)throw nD();return t})}function WD(n,e){const t=PD(n._location.path,e),i=new gn(n._location.bucket,t);return new ds(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(n){return/^[A-Za-z]+:\/\//.test(n)}function KD(n,e){return new ds(n,e)}function p0(n,e){if(n instanceof em){const t=n;if(t._bucket==null)throw eD();const i=new ds(t,t._bucket);return e!=null?p0(i,e):i}else return e!==void 0?WD(n,e):n}function GD(n,e){if(e&&HD(e)){if(n instanceof em)return KD(n,e);throw xd("To use ref(service, url), the first argument must be a Storage instance.")}else return p0(n,e)}function Nv(n,e){const t=e==null?void 0:e[e0];return t==null?null:gn.makeFromBucketSpec(t,n)}function QD(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:yE(o,n.app.options.projectId))}class em{constructor(e,t,i,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=ZT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$V,this._maxUploadRetryTime=qV,this._requests=new Set,o!=null?this._bucket=gn.makeFromBucketSpec(o,this._host):this._bucket=Nv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=Nv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ds(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new sD(t0());{const c=gD(e,this._appId,i,o,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const Mv="@firebase/storage",Lv="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="storage";function XD(n,e,t){return n=Qn(n),$D(n,e,t)}function YD(n){return n=Qn(n),qD(n)}function JD(n,e){return n=Qn(n),GD(n,e)}function ZD(n=IE(),e){n=Qn(n);const i=TE(n,m0).getImmediate({identifier:e}),o=mE("storage");return o&&e2(i,...o),i}function e2(n,e,t,i={}){QD(n,e,t,i)}function t2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new em(t,i,o,e,AE)}function n2(){ll(new Co(m0,t2,"PUBLIC").setMultipleInstances(!0)),gi(Mv,Lv,""),gi(Mv,Lv,"esm2017")}n2();const r2={apiKey:"AIzaSyDaEBKWvFiT3hMTKhz_DU5k9i2FCip0Mx4",authDomain:"imageboard-176a7.firebaseapp.com",projectId:"imageboard-176a7",storageBucket:"imageboard-176a7.firebasestorage.app",messagingSenderId:"848950340650",appId:"1:848950340650:web:fd52a1c2805a6829e56753"},g0=SE(r2),So=RV(g0),i2=ZD(g0);function y0({postId:n,onCommentAdded:e}){const[t,i]=fe.useState(""),[o,l]=fe.useState(""),[c,f]=fe.useState(""),p=async()=>{if(!n){console.error("Error: No postId provided for comment submission.");return}if(t.trim()){const g=o.trim()?o:"An0n",_={text:t,username:g,country:c,createdAt:Cd()};try{const w=Ao(So,`posts/${n}/comments`);await Pd(w,_),i(""),l(""),f(""),e&&e()}catch(w){console.error("Error submitting comment:",w)}}};return de.jsxs("div",{className:"mt-4",children:[de.jsx(fE,{username:o,setUsername:l,country:c,setCountry:f}),de.jsx(bv,{placeholder:"Write a comment...",value:t,onChange:g=>i(g.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white"}),de.jsx(Ov,{onClick:p,className:"w-full bg-purple-600 hover:bg-purple-500",children:"Submit"})]})}function _0({comment:n,postId:e}){const[t,i]=fe.useState(!1),[o,l]=fe.useState([]),c=f=>{if(!f)return"Just now";const p=f.toDate?f.toDate():new Date(f);return new Intl.DateTimeFormat("en-US",{weekday:"short",year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(p)};return fe.useEffect(()=>{if(!e||!n.id)return;const f=Ao(So,`posts/${e}/comments/${n.id}/replies`),p=$p(f,Kp("createdAt","asc")),g=Qp(p,_=>{const w=_.docs.map(T=>{var P;return{id:T.id,...T.data(),createdAt:(P=T.data().createdAt)!=null&&P.toDate?T.data().createdAt.toDate():new Date}});l(w)});return()=>g()},[e,n.id]),de.jsxs(jf,{className:"p-4 bg-purple-700 rounded-lg mb-4",children:[de.jsxs("div",{className:"flex items-center justify-between mb-2",children:[de.jsxs("div",{className:"flex items-center",children:[de.jsx("span",{className:"mr-2",children:n.country||"Unknown"}),de.jsx("span",{className:"font-bold mr-2",children:n.username||"Anonymous"})]}),de.jsx("span",{className:"text-gray-400 text-sm",children:n.createdAt?c(n.createdAt):"Just now"})]}),de.jsx("p",{className:"text-white mb-2",children:n.text}),de.jsx("button",{onClick:()=>i(f=>!f),className:"text-blue-400 text-sm underline hover:text-blue-300",children:"Reply"}),t&&de.jsx(y0,{postId:e}),o.length>0&&de.jsx("div",{className:"mt-3 border-l-2 border-purple-600 pl-3",children:o.map(f=>de.jsx(_0,{comment:f,postId:e},f.id))})]})}function s2({postId:n}){const[e,t]=fe.useState([]);return fe.useEffect(()=>{if(!n)return;const i=Ao(So,`posts/${n}/comments`),o=$p(i,Kp("createdAt","asc")),l=Qp(o,c=>{const f=c.docs.map(p=>{var g;return{id:p.id,...p.data(),createdAt:(g=p.data().createdAt)!=null&&g.toDate?p.data().createdAt.toDate():new Date}});t(f)});return()=>l()},[n]),de.jsx("div",{className:"mt-4 pl-4 border-l-2 border-purple-700",children:e.length>0?e.map(i=>de.jsx(_0,{comment:i,postId:n},i.id)):de.jsx("p",{className:"text-gray-400 text-sm",children:"No comments yet. Be the first to comment!"})})}function o2({onSubmit:n}){const[e,t]=fe.useState(!1);return e?de.jsx(y0,{onSubmit:i=>{n(i),t(!1)}}):de.jsx("button",{onClick:()=>t(!0),className:"text-blue-400 text-sm underline hover:text-blue-300 mt-2",children:"Add Comment / Reply"})}function a2(){const[n,e]=fe.useState([]),[t,i]=fe.useState(""),[o,l]=fe.useState(null),[c,f]=fe.useState(""),[p,g]=fe.useState(""),_=Ao(So,"posts"),w=N=>{if(!N)return"Just now";const M=N.toDate?N.toDate():new Date(N);return new Intl.DateTimeFormat("en-US",{weekday:"short",year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(M)};fe.useEffect(()=>{const N=Qp(_,async M=>{const q=await Promise.all(M.docs.map(async H=>{const G=H.data(),ne=Ao(So,"posts",H.id,"comments"),re=await BV($p(ne,Kp("createdAt","asc")));return{id:H.id,...G,createdAt:G.createdAt?G.createdAt:new Date,comments:re.docs.map(ae=>({id:ae.id,...ae.data()}))}}));e(q)});return()=>N()},[]);const T=async()=>{if(t||o){const N=c.trim()?c:"An0n",M={text:t,image:o,username:N,country:p,createdAt:Cd()};await Pd(_,M),i(""),l(null),f(""),g("")}},P=async N=>{const M=N.target.files[0];if(M)try{const q=JD(i2,`images/${M.name}`);await XD(q,M);const H=await YD(q);l(H),console.log("Uploaded Image URL:",H)}catch(q){console.error("Error uploading image:",q)}},O=async(N,M)=>{const q=Ao(So,"posts",N,"comments"),H={text:M,username:c||"An0n",country:p||"Unknown",createdAt:Cd()};try{await Pd(q,H)}catch(G){console.error("Error adding comment:",G)}};return de.jsx("div",{className:"min-h-screen bg-purple-900 text-white p-6 flex flex-col items-center",children:de.jsxs("div",{className:"w-full max-w-2xl",children:[de.jsxs(jf,{className:"p-4 bg-purple-800 rounded-2xl shadow-md",children:[de.jsx(fE,{username:c,setUsername:f,country:p,setCountry:g}),de.jsx(bv,{placeholder:"What's on your mind?",value:t,onChange:N=>i(N.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white"}),de.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden",id:"upload"}),de.jsxs("label",{htmlFor:"upload",className:"flex items-center gap-2 cursor-pointer text-gray-300 hover:text-white",children:[de.jsx(LA,{size:20})," Upload Image"]}),o&&de.jsx("img",{src:o,alt:"Preview",className:"mt-3 rounded-lg max-h-40"}),de.jsx(Ov,{onClick:T,className:"w-full mt-4 bg-purple-600 hover:bg-purple-500",children:"Post"})]}),de.jsx("div",{className:"mt-6 space-y-4",children:n.map(N=>de.jsx(o1.div,{initial:{opacity:0},animate:{opacity:1},children:de.jsxs(jf,{className:"p-4 bg-purple-800 rounded-2xl shadow-md",children:[de.jsx("div",{className:"flex items-center justify-between mb-2",children:de.jsxs("div",{className:"flex items-center",children:[de.jsx("span",{className:"mr-2",children:N.country}),de.jsx("span",{className:"font-bold mr-2",children:N.username}),de.jsx("span",{className:"text-gray-400 text-sm",children:N.createdAt?w(N.createdAt):"Just now"})]})}),N.text&&de.jsx("p",{className:"mb-2 text-white",children:N.text}),N.image&&de.jsx("img",{src:N.image,alt:"Post",className:"rounded-lg max-h-60"}),de.jsx(s2,{postId:N.id}),de.jsx(o2,{onSubmit:M=>O(N.id,M)})]})},N.id))})]})})}xA.createRoot(document.getElementById("root")).render(de.jsx(fe.StrictMode,{children:de.jsx(a2,{})}));
