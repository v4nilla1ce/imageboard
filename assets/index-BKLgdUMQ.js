(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var tf={exports:{}},Aa={},nf={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function u0(){if(Rg)return Re;Rg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function L(F,K,pe){this.props=F,this.context=K,this.refs=O,this.updater=pe||R}L.prototype.isReactComponent={},L.prototype.setState=function(F,K){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,K,"setState")},L.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function W(){}W.prototype=L.prototype;function H(F,K,pe){this.props=F,this.context=K,this.refs=O,this.updater=pe||R}var X=H.prototype=new W;X.constructor=H,N(X,L.prototype),X.isPureReactComponent=!0;var le=Array.isArray,re=Object.prototype.hasOwnProperty,ce={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(F,K,pe){var Pe,Ce={},De=null,be=null;if(K!=null)for(Pe in K.ref!==void 0&&(be=K.ref),K.key!==void 0&&(De=""+K.key),K)re.call(K,Pe)&&!k.hasOwnProperty(Pe)&&(Ce[Pe]=K[Pe]);var Be=arguments.length-2;if(Be===1)Ce.children=pe;else if(1<Be){for(var $e=Array(Be),Et=0;Et<Be;Et++)$e[Et]=arguments[Et+2];Ce.children=$e}if(F&&F.defaultProps)for(Pe in Be=F.defaultProps,Be)Ce[Pe]===void 0&&(Ce[Pe]=Be[Pe]);return{$$typeof:n,type:F,key:De,ref:be,props:Ce,_owner:ce.current}}function P(F,K){return{$$typeof:n,type:F.type,key:K,ref:F.ref,props:F.props,_owner:F._owner}}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function M(F){var K={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(pe){return K[pe]})}var b=/\/+/g;function C(F,K){return typeof F=="object"&&F!==null&&F.key!=null?M(""+F.key):K.toString(36)}function Qe(F,K,pe,Pe,Ce){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var be=!1;if(F===null)be=!0;else switch(De){case"string":case"number":be=!0;break;case"object":switch(F.$$typeof){case n:case e:be=!0}}if(be)return be=F,Ce=Ce(be),F=Pe===""?"."+C(be,0):Pe,le(Ce)?(pe="",F!=null&&(pe=F.replace(b,"$&/")+"/"),Qe(Ce,K,pe,"",function(Et){return Et})):Ce!=null&&(V(Ce)&&(Ce=P(Ce,pe+(!Ce.key||be&&be.key===Ce.key?"":(""+Ce.key).replace(b,"$&/")+"/")+F)),K.push(Ce)),1;if(be=0,Pe=Pe===""?".":Pe+":",le(F))for(var Be=0;Be<F.length;Be++){De=F[Be];var $e=Pe+C(De,Be);be+=Qe(De,K,pe,$e,Ce)}else if($e=S(F),typeof $e=="function")for(F=$e.call(F),Be=0;!(De=F.next()).done;)De=De.value,$e=Pe+C(De,Be++),be+=Qe(De,K,pe,$e,Ce);else if(De==="object")throw K=String(F),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return be}function Pt(F,K,pe){if(F==null)return F;var Pe=[],Ce=0;return Qe(F,Pe,"","",function(De){return K.call(pe,De,Ce++)}),Pe}function Ct(F){if(F._status===-1){var K=F._result;K=K(),K.then(function(pe){(F._status===0||F._status===-1)&&(F._status=1,F._result=pe)},function(pe){(F._status===0||F._status===-1)&&(F._status=2,F._result=pe)}),F._status===-1&&(F._status=0,F._result=K)}if(F._status===1)return F._result.default;throw F._result}var Ae={current:null},ee={transition:null},de={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:ee,ReactCurrentOwner:ce};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:Pt,forEach:function(F,K,pe){Pt(F,function(){K.apply(this,arguments)},pe)},count:function(F){var K=0;return Pt(F,function(){K++}),K},toArray:function(F){return Pt(F,function(K){return K})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Re.Component=L,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=H,Re.StrictMode=i,Re.Suspense=p,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Re.act=ne,Re.cloneElement=function(F,K,pe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Pe=N({},F.props),Ce=F.key,De=F.ref,be=F._owner;if(K!=null){if(K.ref!==void 0&&(De=K.ref,be=ce.current),K.key!==void 0&&(Ce=""+K.key),F.type&&F.type.defaultProps)var Be=F.type.defaultProps;for($e in K)re.call(K,$e)&&!k.hasOwnProperty($e)&&(Pe[$e]=K[$e]===void 0&&Be!==void 0?Be[$e]:K[$e])}var $e=arguments.length-2;if($e===1)Pe.children=pe;else if(1<$e){Be=Array($e);for(var Et=0;Et<$e;Et++)Be[Et]=arguments[Et+2];Pe.children=Be}return{$$typeof:n,type:F.type,key:Ce,ref:De,props:Pe,_owner:be}},Re.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Re.createElement=A,Re.createFactory=function(F){var K=A.bind(null,F);return K.type=F,K},Re.createRef=function(){return{current:null}},Re.forwardRef=function(F){return{$$typeof:f,render:F}},Re.isValidElement=V,Re.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Ct}},Re.memo=function(F,K){return{$$typeof:y,type:F,compare:K===void 0?null:K}},Re.startTransition=function(F){var K=ee.transition;ee.transition={};try{F()}finally{ee.transition=K}},Re.unstable_act=ne,Re.useCallback=function(F,K){return Ae.current.useCallback(F,K)},Re.useContext=function(F){return Ae.current.useContext(F)},Re.useDebugValue=function(){},Re.useDeferredValue=function(F){return Ae.current.useDeferredValue(F)},Re.useEffect=function(F,K){return Ae.current.useEffect(F,K)},Re.useId=function(){return Ae.current.useId()},Re.useImperativeHandle=function(F,K,pe){return Ae.current.useImperativeHandle(F,K,pe)},Re.useInsertionEffect=function(F,K){return Ae.current.useInsertionEffect(F,K)},Re.useLayoutEffect=function(F,K){return Ae.current.useLayoutEffect(F,K)},Re.useMemo=function(F,K){return Ae.current.useMemo(F,K)},Re.useReducer=function(F,K,pe){return Ae.current.useReducer(F,K,pe)},Re.useRef=function(F){return Ae.current.useRef(F)},Re.useState=function(F){return Ae.current.useState(F)},Re.useSyncExternalStore=function(F,K,pe){return Ae.current.useSyncExternalStore(F,K,pe)},Re.useTransition=function(){return Ae.current.useTransition()},Re.version="18.3.1",Re}var xg;function fd(){return xg||(xg=1,nf.exports=u0()),nf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function c0(){if(Vg)return Aa;Vg=1;var n=fd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var _,w={},S=null,R=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(R=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(w[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:f,key:S,ref:R,props:w,_owner:o.current}}return Aa.Fragment=t,Aa.jsx=c,Aa.jsxs=c,Aa}var kg;function h0(){return kg||(kg=1,tf.exports=c0()),tf.exports}var me=h0(),fe=fd(),Au={},rf={exports:{}},rn={},sf={exports:{}},of={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function f0(){return Dg||(Dg=1,function(n){function e(ee,de){var ne=ee.length;ee.push(de);e:for(;0<ne;){var F=ne-1>>>1,K=ee[F];if(0<o(K,de))ee[F]=de,ee[ne]=K,ne=F;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var de=ee[0],ne=ee.pop();if(ne!==de){ee[0]=ne;e:for(var F=0,K=ee.length,pe=K>>>1;F<pe;){var Pe=2*(F+1)-1,Ce=ee[Pe],De=Pe+1,be=ee[De];if(0>o(Ce,ne))De<K&&0>o(be,Ce)?(ee[F]=be,ee[De]=ne,F=De):(ee[F]=Ce,ee[Pe]=ne,F=Pe);else if(De<K&&0>o(be,ne))ee[F]=be,ee[De]=ne,F=De;else break e}}return de}function o(ee,de){var ne=ee.sortIndex-de.sortIndex;return ne!==0?ne:ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],y=[],_=1,w=null,S=3,R=!1,N=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(ee){for(var de=t(y);de!==null;){if(de.callback===null)i(y);else if(de.startTime<=ee)i(y),de.sortIndex=de.expirationTime,e(p,de);else break;de=t(y)}}function le(ee){if(O=!1,X(ee),!N)if(t(p)!==null)N=!0,Ct(re);else{var de=t(y);de!==null&&Ae(le,de.startTime-ee)}}function re(ee,de){N=!1,O&&(O=!1,W(A),A=-1),R=!0;var ne=S;try{for(X(de),w=t(p);w!==null&&(!(w.expirationTime>de)||ee&&!M());){var F=w.callback;if(typeof F=="function"){w.callback=null,S=w.priorityLevel;var K=F(w.expirationTime<=de);de=n.unstable_now(),typeof K=="function"?w.callback=K:w===t(p)&&i(p),X(de)}else i(p);w=t(p)}if(w!==null)var pe=!0;else{var Pe=t(y);Pe!==null&&Ae(le,Pe.startTime-de),pe=!1}return pe}finally{w=null,S=ne,R=!1}}var ce=!1,k=null,A=-1,P=5,V=-1;function M(){return!(n.unstable_now()-V<P)}function b(){if(k!==null){var ee=n.unstable_now();V=ee;var de=!0;try{de=k(!0,ee)}finally{de?C():(ce=!1,k=null)}}else ce=!1}var C;if(typeof H=="function")C=function(){H(b)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Pt=Qe.port2;Qe.port1.onmessage=b,C=function(){Pt.postMessage(null)}}else C=function(){L(b,0)};function Ct(ee){k=ee,ce||(ce=!0,C())}function Ae(ee,de){A=L(function(){ee(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){N||R||(N=!0,Ct(re))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ee){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var ne=S;S=de;try{return ee()}finally{S=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ne=S;S=ee;try{return de()}finally{S=ne}},n.unstable_scheduleCallback=function(ee,de,ne){var F=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?F+ne:F):ne=F,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,ee={id:_++,callback:de,priorityLevel:ee,startTime:ne,expirationTime:K,sortIndex:-1},ne>F?(ee.sortIndex=ne,e(y,ee),t(p)===null&&ee===t(y)&&(O?(W(A),A=-1):O=!0,Ae(le,ne-F))):(ee.sortIndex=K,e(p,ee),N||R||(N=!0,Ct(re))),ee},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ee){var de=S;return function(){var ne=S;S=de;try{return ee.apply(this,arguments)}finally{S=ne}}}}(of)),of}var Ng;function d0(){return Ng||(Ng=1,sf.exports=f0()),sf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function p0(){if(Mg)return rn;Mg=1;var n=fd(),e=d0();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function S(r){return p.call(w,r)?!0:p.call(_,r)?!1:y.test(r)?w[r]=!0:(_[r]=!0,!1)}function R(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N(r,s,a,h){if(s===null||typeof s>"u"||R(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function O(r,s,a,h,d,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new O(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];L[s]=new O(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new O(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new O(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new O(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new O(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new O(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new O(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new O(r,5,!1,r.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function H(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(W,H);L[s]=new O(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(W,H);L[s]=new O(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(W,H);L[s]=new O(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new O(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new O(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,a,h){var d=L.hasOwnProperty(s)?L[s]:null;(d!==null?d.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,a,d,h)&&(a=null),h||d===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var le=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ce=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),M=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),ee=Symbol.iterator;function de(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Object.assign,F;function K(r){if(F===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+r}var pe=!1;function Pe(r,s){if(!r||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(r,[],s)}else{try{s.call()}catch(z){h=z}r.call(s.prototype)}else{try{throw Error()}catch(z){h=z}r()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),g=h.stack.split(`
`),E=d.length-1,I=g.length-1;1<=E&&0<=I&&d[E]!==g[I];)I--;for(;1<=E&&0<=I;E--,I--)if(d[E]!==g[I]){if(E!==1||I!==1)do if(E--,I--,0>I||d[E]!==g[I]){var x=`
`+d[E].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=E&&0<=I);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?K(r):""}function Ce(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case ce:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Qe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case M:return(r.displayName||"Context")+".Consumer";case V:return(r._context.displayName||"Context")+".Provider";case b:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Pt:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case Ct:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}function be(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $e(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Et(r){var s=$e(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){h=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function cr(r){r._valueTracker||(r._valueTracker=Et(r))}function us(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=$e(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function Lr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ti(r,s){var a=s.checked;return ne({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function cs(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Vo(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function ko(r,s){Vo(r,s);var a=Be(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?hs(r,s.type,a):s.hasOwnProperty("defaultValue")&&hs(r,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function ul(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function hs(r,s,a){(s!=="number"||Lr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var hr=Array.isArray;function fr(r,s,a,h){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Do(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function fs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(hr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Be(a)}}function ds(r,s){var a=Be(s.value),h=Be(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function No(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function ft(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?ft(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var dr,Mo=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,d)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=dr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Or(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ai=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(r){Ai.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Si[s]=Si[r]})});function Lo(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Si.hasOwnProperty(r)&&Si[r]?(""+s).trim():s+"px"}function Oo(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Lo(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var Fo=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bo(r,s){if(s){if(Fo[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Bo(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function ps(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ms=null,yn=null,qn=null;function gs(r){if(r=ua(r)){if(typeof ms!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Bl(s),ms(r.stateNode,r.type,s))}}function Kn(r){yn?qn?qn.push(r):qn=[r]:yn=r}function Uo(){if(yn){var r=yn,s=qn;if(qn=yn=null,gs(r),s)for(r=0;r<s.length;r++)gs(s[r])}}function Pi(r,s){return r(s)}function jo(){}var pr=!1;function zo(r,s,a){if(pr)return r(s,a);pr=!0;try{return Pi(r,s,a)}finally{pr=!1,(yn!==null||qn!==null)&&(jo(),Uo())}}function st(r,s){var a=r.stateNode;if(a===null)return null;var h=Bl(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var ys=!1;if(f)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){ys=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{ys=!1}function Ci(r,s,a,h,d,g,E,I,x){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Q){this.onError(Q)}}var Ri=!1,vs=null,Vn=!1,$o=null,xc={onError:function(r){Ri=!0,vs=r}};function _s(r,s,a,h,d,g,E,I,x){Ri=!1,vs=null,Ci.apply(xc,arguments)}function cl(r,s,a,h,d,g,E,I,x){if(_s.apply(this,arguments),Ri){if(Ri){var z=vs;Ri=!1,vs=null}else throw Error(t(198));Vn||(Vn=!0,$o=z)}}function kn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function xi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Dn(r){if(kn(r)!==r)throw Error(t(188))}function hl(r){var s=r.alternate;if(!s){if(s=kn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Dn(d),r;if(g===h)return Dn(d),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=g;else{for(var E=!1,I=d.child;I;){if(I===a){E=!0,a=d,h=g;break}if(I===h){E=!0,h=d,a=g;break}I=I.sibling}if(!E){for(I=g.child;I;){if(I===a){E=!0,a=g,h=d;break}if(I===h){E=!0,h=g,a=d;break}I=I.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Wo(r){return r=hl(r),r!==null?Es(r):null}function Es(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Es(r);if(s!==null)return s;r=r.sibling}return null}var ws=e.unstable_scheduleCallback,qo=e.unstable_cancelCallback,fl=e.unstable_shouldYield,Vc=e.unstable_requestPaint,We=e.unstable_now,dl=e.unstable_getCurrentPriorityLevel,Vi=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,Ko=e.unstable_LowPriority,pl=e.unstable_IdlePriority,ki=null,an=null;function ml(r){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(ki,r,void 0,(r.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:yl,Ho=Math.log,gl=Math.LN2;function yl(r){return r>>>=0,r===0?32:31-(Ho(r)/gl|0)|0}var Ts=64,Ss=4194304;function br(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Di(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var I=E&~d;I!==0?h=br(I):(g&=E,g!==0&&(h=br(g)))}else E=a&~d,E!==0?h=br(E):g!==0&&(h=br(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&d)&&(d=h&-h,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if(h&4&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-qt(s),d=1<<a,h|=r[a],s&=~d;return h}function kc(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-qt(g),I=1<<E,x=d[E];x===-1?(!(I&a)||I&h)&&(d[E]=kc(I,s)):x<=s&&(r.expiredLanes|=I),g&=~I}}function ln(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ni(){var r=Ts;return Ts<<=1,!(Ts&4194240)&&(Ts=64),r}function Br(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Ur(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-qt(s),r[s]=a}function ze(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-qt(a),g=1<<d;s[d]=0,h[d]=-1,r[d]=-1,a&=~g}}function jr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-qt(a),d=1<<h;d&s|r[h]&s&&(r[h]|=s),a&=~d}}var Ve=0;function zr(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var vl,As,_l,El,wl,Go=!1,Hn=[],Rt=null,Nn=null,Mn=null,$r=new Map,_n=new Map,Gn=[],Dc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tl(r,s){switch(r){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":$r.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Xt(r,s,a,h,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[d]},s!==null&&(s=ua(s),s!==null&&As(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Nc(r,s,a,h,d){switch(s){case"focusin":return Rt=Xt(Rt,r,s,a,h,d),!0;case"dragenter":return Nn=Xt(Nn,r,s,a,h,d),!0;case"mouseover":return Mn=Xt(Mn,r,s,a,h,d),!0;case"pointerover":var g=d.pointerId;return $r.set(g,Xt($r.get(g)||null,r,s,a,h,d)),!0;case"gotpointercapture":return g=d.pointerId,_n.set(g,Xt(_n.get(g)||null,r,s,a,h,d)),!0}return!1}function Sl(r){var s=bi(r.target);if(s!==null){var a=kn(s);if(a!==null){if(s=a.tag,s===13){if(s=xi(a),s!==null){r.blockedOn=s,wl(r.priority,function(){_l(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Is(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Ii=h,a.target.dispatchEvent(h),Ii=null}else return s=ua(a),s!==null&&As(s),r.blockedOn=a,!1;s.shift()}return!0}function Mi(r,s,a){gr(r)&&a.delete(s)}function Al(){Go=!1,Rt!==null&&gr(Rt)&&(Rt=null),Nn!==null&&gr(Nn)&&(Nn=null),Mn!==null&&gr(Mn)&&(Mn=null),$r.forEach(Mi),_n.forEach(Mi)}function Ln(r,s){r.blockedOn===s&&(r.blockedOn=null,Go||(Go=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Al)))}function On(r){function s(d){return Ln(d,r)}if(0<Hn.length){Ln(Hn[0],r);for(var a=1;a<Hn.length;a++){var h=Hn[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Rt!==null&&Ln(Rt,r),Nn!==null&&Ln(Nn,r),Mn!==null&&Ln(Mn,r),$r.forEach(s),_n.forEach(s),a=0;a<Gn.length;a++)h=Gn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Gn.length&&(a=Gn[0],a.blockedOn===null);)Sl(a),a.blockedOn===null&&Gn.shift()}var yr=le.ReactCurrentBatchConfig,Wr=!0;function Xe(r,s,a,h){var d=Ve,g=yr.transition;yr.transition=null;try{Ve=1,Qo(r,s,a,h)}finally{Ve=d,yr.transition=g}}function Mc(r,s,a,h){var d=Ve,g=yr.transition;yr.transition=null;try{Ve=4,Qo(r,s,a,h)}finally{Ve=d,yr.transition=g}}function Qo(r,s,a,h){if(Wr){var d=Is(r,s,a,h);if(d===null)qc(r,s,h,Li,a),Tl(r,h);else if(Nc(d,r,s,a,h))h.stopPropagation();else if(Tl(r,h),s&4&&-1<Dc.indexOf(r)){for(;d!==null;){var g=ua(d);if(g!==null&&vl(g),g=Is(r,s,a,h),g===null&&qc(r,s,h,Li,a),g===d)break;d=g}d!==null&&h.stopPropagation()}else qc(r,s,h,null,a)}}var Li=null;function Is(r,s,a,h){if(Li=null,r=ps(h),r=bi(r),r!==null)if(s=kn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=xi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Li=r,null}function Xo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dl()){case Vi:return 1;case Fr:return 4;case vn:case Ko:return 16;case pl:return 536870912;default:return 16}default:return 16}}var un=null,Ps=null,Yt=null;function Yo(){if(Yt)return Yt;var r,s=Ps,a=s.length,h,d="value"in un?un.value:un.textContent,g=d.length;for(r=0;r<a&&s[r]===d[r];r++);var E=a-r;for(h=1;h<=E&&s[a-h]===d[g-h];h++);return Yt=d.slice(r,1<h?1-h:void 0)}function Cs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Qn(){return!0}function Jo(){return!1}function xt(r){function s(a,h,d,g,E){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(a=r[I],this[I]=a?a(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Qn:Jo,this.isPropagationStopped=Jo,this}return ne(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),s}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=xt(Fn),Xn=ne({},Fn,{view:0,detail:0}),Lc=xt(Xn),xs,vr,qr,Oi=ne({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qr&&(qr&&r.type==="mousemove"?(xs=r.screenX-qr.screenX,vr=r.screenY-qr.screenY):vr=xs=0,qr=r),xs)},movementY:function(r){return"movementY"in r?r.movementY:vr}}),Vs=xt(Oi),Zo=ne({},Oi,{dataTransfer:0}),Il=xt(Zo),ks=ne({},Xn,{relatedTarget:0}),Ds=xt(ks),Pl=ne({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),_r=xt(Pl),Cl=ne({},Fn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Rl=xt(Cl),xl=ne({},Fn,{data:0}),ea=xt(xl),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Vl[r])?!!s[r]:!1}function Yn(){return kl}var u=ne({},Xn,{key:function(r){if(r.key){var s=Ns[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Cs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yn,charCode:function(r){return r.type==="keypress"?Cs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=xt(u),v=ne({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=xt(v),B=ne({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yn}),$=xt(B),te=ne({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=xt(te),pt=ne({},Oi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=xt(pt),wt=[9,13,27,32],ut=f&&"CompositionEvent"in window,En=null;f&&"documentMode"in document&&(En=document.documentMode);var cn=f&&"TextEvent"in window&&!En,Fi=f&&(!ut||En&&8<En&&11>=En),Ms=" ",Tp=!1;function Sp(r,s){switch(r){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ls=!1;function aT(r,s){switch(r){case"compositionend":return Ap(s);case"keypress":return s.which!==32?null:(Tp=!0,Ms);case"textInput":return r=s.data,r===Ms&&Tp?null:r;default:return null}}function lT(r,s){if(Ls)return r==="compositionend"||!ut&&Sp(r,s)?(r=Yo(),Yt=Ps=un=null,Ls=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Fi&&s.locale!=="ko"?null:s.data;default:return null}}var uT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!uT[r.type]:s==="textarea"}function Pp(r,s,a,h){Kn(h),s=Ol(s,"onChange"),0<s.length&&(a=new Rs("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var ta=null,na=null;function cT(r){Wp(r,0)}function Dl(r){var s=Us(r);if(us(s))return r}function hT(r,s){if(r==="change")return s}var Cp=!1;if(f){var Oc;if(f){var Fc="oninput"in document;if(!Fc){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),Fc=typeof Rp.oninput=="function"}Oc=Fc}else Oc=!1;Cp=Oc&&(!document.documentMode||9<document.documentMode)}function xp(){ta&&(ta.detachEvent("onpropertychange",Vp),na=ta=null)}function Vp(r){if(r.propertyName==="value"&&Dl(na)){var s=[];Pp(s,na,r,ps(r)),zo(cT,s)}}function fT(r,s,a){r==="focusin"?(xp(),ta=s,na=a,ta.attachEvent("onpropertychange",Vp)):r==="focusout"&&xp()}function dT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Dl(na)}function pT(r,s){if(r==="click")return Dl(s)}function mT(r,s){if(r==="input"||r==="change")return Dl(s)}function gT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var bn=typeof Object.is=="function"?Object.is:gT;function ra(r,s){if(bn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(s,d)||!bn(r[d],s[d]))return!1}return!0}function kp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Dp(r,s){var a=kp(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kp(a)}}function Np(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Np(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Mp(){for(var r=window,s=Lr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Lr(r.document)}return s}function bc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function yT(r){var s=Mp(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(h!==null&&bc(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,g=Math.min(h.start,d);h=h.end===void 0?g:Math.min(h.end,d),!r.extend&&g>h&&(d=h,h=g,g=d),d=Dp(a,g);var E=Dp(a,h);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var vT=f&&"documentMode"in document&&11>=document.documentMode,Os=null,Bc=null,ia=null,Uc=!1;function Lp(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uc||Os==null||Os!==Lr(h)||(h=Os,"selectionStart"in h&&bc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ia&&ra(ia,h)||(ia=h,h=Ol(Bc,"onSelect"),0<h.length&&(s=new Rs("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=Os)))}function Nl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Fs={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},jc={},Op={};f&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Ml(r){if(jc[r])return jc[r];if(!Fs[r])return r;var s=Fs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Op)return jc[r]=s[a];return r}var Fp=Ml("animationend"),bp=Ml("animationiteration"),Bp=Ml("animationstart"),Up=Ml("transitionend"),jp=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(r,s){jp.set(r,s),l(s,[r])}for(var zc=0;zc<zp.length;zc++){var $c=zp[zc],_T=$c.toLowerCase(),ET=$c[0].toUpperCase()+$c.slice(1);Kr(_T,"on"+ET)}Kr(Fp,"onAnimationEnd"),Kr(bp,"onAnimationIteration"),Kr(Bp,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(Up,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wT=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function $p(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,cl(h,s,void 0,r),r.currentTarget=null}function Wp(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var E=h.length-1;0<=E;E--){var I=h[E],x=I.instance,z=I.currentTarget;if(I=I.listener,x!==g&&d.isPropagationStopped())break e;$p(d,I,z),g=x}else for(E=0;E<h.length;E++){if(I=h[E],x=I.instance,z=I.currentTarget,I=I.listener,x!==g&&d.isPropagationStopped())break e;$p(d,I,z),g=x}}}if(Vn)throw r=$o,Vn=!1,$o=null,r}function Ke(r,s){var a=s[Yc];a===void 0&&(a=s[Yc]=new Set);var h=r+"__bubble";a.has(h)||(qp(s,r,2,!1),a.add(h))}function Wc(r,s,a){var h=0;s&&(h|=4),qp(a,r,h,s)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function oa(r){if(!r[Ll]){r[Ll]=!0,i.forEach(function(a){a!=="selectionchange"&&(wT.has(a)||Wc(a,!1,r),Wc(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ll]||(s[Ll]=!0,Wc("selectionchange",!1,s))}}function qp(r,s,a,h){switch(Xo(s)){case 1:var d=Xe;break;case 4:d=Mc;break;default:d=Qo}a=d.bind(null,s,a,r),d=void 0,!ys||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function qc(r,s,a,h,d){var g=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var I=h.stateNode.containerInfo;if(I===d||I.nodeType===8&&I.parentNode===d)break;if(E===4)for(E=h.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;E=E.return}for(;I!==null;){if(E=bi(I),E===null)return;if(x=E.tag,x===5||x===6){h=g=E;continue e}I=I.parentNode}}h=h.return}zo(function(){var z=g,Q=ps(a),J=[];e:{var G=jp.get(r);if(G!==void 0){var ie=Rs,ae=r;switch(r){case"keypress":if(Cs(a)===0)break e;case"keydown":case"keyup":ie=m;break;case"focusin":ae="focus",ie=Ds;break;case"focusout":ae="blur",ie=Ds;break;case"beforeblur":case"afterblur":ie=Ds;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=$;break;case Fp:case bp:case Bp:ie=_r;break;case Up:ie=je;break;case"scroll":ie=Lc;break;case"wheel":ie=Ne;break;case"copy":case"cut":case"paste":ie=Rl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=T}var ue=(s&4)!==0,ot=!ue&&r==="scroll",U=ue?G!==null?G+"Capture":null:G;ue=[];for(var D=z,j;D!==null;){j=D;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,U!==null&&(Z=st(D,U),Z!=null&&ue.push(aa(D,Z,j)))),ot)break;D=D.return}0<ue.length&&(G=new ie(G,ae,null,a,Q),J.push({event:G,listeners:ue}))}}if(!(s&7)){e:{if(G=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",G&&a!==Ii&&(ae=a.relatedTarget||a.fromElement)&&(bi(ae)||ae[Er]))break e;if((ie||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ae=a.relatedTarget||a.toElement,ie=z,ae=ae?bi(ae):null,ae!==null&&(ot=kn(ae),ae!==ot||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(ie=null,ae=z),ie!==ae)){if(ue=Vs,Z="onMouseLeave",U="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(ue=T,Z="onPointerLeave",U="onPointerEnter",D="pointer"),ot=ie==null?G:Us(ie),j=ae==null?G:Us(ae),G=new ue(Z,D+"leave",ie,a,Q),G.target=ot,G.relatedTarget=j,Z=null,bi(Q)===z&&(ue=new ue(U,D+"enter",ae,a,Q),ue.target=j,ue.relatedTarget=ot,Z=ue),ot=Z,ie&&ae)t:{for(ue=ie,U=ae,D=0,j=ue;j;j=bs(j))D++;for(j=0,Z=U;Z;Z=bs(Z))j++;for(;0<D-j;)ue=bs(ue),D--;for(;0<j-D;)U=bs(U),j--;for(;D--;){if(ue===U||U!==null&&ue===U.alternate)break t;ue=bs(ue),U=bs(U)}ue=null}else ue=null;ie!==null&&Kp(J,G,ie,ue,!1),ae!==null&&ot!==null&&Kp(J,ot,ae,ue,!0)}}e:{if(G=z?Us(z):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var he=hT;else if(Ip(G))if(Cp)he=mT;else{he=dT;var ye=fT}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(he=pT);if(he&&(he=he(r,z))){Pp(J,he,a,Q);break e}ye&&ye(r,G,z),r==="focusout"&&(ye=G._wrapperState)&&ye.controlled&&G.type==="number"&&hs(G,"number",G.value)}switch(ye=z?Us(z):window,r){case"focusin":(Ip(ye)||ye.contentEditable==="true")&&(Os=ye,Bc=z,ia=null);break;case"focusout":ia=Bc=Os=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,Lp(J,a,Q);break;case"selectionchange":if(vT)break;case"keydown":case"keyup":Lp(J,a,Q)}var ve;if(ut)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ls?Sp(r,a)&&(we="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Fi&&a.locale!=="ko"&&(Ls||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ls&&(ve=Yo()):(un=Q,Ps="value"in un?un.value:un.textContent,Ls=!0)),ye=Ol(z,we),0<ye.length&&(we=new ea(we,r,null,a,Q),J.push({event:we,listeners:ye}),ve?we.data=ve:(ve=Ap(a),ve!==null&&(we.data=ve)))),(ve=cn?aT(r,a):lT(r,a))&&(z=Ol(z,"onBeforeInput"),0<z.length&&(Q=new ea("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:z}),Q.data=ve))}Wp(J,s)})}function aa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Ol(r,s){for(var a=s+"Capture",h=[];r!==null;){var d=r,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=st(r,a),g!=null&&h.unshift(aa(r,g,d)),g=st(r,s),g!=null&&h.push(aa(r,g,d))),r=r.return}return h}function bs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Kp(r,s,a,h,d){for(var g=s._reactName,E=[];a!==null&&a!==h;){var I=a,x=I.alternate,z=I.stateNode;if(x!==null&&x===h)break;I.tag===5&&z!==null&&(I=z,d?(x=st(a,g),x!=null&&E.unshift(aa(a,x,I))):d||(x=st(a,g),x!=null&&E.push(aa(a,x,I)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var TT=/\r\n?/g,ST=/\u0000|\uFFFD/g;function Hp(r){return(typeof r=="string"?r:""+r).replace(TT,`
`).replace(ST,"")}function Fl(r,s,a){if(s=Hp(s),Hp(r)!==s&&a)throw Error(t(425))}function bl(){}var Kc=null,Hc=null;function Gc(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,AT=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,IT=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(r){return Gp.resolve(null).then(r).catch(PT)}:Qc;function PT(r){setTimeout(function(){throw r})}function Xc(r,s){var a=s,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),On(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);On(s)}function Hr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Qp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Bs,la="__reactProps$"+Bs,Er="__reactContainer$"+Bs,Yc="__reactEvents$"+Bs,CT="__reactListeners$"+Bs,RT="__reactHandles$"+Bs;function bi(r){var s=r[Jn];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Er]||a[Jn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Qp(r);r!==null;){if(a=r[Jn])return a;r=Qp(r)}return s}r=a,a=r.parentNode}return null}function ua(r){return r=r[Jn]||r[Er],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Us(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Bl(r){return r[la]||null}var Jc=[],js=-1;function Gr(r){return{current:r}}function He(r){0>js||(r.current=Jc[js],Jc[js]=null,js--)}function qe(r,s){js++,Jc[js]=r.current,r.current=s}var Qr={},Ot=Gr(Qr),Jt=Gr(!1),Bi=Qr;function zs(r,s){var a=r.type.contextTypes;if(!a)return Qr;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(r){return r=r.childContextTypes,r!=null}function Ul(){He(Jt),He(Ot)}function Xp(r,s,a){if(Ot.current!==Qr)throw Error(t(168));qe(Ot,s),qe(Jt,a)}function Yp(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in s))throw Error(t(108,be(r)||"Unknown",d));return ne({},a,h)}function jl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Qr,Bi=Ot.current,qe(Ot,r),qe(Jt,Jt.current),!0}function Jp(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Yp(r,s,Bi),h.__reactInternalMemoizedMergedChildContext=r,He(Jt),He(Ot),qe(Ot,r)):He(Jt),qe(Jt,a)}var wr=null,zl=!1,Zc=!1;function Zp(r){wr===null?wr=[r]:wr.push(r)}function xT(r){zl=!0,Zp(r)}function Xr(){if(!Zc&&wr!==null){Zc=!0;var r=0,s=Ve;try{var a=wr;for(Ve=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}wr=null,zl=!1}catch(d){throw wr!==null&&(wr=wr.slice(r+1)),ws(Vi,Xr),d}finally{Ve=s,Zc=!1}}return null}var $s=[],Ws=0,$l=null,Wl=0,wn=[],Tn=0,Ui=null,Tr=1,Sr="";function ji(r,s){$s[Ws++]=Wl,$s[Ws++]=$l,$l=r,Wl=s}function em(r,s,a){wn[Tn++]=Tr,wn[Tn++]=Sr,wn[Tn++]=Ui,Ui=r;var h=Tr;r=Sr;var d=32-qt(h)-1;h&=~(1<<d),a+=1;var g=32-qt(s)+d;if(30<g){var E=d-d%5;g=(h&(1<<E)-1).toString(32),h>>=E,d-=E,Tr=1<<32-qt(s)+d|a<<d|h,Sr=g+r}else Tr=1<<g|a<<d|h,Sr=r}function eh(r){r.return!==null&&(ji(r,1),em(r,1,0))}function th(r){for(;r===$l;)$l=$s[--Ws],$s[Ws]=null,Wl=$s[--Ws],$s[Ws]=null;for(;r===Ui;)Ui=wn[--Tn],wn[Tn]=null,Sr=wn[--Tn],wn[Tn]=null,Tr=wn[--Tn],wn[Tn]=null}var hn=null,fn=null,Ye=!1,Bn=null;function tm(r,s){var a=Pn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function nm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,hn=r,fn=Hr(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,hn=r,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ui!==null?{id:Tr,overflow:Sr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Pn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,hn=r,fn=null,!0):!1;default:return!1}}function nh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function rh(r){if(Ye){var s=fn;if(s){var a=s;if(!nm(r,s)){if(nh(r))throw Error(t(418));s=Hr(a.nextSibling);var h=hn;s&&nm(r,s)?tm(h,a):(r.flags=r.flags&-4097|2,Ye=!1,hn=r)}}else{if(nh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ye=!1,hn=r}}}function rm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;hn=r}function ql(r){if(r!==hn)return!1;if(!Ye)return rm(r),Ye=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Gc(r.type,r.memoizedProps)),s&&(s=fn)){if(nh(r))throw im(),Error(t(418));for(;s;)tm(r,s),s=Hr(s.nextSibling)}if(rm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){fn=Hr(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}fn=null}}else fn=hn?Hr(r.stateNode.nextSibling):null;return!0}function im(){for(var r=fn;r;)r=Hr(r.nextSibling)}function qs(){fn=hn=null,Ye=!1}function ih(r){Bn===null?Bn=[r]:Bn.push(r)}var VT=le.ReactCurrentBatchConfig;function ca(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var I=d.refs;E===null?delete I[g]:I[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Kl(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function sm(r){var s=r._init;return s(r._payload)}function om(r){function s(U,D){if(r){var j=U.deletions;j===null?(U.deletions=[D],U.flags|=16):j.push(D)}}function a(U,D){if(!r)return null;for(;D!==null;)s(U,D),D=D.sibling;return null}function h(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function d(U,D){return U=ii(U,D),U.index=0,U.sibling=null,U}function g(U,D,j){return U.index=j,r?(j=U.alternate,j!==null?(j=j.index,j<D?(U.flags|=2,D):j):(U.flags|=2,D)):(U.flags|=1048576,D)}function E(U){return r&&U.alternate===null&&(U.flags|=2),U}function I(U,D,j,Z){return D===null||D.tag!==6?(D=Qh(j,U.mode,Z),D.return=U,D):(D=d(D,j),D.return=U,D)}function x(U,D,j,Z){var he=j.type;return he===k?Q(U,D,j.props.children,Z,j.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ct&&sm(he)===D.type)?(Z=d(D,j.props),Z.ref=ca(U,D,j),Z.return=U,Z):(Z=gu(j.type,j.key,j.props,null,U.mode,Z),Z.ref=ca(U,D,j),Z.return=U,Z)}function z(U,D,j,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=Xh(j,U.mode,Z),D.return=U,D):(D=d(D,j.children||[]),D.return=U,D)}function Q(U,D,j,Z,he){return D===null||D.tag!==7?(D=Qi(j,U.mode,Z,he),D.return=U,D):(D=d(D,j),D.return=U,D)}function J(U,D,j){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Qh(""+D,U.mode,j),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case re:return j=gu(D.type,D.key,D.props,null,U.mode,j),j.ref=ca(U,null,D),j.return=U,j;case ce:return D=Xh(D,U.mode,j),D.return=U,D;case Ct:var Z=D._init;return J(U,Z(D._payload),j)}if(hr(D)||de(D))return D=Qi(D,U.mode,j,null),D.return=U,D;Kl(U,D)}return null}function G(U,D,j,Z){var he=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return he!==null?null:I(U,D,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case re:return j.key===he?x(U,D,j,Z):null;case ce:return j.key===he?z(U,D,j,Z):null;case Ct:return he=j._init,G(U,D,he(j._payload),Z)}if(hr(j)||de(j))return he!==null?null:Q(U,D,j,Z,null);Kl(U,j)}return null}function ie(U,D,j,Z,he){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(j)||null,I(D,U,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case re:return U=U.get(Z.key===null?j:Z.key)||null,x(D,U,Z,he);case ce:return U=U.get(Z.key===null?j:Z.key)||null,z(D,U,Z,he);case Ct:var ye=Z._init;return ie(U,D,j,ye(Z._payload),he)}if(hr(Z)||de(Z))return U=U.get(j)||null,Q(D,U,Z,he,null);Kl(D,Z)}return null}function ae(U,D,j,Z){for(var he=null,ye=null,ve=D,we=D=0,At=null;ve!==null&&we<j.length;we++){ve.index>we?(At=ve,ve=null):At=ve.sibling;var Fe=G(U,ve,j[we],Z);if(Fe===null){ve===null&&(ve=At);break}r&&ve&&Fe.alternate===null&&s(U,ve),D=g(Fe,D,we),ye===null?he=Fe:ye.sibling=Fe,ye=Fe,ve=At}if(we===j.length)return a(U,ve),Ye&&ji(U,we),he;if(ve===null){for(;we<j.length;we++)ve=J(U,j[we],Z),ve!==null&&(D=g(ve,D,we),ye===null?he=ve:ye.sibling=ve,ye=ve);return Ye&&ji(U,we),he}for(ve=h(U,ve);we<j.length;we++)At=ie(ve,U,we,j[we],Z),At!==null&&(r&&At.alternate!==null&&ve.delete(At.key===null?we:At.key),D=g(At,D,we),ye===null?he=At:ye.sibling=At,ye=At);return r&&ve.forEach(function(si){return s(U,si)}),Ye&&ji(U,we),he}function ue(U,D,j,Z){var he=de(j);if(typeof he!="function")throw Error(t(150));if(j=he.call(j),j==null)throw Error(t(151));for(var ye=he=null,ve=D,we=D=0,At=null,Fe=j.next();ve!==null&&!Fe.done;we++,Fe=j.next()){ve.index>we?(At=ve,ve=null):At=ve.sibling;var si=G(U,ve,Fe.value,Z);if(si===null){ve===null&&(ve=At);break}r&&ve&&si.alternate===null&&s(U,ve),D=g(si,D,we),ye===null?he=si:ye.sibling=si,ye=si,ve=At}if(Fe.done)return a(U,ve),Ye&&ji(U,we),he;if(ve===null){for(;!Fe.done;we++,Fe=j.next())Fe=J(U,Fe.value,Z),Fe!==null&&(D=g(Fe,D,we),ye===null?he=Fe:ye.sibling=Fe,ye=Fe);return Ye&&ji(U,we),he}for(ve=h(U,ve);!Fe.done;we++,Fe=j.next())Fe=ie(ve,U,we,Fe.value,Z),Fe!==null&&(r&&Fe.alternate!==null&&ve.delete(Fe.key===null?we:Fe.key),D=g(Fe,D,we),ye===null?he=Fe:ye.sibling=Fe,ye=Fe);return r&&ve.forEach(function(l0){return s(U,l0)}),Ye&&ji(U,we),he}function ot(U,D,j,Z){if(typeof j=="object"&&j!==null&&j.type===k&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case re:e:{for(var he=j.key,ye=D;ye!==null;){if(ye.key===he){if(he=j.type,he===k){if(ye.tag===7){a(U,ye.sibling),D=d(ye,j.props.children),D.return=U,U=D;break e}}else if(ye.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ct&&sm(he)===ye.type){a(U,ye.sibling),D=d(ye,j.props),D.ref=ca(U,ye,j),D.return=U,U=D;break e}a(U,ye);break}else s(U,ye);ye=ye.sibling}j.type===k?(D=Qi(j.props.children,U.mode,Z,j.key),D.return=U,U=D):(Z=gu(j.type,j.key,j.props,null,U.mode,Z),Z.ref=ca(U,D,j),Z.return=U,U=Z)}return E(U);case ce:e:{for(ye=j.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){a(U,D.sibling),D=d(D,j.children||[]),D.return=U,U=D;break e}else{a(U,D);break}else s(U,D);D=D.sibling}D=Xh(j,U.mode,Z),D.return=U,U=D}return E(U);case Ct:return ye=j._init,ot(U,D,ye(j._payload),Z)}if(hr(j))return ae(U,D,j,Z);if(de(j))return ue(U,D,j,Z);Kl(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,D!==null&&D.tag===6?(a(U,D.sibling),D=d(D,j),D.return=U,U=D):(a(U,D),D=Qh(j,U.mode,Z),D.return=U,U=D),E(U)):a(U,D)}return ot}var Ks=om(!0),am=om(!1),Hl=Gr(null),Gl=null,Hs=null,sh=null;function oh(){sh=Hs=Gl=null}function ah(r){var s=Hl.current;He(Hl),r._currentValue=s}function lh(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function Gs(r,s){Gl=r,sh=Hs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(en=!0),r.firstContext=null)}function Sn(r){var s=r._currentValue;if(sh!==r)if(r={context:r,memoizedValue:s,next:null},Hs===null){if(Gl===null)throw Error(t(308));Hs=r,Gl.dependencies={lanes:0,firstContext:r}}else Hs=Hs.next=r;return s}var zi=null;function uh(r){zi===null?zi=[r]:zi.push(r)}function lm(r,s,a,h){var d=s.interleaved;return d===null?(a.next=a,uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Ar(r,h)}function Ar(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Yr=!1;function ch(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ir(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Jr(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,Oe&2){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,Ar(r,a)}return d=h.interleaved,d===null?(s.next=s,uh(h)):(s.next=d.next,d.next=s),h.interleaved=s,Ar(r,a)}function Ql(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,jr(r,a)}}function cm(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Xl(r,s,a,h){var d=r.updateQueue;Yr=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var x=I,z=x.next;x.next=null,E===null?g=z:E.next=z,E=x;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,I=Q.lastBaseUpdate,I!==E&&(I===null?Q.firstBaseUpdate=z:I.next=z,Q.lastBaseUpdate=x))}if(g!==null){var J=d.baseState;E=0,Q=z=x=null,I=g;do{var G=I.lane,ie=I.eventTime;if((h&G)===G){Q!==null&&(Q=Q.next={eventTime:ie,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ae=r,ue=I;switch(G=s,ie=a,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){J=ae.call(ie,J,G);break e}J=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,G=typeof ae=="function"?ae.call(ie,J,G):ae,G==null)break e;J=ne({},J,G);break e;case 2:Yr=!0}}I.callback!==null&&I.lane!==0&&(r.flags|=64,G=d.effects,G===null?d.effects=[I]:G.push(I))}else ie={eventTime:ie,lane:G,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Q===null?(z=Q=ie,x=J):Q=Q.next=ie,E|=G;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;G=I,I=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Q===null&&(x=J),d.baseState=x,d.firstBaseUpdate=z,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);qi|=E,r.lanes=E,r.memoizedState=J}}function hm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var ha={},Zn=Gr(ha),fa=Gr(ha),da=Gr(ha);function $i(r){if(r===ha)throw Error(t(174));return r}function hh(r,s){switch(qe(da,s),qe(fa,r),qe(Zn,ha),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:dt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=dt(s,r)}He(Zn),qe(Zn,s)}function Qs(){He(Zn),He(fa),He(da)}function fm(r){$i(da.current);var s=$i(Zn.current),a=dt(s,r.type);s!==a&&(qe(fa,r),qe(Zn,a))}function fh(r){fa.current===r&&(He(Zn),He(fa))}var Ze=Gr(0);function Yl(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var dh=[];function ph(){for(var r=0;r<dh.length;r++)dh[r]._workInProgressVersionPrimary=null;dh.length=0}var Jl=le.ReactCurrentDispatcher,mh=le.ReactCurrentBatchConfig,Wi=0,et=null,mt=null,Tt=null,Zl=!1,pa=!1,ma=0,kT=0;function Ft(){throw Error(t(321))}function gh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!bn(r[a],s[a]))return!1;return!0}function yh(r,s,a,h,d,g){if(Wi=g,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Jl.current=r===null||r.memoizedState===null?LT:OT,r=a(h,d),pa){g=0;do{if(pa=!1,ma=0,25<=g)throw Error(t(301));g+=1,Tt=mt=null,s.updateQueue=null,Jl.current=FT,r=a(h,d)}while(pa)}if(Jl.current=nu,s=mt!==null&&mt.next!==null,Wi=0,Tt=mt=et=null,Zl=!1,s)throw Error(t(300));return r}function vh(){var r=ma!==0;return ma=0,r}function er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?et.memoizedState=Tt=r:Tt=Tt.next=r,Tt}function An(){if(mt===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=mt.next;var s=Tt===null?et.memoizedState:Tt.next;if(s!==null)Tt=s,mt=r;else{if(r===null)throw Error(t(310));mt=r,r={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Tt===null?et.memoizedState=Tt=r:Tt=Tt.next=r}return Tt}function ga(r,s){return typeof s=="function"?s(r):s}function _h(r){var s=An(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=mt,d=h.baseQueue,g=a.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}h.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,h=h.baseState;var I=E=null,x=null,z=g;do{var Q=z.lane;if((Wi&Q)===Q)x!==null&&(x=x.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:r(h,z.action);else{var J={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};x===null?(I=x=J,E=h):x=x.next=J,et.lanes|=Q,qi|=Q}z=z.next}while(z!==null&&z!==g);x===null?E=h:x.next=I,bn(h,s.memoizedState)||(en=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=x,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do g=d.lane,et.lanes|=g,qi|=g,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Eh(r){var s=An(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);bn(g,s.memoizedState)||(en=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function dm(){}function pm(r,s){var a=et,h=An(),d=s(),g=!bn(h.memoizedState,d);if(g&&(h.memoizedState=d,en=!0),h=h.queue,wh(ym.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,ya(9,gm.bind(null,a,h,d,s),void 0,null),St===null)throw Error(t(349));Wi&30||mm(a,s,d)}return d}function mm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function gm(r,s,a,h){s.value=a,s.getSnapshot=h,vm(s)&&_m(r)}function ym(r,s,a){return a(function(){vm(s)&&_m(r)})}function vm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!bn(r,a)}catch{return!0}}function _m(r){var s=Ar(r,1);s!==null&&$n(s,r,1,-1)}function Em(r){var s=er();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:r},s.queue=r,r=r.dispatch=MT.bind(null,et,r),[s.memoizedState,r]}function ya(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function wm(){return An().memoizedState}function eu(r,s,a,h){var d=er();et.flags|=r,d.memoizedState=ya(1|s,a,void 0,h===void 0?null:h)}function tu(r,s,a,h){var d=An();h=h===void 0?null:h;var g=void 0;if(mt!==null){var E=mt.memoizedState;if(g=E.destroy,h!==null&&gh(h,E.deps)){d.memoizedState=ya(s,a,g,h);return}}et.flags|=r,d.memoizedState=ya(1|s,a,g,h)}function Tm(r,s){return eu(8390656,8,r,s)}function wh(r,s){return tu(2048,8,r,s)}function Sm(r,s){return tu(4,2,r,s)}function Am(r,s){return tu(4,4,r,s)}function Im(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Pm(r,s,a){return a=a!=null?a.concat([r]):null,tu(4,4,Im.bind(null,s,r),a)}function Th(){}function Cm(r,s){var a=An();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&gh(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function Rm(r,s){var a=An();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&gh(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function xm(r,s,a){return Wi&21?(bn(a,s)||(a=Ni(),et.lanes|=a,qi|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,en=!0),r.memoizedState=a)}function DT(r,s){var a=Ve;Ve=a!==0&&4>a?a:4,r(!0);var h=mh.transition;mh.transition={};try{r(!1),s()}finally{Ve=a,mh.transition=h}}function Vm(){return An().memoizedState}function NT(r,s,a){var h=ni(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},km(r))Dm(s,a);else if(a=lm(r,s,a,h),a!==null){var d=Gt();$n(a,r,h,d),Nm(a,s,h)}}function MT(r,s,a){var h=ni(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(km(r))Dm(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,I=g(E,a);if(d.hasEagerState=!0,d.eagerState=I,bn(I,E)){var x=s.interleaved;x===null?(d.next=d,uh(s)):(d.next=x.next,x.next=d),s.interleaved=d;return}}catch{}finally{}a=lm(r,s,d,h),a!==null&&(d=Gt(),$n(a,r,h,d),Nm(a,s,h))}}function km(r){var s=r.alternate;return r===et||s!==null&&s===et}function Dm(r,s){pa=Zl=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Nm(r,s,a){if(a&4194240){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,jr(r,a)}}var nu={readContext:Sn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},LT={readContext:Sn,useCallback:function(r,s){return er().memoizedState=[r,s===void 0?null:s],r},useContext:Sn,useEffect:Tm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,eu(4194308,4,Im.bind(null,s,r),a)},useLayoutEffect:function(r,s){return eu(4194308,4,r,s)},useInsertionEffect:function(r,s){return eu(4,2,r,s)},useMemo:function(r,s){var a=er();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=er();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=NT.bind(null,et,r),[h.memoizedState,r]},useRef:function(r){var s=er();return r={current:r},s.memoizedState=r},useState:Em,useDebugValue:Th,useDeferredValue:function(r){return er().memoizedState=r},useTransition:function(){var r=Em(!1),s=r[0];return r=DT.bind(null,r[1]),er().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=et,d=er();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),St===null)throw Error(t(349));Wi&30||mm(h,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,Tm(ym.bind(null,h,g,r),[r]),h.flags|=2048,ya(9,gm.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=er(),s=St.identifierPrefix;if(Ye){var a=Sr,h=Tr;a=(h&~(1<<32-qt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=ma++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=kT++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},OT={readContext:Sn,useCallback:Cm,useContext:Sn,useEffect:wh,useImperativeHandle:Pm,useInsertionEffect:Sm,useLayoutEffect:Am,useMemo:Rm,useReducer:_h,useRef:wm,useState:function(){return _h(ga)},useDebugValue:Th,useDeferredValue:function(r){var s=An();return xm(s,mt.memoizedState,r)},useTransition:function(){var r=_h(ga)[0],s=An().memoizedState;return[r,s]},useMutableSource:dm,useSyncExternalStore:pm,useId:Vm,unstable_isNewReconciler:!1},FT={readContext:Sn,useCallback:Cm,useContext:Sn,useEffect:wh,useImperativeHandle:Pm,useInsertionEffect:Sm,useLayoutEffect:Am,useMemo:Rm,useReducer:Eh,useRef:wm,useState:function(){return Eh(ga)},useDebugValue:Th,useDeferredValue:function(r){var s=An();return mt===null?s.memoizedState=r:xm(s,mt.memoizedState,r)},useTransition:function(){var r=Eh(ga)[0],s=An().memoizedState;return[r,s]},useMutableSource:dm,useSyncExternalStore:pm,useId:Vm,unstable_isNewReconciler:!1};function Un(r,s){if(r&&r.defaultProps){s=ne({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Sh(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:ne({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var ru={isMounted:function(r){return(r=r._reactInternals)?kn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=Gt(),d=ni(r),g=Ir(h,d);g.payload=s,a!=null&&(g.callback=a),s=Jr(r,g,d),s!==null&&($n(s,r,d,h),Ql(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=Gt(),d=ni(r),g=Ir(h,d);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Jr(r,g,d),s!==null&&($n(s,r,d,h),Ql(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Gt(),h=ni(r),d=Ir(a,h);d.tag=2,s!=null&&(d.callback=s),s=Jr(r,d,h),s!==null&&($n(s,r,h,a),Ql(s,r,h))}};function Mm(r,s,a,h,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,E):s.prototype&&s.prototype.isPureReactComponent?!ra(a,h)||!ra(d,g):!0}function Lm(r,s,a){var h=!1,d=Qr,g=s.contextType;return typeof g=="object"&&g!==null?g=Sn(g):(d=Zt(s)?Bi:Ot.current,h=s.contextTypes,g=(h=h!=null)?zs(r,d):Qr),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ru,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),s}function Om(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&ru.enqueueReplaceState(s,s.state,null)}function Ah(r,s,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},ch(r);var g=s.contextType;typeof g=="object"&&g!==null?d.context=Sn(g):(g=Zt(s)?Bi:Ot.current,d.context=zs(r,g)),d.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Sh(r,s,g,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&ru.enqueueReplaceState(d,d.state,null),Xl(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Xs(r,s){try{var a="",h=s;do a+=Ce(h),h=h.return;while(h);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:d,digest:null}}function Ih(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Ph(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var bT=typeof WeakMap=="function"?WeakMap:Map;function Fm(r,s,a){a=Ir(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){cu||(cu=!0,jh=h),Ph(r,s)},a}function bm(r,s,a){a=Ir(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=s.value;a.payload=function(){return h(d)},a.callback=function(){Ph(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ph(r,s),typeof h!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Bm(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new bT;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(a)||(d.add(a),r=JT.bind(null,r,s,a),s.then(r,r))}function Um(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function jm(r,s,a,h,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ir(-1,1),s.tag=2,Jr(a,s,1))),a.lanes|=1),r)}var BT=le.ReactCurrentOwner,en=!1;function Ht(r,s,a,h){s.child=r===null?am(s,null,a,h):Ks(s,r.child,a,h)}function zm(r,s,a,h,d){a=a.render;var g=s.ref;return Gs(s,d),h=yh(r,s,a,h,g,d),a=vh(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Pr(r,s,d)):(Ye&&a&&eh(s),s.flags|=1,Ht(r,s,h,d),s.child)}function $m(r,s,a,h,d){if(r===null){var g=a.type;return typeof g=="function"&&!Gh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Wm(r,s,g,h,d)):(r=gu(a.type,null,h,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&d)){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:ra,a(E,h)&&r.ref===s.ref)return Pr(r,s,d)}return s.flags|=1,r=ii(g,h),r.ref=s.ref,r.return=s,s.child=r}function Wm(r,s,a,h,d){if(r!==null){var g=r.memoizedProps;if(ra(g,h)&&r.ref===s.ref)if(en=!1,s.pendingProps=h=g,(r.lanes&d)!==0)r.flags&131072&&(en=!0);else return s.lanes=r.lanes,Pr(r,s,d)}return Ch(r,s,a,h,d)}function qm(r,s,a){var h=s.pendingProps,d=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Js,dn),dn|=a;else{if(!(a&1073741824))return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,qe(Js,dn),dn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,qe(Js,dn),dn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,qe(Js,dn),dn|=h;return Ht(r,s,d,a),s.child}function Km(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ch(r,s,a,h,d){var g=Zt(a)?Bi:Ot.current;return g=zs(s,g),Gs(s,d),a=yh(r,s,a,h,g,d),h=vh(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Pr(r,s,d)):(Ye&&h&&eh(s),s.flags|=1,Ht(r,s,a,d),s.child)}function Hm(r,s,a,h,d){if(Zt(a)){var g=!0;jl(s)}else g=!1;if(Gs(s,d),s.stateNode===null)su(r,s),Lm(s,a,h),Ah(s,a,h,d),h=!0;else if(r===null){var E=s.stateNode,I=s.memoizedProps;E.props=I;var x=E.context,z=a.contextType;typeof z=="object"&&z!==null?z=Sn(z):(z=Zt(a)?Bi:Ot.current,z=zs(s,z));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof E.getSnapshotBeforeUpdate=="function";J||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==h||x!==z)&&Om(s,E,h,z),Yr=!1;var G=s.memoizedState;E.state=G,Xl(s,h,E,d),x=s.memoizedState,I!==h||G!==x||Jt.current||Yr?(typeof Q=="function"&&(Sh(s,a,Q,h),x=s.memoizedState),(I=Yr||Mm(s,a,I,h,G,x,z))?(J||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=x),E.props=h,E.state=x,E.context=z,h=I):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,um(r,s),I=s.memoizedProps,z=s.type===s.elementType?I:Un(s.type,I),E.props=z,J=s.pendingProps,G=E.context,x=a.contextType,typeof x=="object"&&x!==null?x=Sn(x):(x=Zt(a)?Bi:Ot.current,x=zs(s,x));var ie=a.getDerivedStateFromProps;(Q=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==J||G!==x)&&Om(s,E,h,x),Yr=!1,G=s.memoizedState,E.state=G,Xl(s,h,E,d);var ae=s.memoizedState;I!==J||G!==ae||Jt.current||Yr?(typeof ie=="function"&&(Sh(s,a,ie,h),ae=s.memoizedState),(z=Yr||Mm(s,a,z,h,G,ae,x)||!1)?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ae,x),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ae,x)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||I===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ae),E.props=h,E.state=ae,E.context=x,h=z):(typeof E.componentDidUpdate!="function"||I===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),h=!1)}return Rh(r,s,a,h,g,d)}function Rh(r,s,a,h,d,g){Km(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return d&&Jp(s,a,!1),Pr(r,s,g);h=s.stateNode,BT.current=s;var I=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=Ks(s,r.child,null,g),s.child=Ks(s,null,I,g)):Ht(r,s,I,g),s.memoizedState=h.state,d&&Jp(s,a,!0),s.child}function Gm(r){var s=r.stateNode;s.pendingContext?Xp(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Xp(r,s.context,!1),hh(r,s.containerInfo)}function Qm(r,s,a,h,d){return qs(),ih(d),s.flags|=256,Ht(r,s,a,h),s.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function Vh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Xm(r,s,a){var h=s.pendingProps,d=Ze.current,g=!1,E=(s.flags&128)!==0,I;if((I=E)||(I=r!==null&&r.memoizedState===null?!1:(d&2)!==0),I?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),qe(Ze,d&1),r===null)return rh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=h.children,r=h.fallback,g?(h=s.mode,g=s.child,E={mode:"hidden",children:E},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=E):g=yu(E,h,0,null),r=Qi(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Vh(a),s.memoizedState=xh,r):kh(s,E));if(d=r.memoizedState,d!==null&&(I=d.dehydrated,I!==null))return UT(r,s,E,h,I,d,a);if(g){g=h.fallback,E=s.mode,d=r.child,I=d.sibling;var x={mode:"hidden",children:h.children};return!(E&1)&&s.child!==d?(h=s.child,h.childLanes=0,h.pendingProps=x,s.deletions=null):(h=ii(d,x),h.subtreeFlags=d.subtreeFlags&14680064),I!==null?g=ii(I,g):(g=Qi(g,E,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,E=r.child.memoizedState,E=E===null?Vh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,s.memoizedState=xh,h}return g=r.child,r=g.sibling,h=ii(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function kh(r,s){return s=yu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function iu(r,s,a,h){return h!==null&&ih(h),Ks(s,r.child,null,a),r=kh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function UT(r,s,a,h,d,g,E){if(a)return s.flags&256?(s.flags&=-257,h=Ih(Error(t(422))),iu(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,d=s.mode,h=yu({mode:"visible",children:h.children},d,0,null),g=Qi(g,d,E,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&Ks(s,r.child,null,E),s.child.memoizedState=Vh(E),s.memoizedState=xh,g);if(!(s.mode&1))return iu(r,s,E,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var I=h.dgst;return h=I,g=Error(t(419)),h=Ih(g,h,void 0),iu(r,s,E,h)}if(I=(E&r.childLanes)!==0,en||I){if(h=St,h!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(h.suspendedLanes|E)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Ar(r,d),$n(h,r,d,-1))}return Hh(),h=Ih(Error(t(421))),iu(r,s,E,h)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=ZT.bind(null,r),d._reactRetry=s,null):(r=g.treeContext,fn=Hr(d.nextSibling),hn=s,Ye=!0,Bn=null,r!==null&&(wn[Tn++]=Tr,wn[Tn++]=Sr,wn[Tn++]=Ui,Tr=r.id,Sr=r.overflow,Ui=s),s=kh(s,h.children),s.flags|=4096,s)}function Ym(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),lh(r.return,s,a)}function Dh(r,s,a,h,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=d)}function Jm(r,s,a){var h=s.pendingProps,d=h.revealOrder,g=h.tail;if(Ht(r,s,h.children,a),h=Ze.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ym(r,a,s);else if(r.tag===19)Ym(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(qe(Ze,h),!(s.mode&1))s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&Yl(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Dh(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Yl(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}Dh(s,!0,a,null,g);break;case"together":Dh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function su(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Pr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),qi|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=ii(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=ii(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function jT(r,s,a){switch(s.tag){case 3:Gm(s),qs();break;case 5:fm(s);break;case 1:Zt(s.type)&&jl(s);break;case 4:hh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,d=s.memoizedProps.value;qe(Hl,h._currentValue),h._currentValue=d;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(qe(Ze,Ze.current&1),s.flags|=128,null):a&s.child.childLanes?Xm(r,s,a):(qe(Ze,Ze.current&1),r=Pr(r,s,a),r!==null?r.sibling:null);qe(Ze,Ze.current&1);break;case 19:if(h=(a&s.childLanes)!==0,r.flags&128){if(h)return Jm(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),qe(Ze,Ze.current),h)break;return null;case 22:case 23:return s.lanes=0,qm(r,s,a)}return Pr(r,s,a)}var Zm,Nh,eg,tg;Zm=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Nh=function(){},eg=function(r,s,a,h){var d=r.memoizedProps;if(d!==h){r=s.stateNode,$i(Zn.current);var g=null;switch(a){case"input":d=Ti(r,d),h=Ti(r,h),g=[];break;case"select":d=ne({},d,{value:void 0}),h=ne({},h,{value:void 0}),g=[];break;case"textarea":d=Do(r,d),h=Do(r,h),g=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=bl)}bo(a,h);var E;a=null;for(z in d)if(!h.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var I=d[z];for(E in I)I.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?g||(g=[]):(g=g||[]).push(z,null));for(z in h){var x=h[z];if(I=d!=null?d[z]:void 0,h.hasOwnProperty(z)&&x!==I&&(x!=null||I!=null))if(z==="style")if(I){for(E in I)!I.hasOwnProperty(E)||x&&x.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in x)x.hasOwnProperty(E)&&I[E]!==x[E]&&(a||(a={}),a[E]=x[E])}else a||(g||(g=[]),g.push(z,a)),a=x;else z==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,I=I?I.__html:void 0,x!=null&&I!==x&&(g=g||[]).push(z,x)):z==="children"?typeof x!="string"&&typeof x!="number"||(g=g||[]).push(z,""+x):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(x!=null&&z==="onScroll"&&Ke("scroll",r),g||I===x||(g=[])):(g=g||[]).push(z,x))}a&&(g=g||[]).push("style",a);var z=g;(s.updateQueue=z)&&(s.flags|=4)}},tg=function(r,s,a,h){a!==h&&(s.flags|=4)};function va(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function bt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function zT(r,s,a){var h=s.pendingProps;switch(th(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return Zt(s.type)&&Ul(),bt(s),null;case 3:return h=s.stateNode,Qs(),He(Jt),He(Ot),ph(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(ql(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Bn!==null&&(Wh(Bn),Bn=null))),Nh(r,s),bt(s),null;case 5:fh(s);var d=$i(da.current);if(a=s.type,r!==null&&s.stateNode!=null)eg(r,s,a,h,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return bt(s),null}if(r=$i(Zn.current),ql(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[Jn]=s,h[la]=g,r=(s.mode&1)!==0,a){case"dialog":Ke("cancel",h),Ke("close",h);break;case"iframe":case"object":case"embed":Ke("load",h);break;case"video":case"audio":for(d=0;d<sa.length;d++)Ke(sa[d],h);break;case"source":Ke("error",h);break;case"img":case"image":case"link":Ke("error",h),Ke("load",h);break;case"details":Ke("toggle",h);break;case"input":cs(h,g),Ke("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ke("invalid",h);break;case"textarea":fs(h,g),Ke("invalid",h)}bo(a,g),d=null;for(var E in g)if(g.hasOwnProperty(E)){var I=g[E];E==="children"?typeof I=="string"?h.textContent!==I&&(g.suppressHydrationWarning!==!0&&Fl(h.textContent,I,r),d=["children",I]):typeof I=="number"&&h.textContent!==""+I&&(g.suppressHydrationWarning!==!0&&Fl(h.textContent,I,r),d=["children",""+I]):o.hasOwnProperty(E)&&I!=null&&E==="onScroll"&&Ke("scroll",h)}switch(a){case"input":cr(h),ul(h,g,!0);break;case"textarea":cr(h),No(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=bl)}h=d,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ft(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(a,{is:h.is}):(r=E.createElement(a),a==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,a),r[Jn]=s,r[la]=h,Zm(r,s,!1,!1),s.stateNode=r;e:{switch(E=Bo(a,h),a){case"dialog":Ke("cancel",r),Ke("close",r),d=h;break;case"iframe":case"object":case"embed":Ke("load",r),d=h;break;case"video":case"audio":for(d=0;d<sa.length;d++)Ke(sa[d],r);d=h;break;case"source":Ke("error",r),d=h;break;case"img":case"image":case"link":Ke("error",r),Ke("load",r),d=h;break;case"details":Ke("toggle",r),d=h;break;case"input":cs(r,h),d=Ti(r,h),Ke("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=ne({},h,{value:void 0}),Ke("invalid",r);break;case"textarea":fs(r,h),d=Do(r,h),Ke("invalid",r);break;default:d=h}bo(a,d),I=d;for(g in I)if(I.hasOwnProperty(g)){var x=I[g];g==="style"?Oo(r,x):g==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Mo(r,x)):g==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&Or(r,x):typeof x=="number"&&Or(r,""+x):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?x!=null&&g==="onScroll"&&Ke("scroll",r):x!=null&&X(r,g,x,E))}switch(a){case"input":cr(r),ul(r,h,!1);break;case"textarea":cr(r),No(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Be(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?fr(r,!!h.multiple,g,!1):h.defaultValue!=null&&fr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=bl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bt(s),null;case 6:if(r&&s.stateNode!=null)tg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=$i(da.current),$i(Zn.current),ql(s)){if(h=s.stateNode,a=s.memoizedProps,h[Jn]=s,(g=h.nodeValue!==a)&&(r=hn,r!==null))switch(r.tag){case 3:Fl(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Fl(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Jn]=s,s.stateNode=h}return bt(s),null;case 13:if(He(Ze),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ye&&fn!==null&&s.mode&1&&!(s.flags&128))im(),qs(),s.flags|=98560,g=!1;else if(g=ql(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Jn]=s}else qs(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;bt(s),g=!1}else Bn!==null&&(Wh(Bn),Bn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||Ze.current&1?gt===0&&(gt=3):Hh())),s.updateQueue!==null&&(s.flags|=4),bt(s),null);case 4:return Qs(),Nh(r,s),r===null&&oa(s.stateNode.containerInfo),bt(s),null;case 10:return ah(s.type._context),bt(s),null;case 17:return Zt(s.type)&&Ul(),bt(s),null;case 19:if(He(Ze),g=s.memoizedState,g===null)return bt(s),null;if(h=(s.flags&128)!==0,E=g.rendering,E===null)if(h)va(g,!1);else{if(gt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(E=Yl(r),E!==null){for(s.flags|=128,va(g,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return qe(Ze,Ze.current&1|2),s.child}r=r.sibling}g.tail!==null&&We()>Zs&&(s.flags|=128,h=!0,va(g,!1),s.lanes=4194304)}else{if(!h)if(r=Yl(E),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ye)return bt(s),null}else 2*We()-g.renderingStartTime>Zs&&a!==1073741824&&(s.flags|=128,h=!0,va(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=We(),s.sibling=null,a=Ze.current,qe(Ze,h?a&1|2:a&1),s):(bt(s),null);case 22:case 23:return Kh(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?dn&1073741824&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function $T(r,s){switch(th(s),s.tag){case 1:return Zt(s.type)&&Ul(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Qs(),He(Jt),He(Ot),ph(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return fh(s),null;case 13:if(He(Ze),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));qs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return He(Ze),null;case 4:return Qs(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var ou=!1,Bt=!1,WT=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ys(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){rt(r,s,h)}else a.current=null}function Mh(r,s,a){try{a()}catch(h){rt(r,s,h)}}var ng=!1;function qT(r,s){if(Kc=Wr,r=Mp(),bc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,I=-1,x=-1,z=0,Q=0,J=r,G=null;t:for(;;){for(var ie;J!==a||d!==0&&J.nodeType!==3||(I=E+d),J!==g||h!==0&&J.nodeType!==3||(x=E+h),J.nodeType===3&&(E+=J.nodeValue.length),(ie=J.firstChild)!==null;)G=J,J=ie;for(;;){if(J===r)break t;if(G===a&&++z===d&&(I=E),G===g&&++Q===h&&(x=E),(ie=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=ie}a=I===-1||x===-1?null:{start:I,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hc={focusedElem:r,selectionRange:a},Wr=!1,oe=s;oe!==null;)if(s=oe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,oe=r;else for(;oe!==null;){s=oe;try{var ae=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,ot=ae.memoizedState,U=s.stateNode,D=U.getSnapshotBeforeUpdate(s.elementType===s.type?ue:Un(s.type,ue),ot);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){rt(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,oe=r;break}oe=s.return}return ae=ng,ng=!1,ae}function _a(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&Mh(s,a,g)}d=d.next}while(d!==h)}}function au(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Lh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function rg(r){var s=r.alternate;s!==null&&(r.alternate=null,rg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Jn],delete s[la],delete s[Yc],delete s[CT],delete s[RT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ig(r){return r.tag===5||r.tag===3||r.tag===4}function sg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ig(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Oh(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=bl));else if(h!==4&&(r=r.child,r!==null))for(Oh(r,s,a),r=r.sibling;r!==null;)Oh(r,s,a),r=r.sibling}function Fh(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Fh(r,s,a),r=r.sibling;r!==null;)Fh(r,s,a),r=r.sibling}var Vt=null,jn=!1;function Zr(r,s,a){for(a=a.child;a!==null;)og(r,s,a),a=a.sibling}function og(r,s,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(ki,a)}catch{}switch(a.tag){case 5:Bt||Ys(a,s);case 6:var h=Vt,d=jn;Vt=null,Zr(r,s,a),Vt=h,jn=d,Vt!==null&&(jn?(r=Vt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Vt.removeChild(a.stateNode));break;case 18:Vt!==null&&(jn?(r=Vt,a=a.stateNode,r.nodeType===8?Xc(r.parentNode,a):r.nodeType===1&&Xc(r,a),On(r)):Xc(Vt,a.stateNode));break;case 4:h=Vt,d=jn,Vt=a.stateNode.containerInfo,jn=!0,Zr(r,s,a),Vt=h,jn=d;break;case 0:case 11:case 14:case 15:if(!Bt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var g=d,E=g.destroy;g=g.tag,E!==void 0&&(g&2||g&4)&&Mh(a,s,E),d=d.next}while(d!==h)}Zr(r,s,a);break;case 1:if(!Bt&&(Ys(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(I){rt(a,s,I)}Zr(r,s,a);break;case 21:Zr(r,s,a);break;case 22:a.mode&1?(Bt=(h=Bt)||a.memoizedState!==null,Zr(r,s,a),Bt=h):Zr(r,s,a);break;default:Zr(r,s,a)}}function ag(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new WT),s.forEach(function(h){var d=e0.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function zn(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var g=r,E=s,I=E;e:for(;I!==null;){switch(I.tag){case 5:Vt=I.stateNode,jn=!1;break e;case 3:Vt=I.stateNode.containerInfo,jn=!0;break e;case 4:Vt=I.stateNode.containerInfo,jn=!0;break e}I=I.return}if(Vt===null)throw Error(t(160));og(g,E,d),Vt=null,jn=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch(z){rt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lg(s,r),s=s.sibling}function lg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(zn(s,r),tr(r),h&4){try{_a(3,r,r.return),au(3,r)}catch(ue){rt(r,r.return,ue)}try{_a(5,r,r.return)}catch(ue){rt(r,r.return,ue)}}break;case 1:zn(s,r),tr(r),h&512&&a!==null&&Ys(a,a.return);break;case 5:if(zn(s,r),tr(r),h&512&&a!==null&&Ys(a,a.return),r.flags&32){var d=r.stateNode;try{Or(d,"")}catch(ue){rt(r,r.return,ue)}}if(h&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,I=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{I==="input"&&g.type==="radio"&&g.name!=null&&Vo(d,g),Bo(I,E);var z=Bo(I,g);for(E=0;E<x.length;E+=2){var Q=x[E],J=x[E+1];Q==="style"?Oo(d,J):Q==="dangerouslySetInnerHTML"?Mo(d,J):Q==="children"?Or(d,J):X(d,Q,J,z)}switch(I){case"input":ko(d,g);break;case"textarea":ds(d,g);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var ie=g.value;ie!=null?fr(d,!!g.multiple,ie,!1):G!==!!g.multiple&&(g.defaultValue!=null?fr(d,!!g.multiple,g.defaultValue,!0):fr(d,!!g.multiple,g.multiple?[]:"",!1))}d[la]=g}catch(ue){rt(r,r.return,ue)}}break;case 6:if(zn(s,r),tr(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,g=r.memoizedProps;try{d.nodeValue=g}catch(ue){rt(r,r.return,ue)}}break;case 3:if(zn(s,r),tr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{On(s.containerInfo)}catch(ue){rt(r,r.return,ue)}break;case 4:zn(s,r),tr(r);break;case 13:zn(s,r),tr(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Uh=We())),h&4&&ag(r);break;case 22:if(Q=a!==null&&a.memoizedState!==null,r.mode&1?(Bt=(z=Bt)||Q,zn(s,r),Bt=z):zn(s,r),tr(r),h&8192){if(z=r.memoizedState!==null,(r.stateNode.isHidden=z)&&!Q&&r.mode&1)for(oe=r,Q=r.child;Q!==null;){for(J=oe=Q;oe!==null;){switch(G=oe,ie=G.child,G.tag){case 0:case 11:case 14:case 15:_a(4,G,G.return);break;case 1:Ys(G,G.return);var ae=G.stateNode;if(typeof ae.componentWillUnmount=="function"){h=G,a=G.return;try{s=h,ae.props=s.memoizedProps,ae.state=s.memoizedState,ae.componentWillUnmount()}catch(ue){rt(h,a,ue)}}break;case 5:Ys(G,G.return);break;case 22:if(G.memoizedState!==null){hg(J);continue}}ie!==null?(ie.return=G,oe=ie):hg(J)}Q=Q.sibling}e:for(Q=null,J=r;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,z?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(I=J.stateNode,x=J.memoizedProps.style,E=x!=null&&x.hasOwnProperty("display")?x.display:null,I.style.display=Lo("display",E))}catch(ue){rt(r,r.return,ue)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(ue){rt(r,r.return,ue)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break e;for(;J.sibling===null;){if(J.return===null||J.return===r)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:zn(s,r),tr(r),h&4&&ag(r);break;case 21:break;default:zn(s,r),tr(r)}}function tr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(ig(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Or(d,""),h.flags&=-33);var g=sg(r);Fh(r,g,d);break;case 3:case 4:var E=h.stateNode.containerInfo,I=sg(r);Oh(r,I,E);break;default:throw Error(t(161))}}catch(x){rt(r,r.return,x)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function KT(r,s,a){oe=r,ug(r)}function ug(r,s,a){for(var h=(r.mode&1)!==0;oe!==null;){var d=oe,g=d.child;if(d.tag===22&&h){var E=d.memoizedState!==null||ou;if(!E){var I=d.alternate,x=I!==null&&I.memoizedState!==null||Bt;I=ou;var z=Bt;if(ou=E,(Bt=x)&&!z)for(oe=d;oe!==null;)E=oe,x=E.child,E.tag===22&&E.memoizedState!==null?fg(d):x!==null?(x.return=E,oe=x):fg(d);for(;g!==null;)oe=g,ug(g),g=g.sibling;oe=d,ou=I,Bt=z}cg(r)}else d.subtreeFlags&8772&&g!==null?(g.return=d,oe=g):cg(r)}}function cg(r){for(;oe!==null;){var s=oe;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Bt||au(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Bt)if(a===null)h.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Un(s.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&hm(s,g,h);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}hm(s,E,a)}break;case 5:var I=s.stateNode;if(a===null&&s.flags&4){a=I;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&On(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||s.flags&512&&Lh(s)}catch(G){rt(s,s.return,G)}}if(s===r){oe=null;break}if(a=s.sibling,a!==null){a.return=s.return,oe=a;break}oe=s.return}}function hg(r){for(;oe!==null;){var s=oe;if(s===r){oe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,oe=a;break}oe=s.return}}function fg(r){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{au(4,s)}catch(x){rt(s,a,x)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var d=s.return;try{h.componentDidMount()}catch(x){rt(s,d,x)}}var g=s.return;try{Lh(s)}catch(x){rt(s,g,x)}break;case 5:var E=s.return;try{Lh(s)}catch(x){rt(s,E,x)}}}catch(x){rt(s,s.return,x)}if(s===r){oe=null;break}var I=s.sibling;if(I!==null){I.return=s.return,oe=I;break}oe=s.return}}var HT=Math.ceil,lu=le.ReactCurrentDispatcher,bh=le.ReactCurrentOwner,In=le.ReactCurrentBatchConfig,Oe=0,St=null,ct=null,kt=0,dn=0,Js=Gr(0),gt=0,Ea=null,qi=0,uu=0,Bh=0,wa=null,tn=null,Uh=0,Zs=1/0,Cr=null,cu=!1,jh=null,ei=null,hu=!1,ti=null,fu=0,Ta=0,zh=null,du=-1,pu=0;function Gt(){return Oe&6?We():du!==-1?du:du=We()}function ni(r){return r.mode&1?Oe&2&&kt!==0?kt&-kt:VT.transition!==null?(pu===0&&(pu=Ni()),pu):(r=Ve,r!==0||(r=window.event,r=r===void 0?16:Xo(r.type)),r):1}function $n(r,s,a,h){if(50<Ta)throw Ta=0,zh=null,Error(t(185));Ur(r,a,h),(!(Oe&2)||r!==St)&&(r===St&&(!(Oe&2)&&(uu|=a),gt===4&&ri(r,kt)),nn(r,h),a===1&&Oe===0&&!(s.mode&1)&&(Zs=We()+500,zl&&Xr()))}function nn(r,s){var a=r.callbackNode;mr(r,s);var h=Di(r,r===St?kt:0);if(h===0)a!==null&&qo(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&qo(a),s===1)r.tag===0?xT(pg.bind(null,r)):Zp(pg.bind(null,r)),IT(function(){!(Oe&6)&&Xr()}),a=null;else{switch(zr(h)){case 1:a=Vi;break;case 4:a=Fr;break;case 16:a=vn;break;case 536870912:a=pl;break;default:a=vn}a=Tg(a,dg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function dg(r,s){if(du=-1,pu=0,Oe&6)throw Error(t(327));var a=r.callbackNode;if(eo()&&r.callbackNode!==a)return null;var h=Di(r,r===St?kt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=mu(r,h);else{s=h;var d=Oe;Oe|=2;var g=gg();(St!==r||kt!==s)&&(Cr=null,Zs=We()+500,Hi(r,s));do try{XT();break}catch(I){mg(r,I)}while(!0);oh(),lu.current=g,Oe=d,ct!==null?s=0:(St=null,kt=0,s=gt)}if(s!==0){if(s===2&&(d=ln(r),d!==0&&(h=d,s=$h(r,d))),s===1)throw a=Ea,Hi(r,0),ri(r,h),nn(r,We()),a;if(s===6)ri(r,h);else{if(d=r.current.alternate,!(h&30)&&!GT(d)&&(s=mu(r,h),s===2&&(g=ln(r),g!==0&&(h=g,s=$h(r,g))),s===1))throw a=Ea,Hi(r,0),ri(r,h),nn(r,We()),a;switch(r.finishedWork=d,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Gi(r,tn,Cr);break;case 3:if(ri(r,h),(h&130023424)===h&&(s=Uh+500-We(),10<s)){if(Di(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Gt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Qc(Gi.bind(null,r,tn,Cr),s);break}Gi(r,tn,Cr);break;case 4:if(ri(r,h),(h&4194240)===h)break;for(s=r.eventTimes,d=-1;0<h;){var E=31-qt(h);g=1<<E,E=s[E],E>d&&(d=E),h&=~g}if(h=d,h=We()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*HT(h/1960))-h,10<h){r.timeoutHandle=Qc(Gi.bind(null,r,tn,Cr),h);break}Gi(r,tn,Cr);break;case 5:Gi(r,tn,Cr);break;default:throw Error(t(329))}}}return nn(r,We()),r.callbackNode===a?dg.bind(null,r):null}function $h(r,s){var a=wa;return r.current.memoizedState.isDehydrated&&(Hi(r,s).flags|=256),r=mu(r,s),r!==2&&(s=tn,tn=a,s!==null&&Wh(s)),r}function Wh(r){tn===null?tn=r:tn.push.apply(tn,r)}function GT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],g=d.getSnapshot;d=d.value;try{if(!bn(g(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ri(r,s){for(s&=~Bh,s&=~uu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-qt(s),h=1<<a;r[a]=-1,s&=~h}}function pg(r){if(Oe&6)throw Error(t(327));eo();var s=Di(r,0);if(!(s&1))return nn(r,We()),null;var a=mu(r,s);if(r.tag!==0&&a===2){var h=ln(r);h!==0&&(s=h,a=$h(r,h))}if(a===1)throw a=Ea,Hi(r,0),ri(r,s),nn(r,We()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Gi(r,tn,Cr),nn(r,We()),null}function qh(r,s){var a=Oe;Oe|=1;try{return r(s)}finally{Oe=a,Oe===0&&(Zs=We()+500,zl&&Xr())}}function Ki(r){ti!==null&&ti.tag===0&&!(Oe&6)&&eo();var s=Oe;Oe|=1;var a=In.transition,h=Ve;try{if(In.transition=null,Ve=1,r)return r()}finally{Ve=h,In.transition=a,Oe=s,!(Oe&6)&&Xr()}}function Kh(){dn=Js.current,He(Js)}function Hi(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,AT(a)),ct!==null)for(a=ct.return;a!==null;){var h=a;switch(th(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ul();break;case 3:Qs(),He(Jt),He(Ot),ph();break;case 5:fh(h);break;case 4:Qs();break;case 13:He(Ze);break;case 19:He(Ze);break;case 10:ah(h.type._context);break;case 22:case 23:Kh()}a=a.return}if(St=r,ct=r=ii(r.current,null),kt=dn=s,gt=0,Ea=null,Bh=uu=qi=0,tn=wa=null,zi!==null){for(s=0;s<zi.length;s++)if(a=zi[s],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,g=a.pending;if(g!==null){var E=g.next;g.next=d,h.next=E}a.pending=h}zi=null}return r}function mg(r,s){do{var a=ct;try{if(oh(),Jl.current=nu,Zl){for(var h=et.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Zl=!1}if(Wi=0,Tt=mt=et=null,pa=!1,ma=0,bh.current=null,a===null||a.return===null){gt=1,Ea=s,ct=null;break}e:{var g=r,E=a.return,I=a,x=s;if(s=kt,I.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var z=x,Q=I,J=Q.tag;if(!(Q.mode&1)&&(J===0||J===11||J===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ie=Um(E);if(ie!==null){ie.flags&=-257,jm(ie,E,I,g,s),ie.mode&1&&Bm(g,z,s),s=ie,x=z;var ae=s.updateQueue;if(ae===null){var ue=new Set;ue.add(x),s.updateQueue=ue}else ae.add(x);break e}else{if(!(s&1)){Bm(g,z,s),Hh();break e}x=Error(t(426))}}else if(Ye&&I.mode&1){var ot=Um(E);if(ot!==null){!(ot.flags&65536)&&(ot.flags|=256),jm(ot,E,I,g,s),ih(Xs(x,I));break e}}g=x=Xs(x,I),gt!==4&&(gt=2),wa===null?wa=[g]:wa.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Fm(g,x,s);cm(g,U);break e;case 1:I=x;var D=g.type,j=g.stateNode;if(!(g.flags&128)&&(typeof D.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ei===null||!ei.has(j)))){g.flags|=65536,s&=-s,g.lanes|=s;var Z=bm(g,I,s);cm(g,Z);break e}}g=g.return}while(g!==null)}vg(a)}catch(he){s=he,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function gg(){var r=lu.current;return lu.current=nu,r===null?nu:r}function Hh(){(gt===0||gt===3||gt===2)&&(gt=4),St===null||!(qi&268435455)&&!(uu&268435455)||ri(St,kt)}function mu(r,s){var a=Oe;Oe|=2;var h=gg();(St!==r||kt!==s)&&(Cr=null,Hi(r,s));do try{QT();break}catch(d){mg(r,d)}while(!0);if(oh(),Oe=a,lu.current=h,ct!==null)throw Error(t(261));return St=null,kt=0,gt}function QT(){for(;ct!==null;)yg(ct)}function XT(){for(;ct!==null&&!fl();)yg(ct)}function yg(r){var s=wg(r.alternate,r,dn);r.memoizedProps=r.pendingProps,s===null?vg(r):ct=s,bh.current=null}function vg(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=$T(a,s),a!==null){a.flags&=32767,ct=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{gt=6,ct=null;return}}else if(a=zT(a,s,dn),a!==null){ct=a;return}if(s=s.sibling,s!==null){ct=s;return}ct=s=r}while(s!==null);gt===0&&(gt=5)}function Gi(r,s,a){var h=Ve,d=In.transition;try{In.transition=null,Ve=1,YT(r,s,a,h)}finally{In.transition=d,Ve=h}return null}function YT(r,s,a,h){do eo();while(ti!==null);if(Oe&6)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(ze(r,g),r===St&&(ct=St=null,kt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||hu||(hu=!0,Tg(vn,function(){return eo(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=In.transition,In.transition=null;var E=Ve;Ve=1;var I=Oe;Oe|=4,bh.current=null,qT(r,a),lg(a,r),yT(Hc),Wr=!!Kc,Hc=Kc=null,r.current=a,KT(a),Vc(),Oe=I,Ve=E,In.transition=g}else r.current=a;if(hu&&(hu=!1,ti=r,fu=d),g=r.pendingLanes,g===0&&(ei=null),ml(a.stateNode),nn(r,We()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(cu)throw cu=!1,r=jh,jh=null,r;return fu&1&&r.tag!==0&&eo(),g=r.pendingLanes,g&1?r===zh?Ta++:(Ta=0,zh=r):Ta=0,Xr(),null}function eo(){if(ti!==null){var r=zr(fu),s=In.transition,a=Ve;try{if(In.transition=null,Ve=16>r?16:r,ti===null)var h=!1;else{if(r=ti,ti=null,fu=0,Oe&6)throw Error(t(331));var d=Oe;for(Oe|=4,oe=r.current;oe!==null;){var g=oe,E=g.child;if(oe.flags&16){var I=g.deletions;if(I!==null){for(var x=0;x<I.length;x++){var z=I[x];for(oe=z;oe!==null;){var Q=oe;switch(Q.tag){case 0:case 11:case 15:_a(8,Q,g)}var J=Q.child;if(J!==null)J.return=Q,oe=J;else for(;oe!==null;){Q=oe;var G=Q.sibling,ie=Q.return;if(rg(Q),Q===z){oe=null;break}if(G!==null){G.return=ie,oe=G;break}oe=ie}}}var ae=g.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var ot=ue.sibling;ue.sibling=null,ue=ot}while(ue!==null)}}oe=g}}if(g.subtreeFlags&2064&&E!==null)E.return=g,oe=E;else e:for(;oe!==null;){if(g=oe,g.flags&2048)switch(g.tag){case 0:case 11:case 15:_a(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,oe=U;break e}oe=g.return}}var D=r.current;for(oe=D;oe!==null;){E=oe;var j=E.child;if(E.subtreeFlags&2064&&j!==null)j.return=E,oe=j;else e:for(E=D;oe!==null;){if(I=oe,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:au(9,I)}}catch(he){rt(I,I.return,he)}if(I===E){oe=null;break e}var Z=I.sibling;if(Z!==null){Z.return=I.return,oe=Z;break e}oe=I.return}}if(Oe=d,Xr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(ki,r)}catch{}h=!0}return h}finally{Ve=a,In.transition=s}}return!1}function _g(r,s,a){s=Xs(a,s),s=Fm(r,s,1),r=Jr(r,s,1),s=Gt(),r!==null&&(Ur(r,1,s),nn(r,s))}function rt(r,s,a){if(r.tag===3)_g(r,r,a);else for(;s!==null;){if(s.tag===3){_g(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ei===null||!ei.has(h))){r=Xs(a,r),r=bm(s,r,1),s=Jr(s,r,1),r=Gt(),s!==null&&(Ur(s,1,r),nn(s,r));break}}s=s.return}}function JT(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=Gt(),r.pingedLanes|=r.suspendedLanes&a,St===r&&(kt&a)===a&&(gt===4||gt===3&&(kt&130023424)===kt&&500>We()-Uh?Hi(r,0):Bh|=a),nn(r,s)}function Eg(r,s){s===0&&(r.mode&1?(s=Ss,Ss<<=1,!(Ss&130023424)&&(Ss=4194304)):s=1);var a=Gt();r=Ar(r,s),r!==null&&(Ur(r,s,a),nn(r,a))}function ZT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Eg(r,a)}function e0(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Eg(r,a)}var wg;wg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Jt.current)en=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return en=!1,jT(r,s,a);en=!!(r.flags&131072)}else en=!1,Ye&&s.flags&1048576&&em(s,Wl,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;su(r,s),r=s.pendingProps;var d=zs(s,Ot.current);Gs(s,a),d=yh(null,s,h,r,d,a);var g=vh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(h)?(g=!0,jl(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ch(s),d.updater=ru,s.stateNode=d,d._reactInternals=s,Ah(s,h,r,a),s=Rh(null,s,h,!0,g,a)):(s.tag=0,Ye&&g&&eh(s),Ht(null,s,d,a),s=s.child),s;case 16:h=s.elementType;e:{switch(su(r,s),r=s.pendingProps,d=h._init,h=d(h._payload),s.type=h,d=s.tag=n0(h),r=Un(h,r),d){case 0:s=Ch(null,s,h,r,a);break e;case 1:s=Hm(null,s,h,r,a);break e;case 11:s=zm(null,s,h,r,a);break e;case 14:s=$m(null,s,h,Un(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Un(h,d),Ch(r,s,h,d,a);case 1:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Un(h,d),Hm(r,s,h,d,a);case 3:e:{if(Gm(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,d=g.element,um(r,s),Xl(s,h,null,a);var E=s.memoizedState;if(h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=Xs(Error(t(423)),s),s=Qm(r,s,h,a,d);break e}else if(h!==d){d=Xs(Error(t(424)),s),s=Qm(r,s,h,a,d);break e}else for(fn=Hr(s.stateNode.containerInfo.firstChild),hn=s,Ye=!0,Bn=null,a=am(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(qs(),h===d){s=Pr(r,s,a);break e}Ht(r,s,h,a)}s=s.child}return s;case 5:return fm(s),r===null&&rh(s),h=s.type,d=s.pendingProps,g=r!==null?r.memoizedProps:null,E=d.children,Gc(h,d)?E=null:g!==null&&Gc(h,g)&&(s.flags|=32),Km(r,s),Ht(r,s,E,a),s.child;case 6:return r===null&&rh(s),null;case 13:return Xm(r,s,a);case 4:return hh(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Ks(s,null,h,a):Ht(r,s,h,a),s.child;case 11:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Un(h,d),zm(r,s,h,d,a);case 7:return Ht(r,s,s.pendingProps,a),s.child;case 8:return Ht(r,s,s.pendingProps.children,a),s.child;case 12:return Ht(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,d=s.pendingProps,g=s.memoizedProps,E=d.value,qe(Hl,h._currentValue),h._currentValue=E,g!==null)if(bn(g.value,E)){if(g.children===d.children&&!Jt.current){s=Pr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var I=g.dependencies;if(I!==null){E=g.child;for(var x=I.firstContext;x!==null;){if(x.context===h){if(g.tag===1){x=Ir(-1,a&-a),x.tag=2;var z=g.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?x.next=x:(x.next=Q.next,Q.next=x),z.pending=x}}g.lanes|=a,x=g.alternate,x!==null&&(x.lanes|=a),lh(g.return,a,s),I.lanes|=a;break}x=x.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,I=E.alternate,I!==null&&(I.lanes|=a),lh(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Ht(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,h=s.pendingProps.children,Gs(s,a),d=Sn(d),h=h(d),s.flags|=1,Ht(r,s,h,a),s.child;case 14:return h=s.type,d=Un(h,s.pendingProps),d=Un(h.type,d),$m(r,s,h,d,a);case 15:return Wm(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Un(h,d),su(r,s),s.tag=1,Zt(h)?(r=!0,jl(s)):r=!1,Gs(s,a),Lm(s,h,d),Ah(s,h,d,a),Rh(null,s,h,!0,r,a);case 19:return Jm(r,s,a);case 22:return qm(r,s,a)}throw Error(t(156,s.tag))};function Tg(r,s){return ws(r,s)}function t0(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(r,s,a,h){return new t0(r,s,a,h)}function Gh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function n0(r){if(typeof r=="function")return Gh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===b)return 11;if(r===Pt)return 14}return 2}function ii(r,s){var a=r.alternate;return a===null?(a=Pn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function gu(r,s,a,h,d,g){var E=2;if(h=r,typeof r=="function")Gh(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case k:return Qi(a.children,d,g,s);case A:E=8,d|=8;break;case P:return r=Pn(12,a,s,d|2),r.elementType=P,r.lanes=g,r;case C:return r=Pn(13,a,s,d),r.elementType=C,r.lanes=g,r;case Qe:return r=Pn(19,a,s,d),r.elementType=Qe,r.lanes=g,r;case Ae:return yu(a,d,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:E=10;break e;case M:E=9;break e;case b:E=11;break e;case Pt:E=14;break e;case Ct:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Pn(E,a,s,d),s.elementType=r,s.type=h,s.lanes=g,s}function Qi(r,s,a,h){return r=Pn(7,r,h,s),r.lanes=a,r}function yu(r,s,a,h){return r=Pn(22,r,h,s),r.elementType=Ae,r.lanes=a,r.stateNode={isHidden:!1},r}function Qh(r,s,a){return r=Pn(6,r,null,s),r.lanes=a,r}function Xh(r,s,a){return s=Pn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function r0(r,s,a,h,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Yh(r,s,a,h,d,g,E,I,x){return r=new r0(r,s,a,I,x),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Pn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ch(g),r}function i0(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function Sg(r){if(!r)return Qr;r=r._reactInternals;e:{if(kn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Zt(a))return Yp(r,a,s)}return s}function Ag(r,s,a,h,d,g,E,I,x){return r=Yh(a,h,!0,r,d,g,E,I,x),r.context=Sg(null),a=r.current,h=Gt(),d=ni(a),g=Ir(h,d),g.callback=s??null,Jr(a,g,d),r.current.lanes=d,Ur(r,d,h),nn(r,h),r}function vu(r,s,a,h){var d=s.current,g=Gt(),E=ni(d);return a=Sg(a),s.context===null?s.context=a:s.pendingContext=a,s=Ir(g,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Jr(d,s,E),r!==null&&($n(r,d,E,g),Ql(r,d,E)),E}function _u(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ig(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Jh(r,s){Ig(r,s),(r=r.alternate)&&Ig(r,s)}var Pg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Zh(r){this._internalRoot=r}Eu.prototype.render=Zh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));vu(r,s,null,null)},Eu.prototype.unmount=Zh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ki(function(){vu(null,r,null,null)}),s[Er]=null}};function Eu(r){this._internalRoot=r}Eu.prototype.unstable_scheduleHydration=function(r){if(r){var s=El();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Gn.length&&s!==0&&s<Gn[a].priority;a++);Gn.splice(a,0,r),a===0&&Sl(r)}};function ef(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function wu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function s0(r,s,a,h,d){if(d){if(typeof h=="function"){var g=h;h=function(){var z=_u(E);g.call(z)}}var E=Ag(s,h,r,0,null,!1,!1,"",Cg);return r._reactRootContainer=E,r[Er]=E.current,oa(r.nodeType===8?r.parentNode:r),Ki(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var I=h;h=function(){var z=_u(x);I.call(z)}}var x=Yh(r,0,!1,null,null,!1,!1,"",Cg);return r._reactRootContainer=x,r[Er]=x.current,oa(r.nodeType===8?r.parentNode:r),Ki(function(){vu(s,x,a,h)}),x}function Tu(r,s,a,h,d){var g=a._reactRootContainer;if(g){var E=g;if(typeof d=="function"){var I=d;d=function(){var x=_u(E);I.call(x)}}vu(s,E,r,d)}else E=s0(a,s,r,d,h);return _u(E)}vl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=br(s.pendingLanes);a!==0&&(jr(s,a|1),nn(s,We()),!(Oe&6)&&(Zs=We()+500,Xr()))}break;case 13:Ki(function(){var h=Ar(r,1);if(h!==null){var d=Gt();$n(h,r,1,d)}}),Jh(r,1)}},As=function(r){if(r.tag===13){var s=Ar(r,134217728);if(s!==null){var a=Gt();$n(s,r,134217728,a)}Jh(r,134217728)}},_l=function(r){if(r.tag===13){var s=ni(r),a=Ar(r,s);if(a!==null){var h=Gt();$n(a,r,s,h)}Jh(r,s)}},El=function(){return Ve},wl=function(r,s){var a=Ve;try{return Ve=r,s()}finally{Ve=a}},ms=function(r,s,a){switch(s){case"input":if(ko(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var d=Bl(h);if(!d)throw Error(t(90));us(h),ko(h,d)}}}break;case"textarea":ds(r,a);break;case"select":s=a.value,s!=null&&fr(r,!!a.multiple,s,!1)}},Pi=qh,jo=Ki;var o0={usingClientEntryPoint:!1,Events:[ua,Us,Bl,Kn,Uo,qh]},Sa={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a0={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Wo(r),r===null?null:r.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{ki=Su.inject(a0),an=Su}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o0,rn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(s))throw Error(t(200));return i0(r,s,null,a)},rn.createRoot=function(r,s){if(!ef(r))throw Error(t(299));var a=!1,h="",d=Pg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Yh(r,1,!1,null,null,a,!1,h,d),r[Er]=s.current,oa(r.nodeType===8?r.parentNode:r),new Zh(s)},rn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Wo(s),r=r===null?null:r.stateNode,r},rn.flushSync=function(r){return Ki(r)},rn.hydrate=function(r,s,a){if(!wu(s))throw Error(t(200));return Tu(null,r,s,!0,a)},rn.hydrateRoot=function(r,s,a){if(!ef(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,g="",E=Pg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=Ag(s,null,r,1,a??null,d,!1,g,E),r[Er]=s.current,oa(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Eu(s)},rn.render=function(r,s,a){if(!wu(s))throw Error(t(200));return Tu(null,r,s,!1,a)},rn.unmountComponentAtNode=function(r){if(!wu(r))throw Error(t(40));return r._reactRootContainer?(Ki(function(){Tu(null,null,r,!1,function(){r._reactRootContainer=null,r[Er]=null})}),!0):!1},rn.unstable_batchedUpdates=qh,rn.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!wu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Tu(r,s,a,!1,h)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Lg;function m0(){if(Lg)return rf.exports;Lg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rf.exports=p0(),rf.exports}var Og;function g0(){if(Og)return Au;Og=1;var n=m0();return Au.createRoot=n.createRoot,Au.hydrateRoot=n.hydrateRoot,Au}var y0=g0();function Cf({children:n}){return me.jsx("div",{className:"p-4 bg-purple-800 rounded-2xl shadow-md",children:n})}function Yv({children:n,onClick:e}){return me.jsx("button",{className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-white",onClick:e,children:n})}function Jv({value:n,onChange:e,placeholder:t}){return me.jsx("textarea",{className:"w-full p-2 rounded-lg bg-purple-700 text-white resize-none",value:n,onChange:e,placeholder:t,rows:"4"})}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zv=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=fe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...f},p)=>fe.createElement("svg",{ref:p,..._0,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:Zv("lucide",o),...f},[...c.map(([y,_])=>fe.createElement(y,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=(n,e)=>{const t=fe.forwardRef(({className:i,...o},l)=>fe.createElement(E0,{ref:l,iconNode:e,className:Zv(`lucide-${v0(n)}`,i),...o}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],S0=w0("Upload",T0),e_=fe.createContext({});function A0(n){const e=fe.useRef(null);return e.current===null&&(e.current=n()),e.current}const dd=fe.createContext(null),t_=fe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function I0(n=!0){const e=fe.useContext(dd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:o}=e,l=fe.useId();fe.useEffect(()=>{n&&o(l)},[n]);const c=fe.useCallback(()=>n&&i&&i(l),[l,i,n]);return!t&&i?[!1,c]:[!0]}const pd=typeof window<"u",P0=pd?fe.useLayoutEffect:fe.useEffect,mn=n=>n;let Rf=mn;function md(n){let e;return()=>(e===void 0&&(e=n()),e)}const fo=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Rr=n=>n*1e3,xr=n=>n/1e3,C0={skipAnimations:!1,useManualTiming:!1};function R0(n){let e=new Set,t=new Set,i=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(y){l.has(y)&&(p.schedule(y),n()),y(c)}const p={schedule:(y,_=!1,w=!1)=>{const R=w&&i?e:t;return _&&l.add(y),R.has(y)||R.add(y),y},cancel:y=>{t.delete(y),l.delete(y)},process:y=>{if(c=y,i){o=!0;return}i=!0,[e,t]=[t,e],e.forEach(f),e.clear(),i=!1,o&&(o=!1,p.process(y))}};return p}const Iu=["read","resolveKeyframes","update","preRender","render","postRender"],x0=40;function n_(n,e){let t=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=Iu.reduce((W,H)=>(W[H]=R0(l),W),{}),{read:f,resolveKeyframes:p,update:y,preRender:_,render:w,postRender:S}=c,R=()=>{const W=performance.now();t=!1,o.delta=i?1e3/60:Math.max(Math.min(W-o.timestamp,x0),1),o.timestamp=W,o.isProcessing=!0,f.process(o),p.process(o),y.process(o),_.process(o),w.process(o),S.process(o),o.isProcessing=!1,t&&e&&(i=!1,n(R))},N=()=>{t=!0,i=!0,o.isProcessing||n(R)};return{schedule:Iu.reduce((W,H)=>{const X=c[H];return W[H]=(le,re=!1,ce=!1)=>(t||N(),X.schedule(le,re,ce)),W},{}),cancel:W=>{for(let H=0;H<Iu.length;H++)c[Iu[H]].cancel(W)},state:o,steps:c}}const{schedule:Ge,cancel:fi,state:Dt,steps:af}=n_(typeof requestAnimationFrame<"u"?requestAnimationFrame:mn,!0),r_=fe.createContext({strict:!1}),Fg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},po={};for(const n in Fg)po[n]={isEnabled:e=>Fg[n].some(t=>!!e[t])};function V0(n){for(const e in n)po[e]={...po[e],...n[e]}}const k0=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zu(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||k0.has(n)}let i_=n=>!zu(n);function D0(n){n&&(i_=e=>e.startsWith("on")?!zu(e):n(e))}try{D0(require("@emotion/is-prop-valid").default)}catch{}function N0(n,e,t){const i={};for(const o in n)o==="values"&&typeof n.values=="object"||(i_(o)||t===!0&&zu(o)||!e&&!zu(o)||n.draggable&&o.startsWith("onDrag"))&&(i[o]=n[o]);return i}function M0(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,o)=>o==="create"?n:(e.has(o)||e.set(o,n(o)),e.get(o))})}const ac=fe.createContext({});function ja(n){return typeof n=="string"||Array.isArray(n)}function lc(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const gd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yd=["initial",...gd];function uc(n){return lc(n.animate)||yd.some(e=>ja(n[e]))}function s_(n){return!!(uc(n)||n.variants)}function L0(n,e){if(uc(n)){const{initial:t,animate:i}=n;return{initial:t===!1||ja(t)?t:void 0,animate:ja(i)?i:void 0}}return n.inherit!==!1?e:{}}function O0(n){const{initial:e,animate:t}=L0(n,fe.useContext(ac));return fe.useMemo(()=>({initial:e,animate:t}),[bg(e),bg(t)])}function bg(n){return Array.isArray(n)?n.join(" "):n}const F0=Symbol.for("motionComponentSymbol");function so(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function b0(n,e,t){return fe.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):so(t)&&(t.current=i))},[e])}const vd=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),B0="framerAppearId",o_="data-"+vd(B0),{schedule:_d,cancel:KV}=n_(queueMicrotask,!1),a_=fe.createContext({});function U0(n,e,t,i,o){var l,c;const{visualElement:f}=fe.useContext(ac),p=fe.useContext(r_),y=fe.useContext(dd),_=fe.useContext(t_).reducedMotion,w=fe.useRef(null);i=i||p.renderer,!w.current&&i&&(w.current=i(n,{visualState:e,parent:f,props:t,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:_}));const S=w.current,R=fe.useContext(a_);S&&!S.projection&&o&&(S.type==="html"||S.type==="svg")&&j0(w.current,t,o,R);const N=fe.useRef(!1);fe.useInsertionEffect(()=>{S&&N.current&&S.update(t,y)});const O=t[o_],L=fe.useRef(!!O&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,O))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,O)));return P0(()=>{S&&(N.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),_d.render(S.render),L.current&&S.animationState&&S.animationState.animateChanges())}),fe.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)===null||W===void 0||W.call(window,O)}),L.current=!1))}),S}function j0(n,e,t,i){const{layoutId:o,layout:l,drag:c,dragConstraints:f,layoutScroll:p,layoutRoot:y}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:l_(n.parent)),n.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!c||f&&so(f),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:y})}function l_(n){if(n)return n.options.allowProjection!==!1?n.projection:l_(n.parent)}function z0({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:o}){var l,c;n&&V0(n);function f(y,_){let w;const S={...fe.useContext(t_),...y,layoutId:$0(y)},{isStatic:R}=S,N=O0(y),O=i(y,R);if(!R&&pd){W0();const L=q0(S);w=L.MeasureLayout,N.visualElement=U0(o,O,S,e,L.ProjectionNode)}return me.jsxs(ac.Provider,{value:N,children:[w&&N.visualElement?me.jsx(w,{visualElement:N.visualElement,...S}):null,t(o,y,b0(O,N.visualElement,_),O,R,N.visualElement)]})}f.displayName=`motion.${typeof o=="string"?o:`create(${(c=(l=o.displayName)!==null&&l!==void 0?l:o.name)!==null&&c!==void 0?c:""})`}`;const p=fe.forwardRef(f);return p[F0]=o,p}function $0({layoutId:n}){const e=fe.useContext(e_).id;return e&&n!==void 0?e+"-"+n:n}function W0(n,e){fe.useContext(r_).strict}function q0(n){const{drag:e,layout:t}=po;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const K0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ed(n){return typeof n!="string"||n.includes("-")?!1:!!(K0.indexOf(n)>-1||/[A-Z]/u.test(n))}function Bg(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function wd(n,e,t,i){if(typeof e=="function"){const[o,l]=Bg(i);e=e(t!==void 0?t:n.custom,o,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[o,l]=Bg(i);e=e(t!==void 0?t:n.custom,o,l)}return e}const xf=n=>Array.isArray(n),H0=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),G0=n=>xf(n)?n[n.length-1]||0:n,Wt=n=>!!(n&&n.getVelocity);function Nu(n){const e=Wt(n)?n.get():n;return H0(e)?e.toValue():e}function Q0({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,o,l){const c={latestValues:X0(i,o,l,n),renderState:e()};return t&&(c.onMount=f=>t({props:i,current:f,...c}),c.onUpdate=f=>t(f)),c}const u_=n=>(e,t)=>{const i=fe.useContext(ac),o=fe.useContext(dd),l=()=>Q0(n,e,i,o);return t?l():A0(l)};function X0(n,e,t,i){const o={},l=i(n,{});for(const S in l)o[S]=Nu(l[S]);let{initial:c,animate:f}=n;const p=uc(n),y=s_(n);e&&y&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let _=t?t.initial===!1:!1;_=_||c===!1;const w=_?f:c;if(w&&typeof w!="boolean"&&!lc(w)){const S=Array.isArray(w)?w:[w];for(let R=0;R<S.length;R++){const N=wd(n,S[R]);if(N){const{transitionEnd:O,transition:L,...W}=N;for(const H in W){let X=W[H];if(Array.isArray(X)){const le=_?X.length-1:0;X=X[le]}X!==null&&(o[H]=X)}for(const H in O)o[H]=O[H]}}}return o}const So=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],os=new Set(So),c_=n=>e=>typeof e=="string"&&e.startsWith(n),Td=c_("--"),Y0=c_("var(--"),Sd=n=>Y0(n)?J0.test(n.split("/*")[0].trim()):!1,J0=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,h_=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Vr=(n,e,t)=>t>e?e:t<n?n:t,Ao={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},za={...Ao,transform:n=>Vr(0,1,n)},Pu={...Ao,default:1},tl=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),oi=tl("deg"),rr=tl("%"),Ee=tl("px"),Z0=tl("vh"),eS=tl("vw"),Ug={...rr,parse:n=>rr.parse(n)/100,transform:n=>rr.transform(n*100)},tS={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee},nS={rotate:oi,rotateX:oi,rotateY:oi,rotateZ:oi,scale:Pu,scaleX:Pu,scaleY:Pu,scaleZ:Pu,skew:oi,skewX:oi,skewY:oi,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:za,originX:Ug,originY:Ug,originZ:Ee},jg={...Ao,transform:Math.round},Ad={...tS,...nS,zIndex:jg,size:Ee,fillOpacity:za,strokeOpacity:za,numOctaves:jg},rS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iS=So.length;function sS(n,e,t){let i="",o=!0;for(let l=0;l<iS;l++){const c=So[l],f=n[c];if(f===void 0)continue;let p=!0;if(typeof f=="number"?p=f===(c.startsWith("scale")?1:0):p=parseFloat(f)===0,!p||t){const y=h_(f,Ad[c]);if(!p){o=!1;const _=rS[c]||c;i+=`${_}(${y}) `}t&&(e[c]=y)}}return i=i.trim(),t?i=t(e,o?"":i):o&&(i="none"),i}function Id(n,e,t){const{style:i,vars:o,transformOrigin:l}=n;let c=!1,f=!1;for(const p in e){const y=e[p];if(os.has(p)){c=!0;continue}else if(Td(p)){o[p]=y;continue}else{const _=h_(y,Ad[p]);p.startsWith("origin")?(f=!0,l[p]=_):i[p]=_}}if(e.transform||(c||t?i.transform=sS(e,n.transform,t):i.transform&&(i.transform="none")),f){const{originX:p="50%",originY:y="50%",originZ:_=0}=l;i.transformOrigin=`${p} ${y} ${_}`}}const oS={offset:"stroke-dashoffset",array:"stroke-dasharray"},aS={offset:"strokeDashoffset",array:"strokeDasharray"};function lS(n,e,t=1,i=0,o=!0){n.pathLength=1;const l=o?oS:aS;n[l.offset]=Ee.transform(-i);const c=Ee.transform(e),f=Ee.transform(t);n[l.array]=`${c} ${f}`}function zg(n,e,t){return typeof n=="string"?n:Ee.transform(e+t*n)}function uS(n,e,t){const i=zg(e,n.x,n.width),o=zg(t,n.y,n.height);return`${i} ${o}`}function Pd(n,{attrX:e,attrY:t,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:f=1,pathOffset:p=0,...y},_,w){if(Id(n,y,w),_){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:S,style:R,dimensions:N}=n;S.transform&&(N&&(R.transform=S.transform),delete S.transform),N&&(o!==void 0||l!==void 0||R.transform)&&(R.transformOrigin=uS(N,o!==void 0?o:.5,l!==void 0?l:.5)),e!==void 0&&(S.x=e),t!==void 0&&(S.y=t),i!==void 0&&(S.scale=i),c!==void 0&&lS(S,c,f,p,!1)}const Cd=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),f_=()=>({...Cd(),attrs:{}}),Rd=n=>typeof n=="string"&&n.toLowerCase()==="svg";function d_(n,{style:e,vars:t},i,o){Object.assign(n.style,e,o&&o.getProjectionStyles(i));for(const l in t)n.style.setProperty(l,t[l])}const p_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function m_(n,e,t,i){d_(n,e,void 0,i);for(const o in e.attrs)n.setAttribute(p_.has(o)?o:vd(o),e.attrs[o])}const $a={};function cS(n){for(const e in n)$a[e]=n[e],Td(e)&&($a[e].isCSSVariable=!0)}function g_(n,{layout:e,layoutId:t}){return os.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!$a[n]||n==="opacity")}function xd(n,e,t){var i;const{style:o}=n,l={};for(const c in o)(Wt(o[c])||e.style&&Wt(e.style[c])||g_(c,n)||((i=t==null?void 0:t.getValue(c))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(l[c]=o[c]);return l}function y_(n,e,t){const i=xd(n,e,t);for(const o in n)if(Wt(n[o])||Wt(e[o])){const l=So.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[l]=n[o]}return i}function hS(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const $g=["x","y","width","height","cx","cy","r"],fS={useVisualState:u_({scrapeMotionValuesFromProps:y_,createRenderState:f_,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:o})=>{if(!t)return;let l=!!n.drag;if(!l){for(const f in o)if(os.has(f)){l=!0;break}}if(!l)return;let c=!e;if(e)for(let f=0;f<$g.length;f++){const p=$g[f];n[p]!==e[p]&&(c=!0)}c&&Ge.read(()=>{hS(t,i),Ge.render(()=>{Pd(i,o,Rd(t.tagName),n.transformTemplate),m_(t,i)})})}})},dS={useVisualState:u_({scrapeMotionValuesFromProps:xd,createRenderState:Cd})};function v_(n,e,t){for(const i in e)!Wt(e[i])&&!g_(i,t)&&(n[i]=e[i])}function pS({transformTemplate:n},e){return fe.useMemo(()=>{const t=Cd();return Id(t,e,n),Object.assign({},t.vars,t.style)},[e])}function mS(n,e){const t=n.style||{},i={};return v_(i,t,n),Object.assign(i,pS(n,e)),i}function gS(n,e){const t={},i=mS(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function yS(n,e,t,i){const o=fe.useMemo(()=>{const l=f_();return Pd(l,e,Rd(i),n.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};v_(l,n.style,n),o.style={...l,...o.style}}return o}function vS(n=!1){return(t,i,o,{latestValues:l},c)=>{const p=(Ed(t)?yS:gS)(i,l,c,t),y=N0(i,typeof t=="string",n),_=t!==fe.Fragment?{...y,...p,ref:o}:{},{children:w}=i,S=fe.useMemo(()=>Wt(w)?w.get():w,[w]);return fe.createElement(t,{..._,children:S})}}function _S(n,e){return function(i,{forwardMotionProps:o}={forwardMotionProps:!1}){const c={...Ed(i)?fS:dS,preloadedFeatures:n,useRender:vS(o),createVisualElement:e,Component:i};return z0(c)}}function __(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function cc(n,e,t){const i=n.getProps();return wd(i,e,t!==void 0?t:i.custom,n)}const ES=md(()=>window.ScrollTimeline!==void 0);class wS{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(o=>{if(ES()&&o.attachTimeline)return o.attachTimeline(e);if(typeof t=="function")return t(o)});return()=>{i.forEach((o,l)=>{o&&o(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class TS extends wS{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Vd(n,e){return n?n[e]||n.default||n:void 0}const Vf=2e4;function E_(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Vf;)e+=t,i=n.next(e);return e>=Vf?1/0:e}function kd(n){return typeof n=="function"}function Wg(n,e){n.timeline=e,n.onfinish=null}const Dd=n=>Array.isArray(n)&&typeof n[0]=="number",SS={linearEasing:void 0};function AS(n,e){const t=md(n);return()=>{var i;return(i=SS[e])!==null&&i!==void 0?i:t()}}const $u=AS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),w_=(n,e,t=10)=>{let i="";const o=Math.max(Math.round(e/t),2);for(let l=0;l<o;l++)i+=n(fo(0,o-1,l))+", ";return`linear(${i.substring(0,i.length-2)})`};function T_(n){return!!(typeof n=="function"&&$u()||!n||typeof n=="string"&&(n in kf||$u())||Dd(n)||Array.isArray(n)&&n.every(T_))}const Pa=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,kf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pa([0,.65,.55,1]),circOut:Pa([.55,0,1,.45]),backIn:Pa([.31,.01,.66,-.59]),backOut:Pa([.33,1.53,.69,.99])};function S_(n,e){if(n)return typeof n=="function"&&$u()?w_(n,e):Dd(n)?Pa(n):Array.isArray(n)?n.map(t=>S_(t,e)||kf.easeOut):kf[n]}const Wn={x:!1,y:!1};function A_(){return Wn.x||Wn.y}function IS(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let o=document;const l=(i=void 0)!==null&&i!==void 0?i:o.querySelectorAll(n);return l?Array.from(l):[]}return Array.from(n)}function I_(n,e){const t=IS(n),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[t,o,()=>i.abort()]}function qg(n){return!(n.pointerType==="touch"||A_())}function PS(n,e,t={}){const[i,o,l]=I_(n,t),c=f=>{if(!qg(f))return;const{target:p}=f,y=e(p,f);if(typeof y!="function"||!p)return;const _=w=>{qg(w)&&(y(w),p.removeEventListener("pointerleave",_))};p.addEventListener("pointerleave",_,o)};return i.forEach(f=>{f.addEventListener("pointerenter",c,o)}),l}const P_=(n,e)=>e?n===e?!0:P_(n,e.parentElement):!1,Nd=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,CS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RS(n){return CS.has(n.tagName)||n.tabIndex!==-1}const Ca=new WeakSet;function Kg(n){return e=>{e.key==="Enter"&&n(e)}}function lf(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xS=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Kg(()=>{if(Ca.has(t))return;lf(t,"down");const o=Kg(()=>{lf(t,"up")}),l=()=>lf(t,"cancel");t.addEventListener("keyup",o,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Hg(n){return Nd(n)&&!A_()}function VS(n,e,t={}){const[i,o,l]=I_(n,t),c=f=>{const p=f.currentTarget;if(!Hg(f)||Ca.has(p))return;Ca.add(p);const y=e(p,f),_=(R,N)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",S),!(!Hg(R)||!Ca.has(p))&&(Ca.delete(p),typeof y=="function"&&y(R,{success:N}))},w=R=>{_(R,t.useGlobalTarget||P_(p,R.target))},S=R=>{_(R,!1)};window.addEventListener("pointerup",w,o),window.addEventListener("pointercancel",S,o)};return i.forEach(f=>{!RS(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(t.useGlobalTarget?window:f).addEventListener("pointerdown",c,o),f.addEventListener("focus",y=>xS(y,o),o)}),l}function kS(n){return n==="x"||n==="y"?Wn[n]?null:(Wn[n]=!0,()=>{Wn[n]=!1}):Wn.x||Wn.y?null:(Wn.x=Wn.y=!0,()=>{Wn.x=Wn.y=!1})}const C_=new Set(["width","height","top","left","right","bottom",...So]);let Mu;function DS(){Mu=void 0}const ir={now:()=>(Mu===void 0&&ir.set(Dt.isProcessing||C0.useManualTiming?Dt.timestamp:performance.now()),Mu),set:n=>{Mu=n,queueMicrotask(DS)}};function Md(n,e){n.indexOf(e)===-1&&n.push(e)}function Ld(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Od{constructor(){this.subscriptions=[]}add(e){return Md(this.subscriptions,e),()=>Ld(this.subscriptions,e)}notify(e,t,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,i);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function R_(n,e){return e?n*(1e3/e):0}const Gg=30,NS=n=>!isNaN(parseFloat(n));class MS{constructor(e,t={}){this.version="12.0.6",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,o=!0)=>{const l=ir.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ir.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NS(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Od);const i=this.events[e].add(t);return e==="change"?()=>{i(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ir.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Gg)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Gg);return R_(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wa(n,e){return new MS(n,e)}function LS(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Wa(t))}function OS(n,e){const t=cc(n,e);let{transitionEnd:i={},transition:o={},...l}=t||{};l={...l,...i};for(const c in l){const f=G0(l[c]);LS(n,c,f)}}function FS(n){return!!(Wt(n)&&n.add)}function Df(n,e){const t=n.getValue("willChange");if(FS(t))return t.add(e)}function x_(n){return n.props[o_]}const V_=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,bS=1e-7,BS=12;function US(n,e,t,i,o){let l,c,f=0;do c=e+(t-e)/2,l=V_(c,i,o)-n,l>0?t=c:e=c;while(Math.abs(l)>bS&&++f<BS);return c}function nl(n,e,t,i){if(n===e&&t===i)return mn;const o=l=>US(l,0,1,n,t);return l=>l===0||l===1?l:V_(o(l),e,i)}const k_=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,D_=n=>e=>1-n(1-e),N_=nl(.33,1.53,.69,.99),Fd=D_(N_),M_=k_(Fd),L_=n=>(n*=2)<1?.5*Fd(n):.5*(2-Math.pow(2,-10*(n-1))),bd=n=>1-Math.sin(Math.acos(n)),O_=D_(bd),F_=k_(bd),b_=n=>/^0[^.\s]+$/u.test(n);function jS(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||b_(n):!0}const Na=n=>Math.round(n*1e5)/1e5,Bd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zS(n){return n==null}const $S=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ud=(n,e)=>t=>!!(typeof t=="string"&&$S.test(t)&&t.startsWith(n)||e&&!zS(t)&&Object.prototype.hasOwnProperty.call(t,e)),B_=(n,e,t)=>i=>{if(typeof i!="string")return i;const[o,l,c,f]=i.match(Bd);return{[n]:parseFloat(o),[e]:parseFloat(l),[t]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},WS=n=>Vr(0,255,n),uf={...Ao,transform:n=>Math.round(WS(n))},es={test:Ud("rgb","red"),parse:B_("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+uf.transform(n)+", "+uf.transform(e)+", "+uf.transform(t)+", "+Na(za.transform(i))+")"};function qS(n){let e="",t="",i="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Nf={test:Ud("#"),parse:qS,transform:es.transform},oo={test:Ud("hsl","hue"),parse:B_("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+rr.transform(Na(e))+", "+rr.transform(Na(t))+", "+Na(za.transform(i))+")"},jt={test:n=>es.test(n)||Nf.test(n)||oo.test(n),parse:n=>es.test(n)?es.parse(n):oo.test(n)?oo.parse(n):Nf.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?es.transform(n):oo.transform(n)},KS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HS(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Bd))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(KS))===null||t===void 0?void 0:t.length)||0)>0}const U_="number",j_="color",GS="var",QS="var(",Qg="${}",XS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qa(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},o=[];let l=0;const f=e.replace(XS,p=>(jt.test(p)?(i.color.push(l),o.push(j_),t.push(jt.parse(p))):p.startsWith(QS)?(i.var.push(l),o.push(GS),t.push(p)):(i.number.push(l),o.push(U_),t.push(parseFloat(p))),++l,Qg)).split(Qg);return{values:t,split:f,indexes:i,types:o}}function z_(n){return qa(n).values}function $_(n){const{split:e,types:t}=qa(n),i=e.length;return o=>{let l="";for(let c=0;c<i;c++)if(l+=e[c],o[c]!==void 0){const f=t[c];f===U_?l+=Na(o[c]):f===j_?l+=jt.transform(o[c]):l+=o[c]}return l}}const YS=n=>typeof n=="number"?0:n;function JS(n){const e=z_(n);return $_(n)(e.map(YS))}const di={test:HS,parse:z_,createTransformer:$_,getAnimatableNone:JS},ZS=new Set(["brightness","contrast","saturate","opacity"]);function eA(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Bd)||[];if(!i)return n;const o=t.replace(i,"");let l=ZS.has(e)?1:0;return i!==t&&(l*=100),e+"("+l+o+")"}const tA=/\b([a-z-]*)\(.*?\)/gu,Mf={...di,getAnimatableNone:n=>{const e=n.match(tA);return e?e.map(eA).join(" "):n}},nA={...Ad,color:jt,backgroundColor:jt,outlineColor:jt,fill:jt,stroke:jt,borderColor:jt,borderTopColor:jt,borderRightColor:jt,borderBottomColor:jt,borderLeftColor:jt,filter:Mf,WebkitFilter:Mf},jd=n=>nA[n];function W_(n,e){let t=jd(n);return t!==Mf&&(t=di),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rA=new Set(["auto","none","0"]);function iA(n,e,t){let i=0,o;for(;i<n.length&&!o;){const l=n[i];typeof l=="string"&&!rA.has(l)&&qa(l).values.length&&(o=n[i]),i++}if(o&&t)for(const l of e)n[l]=W_(t,o)}const Xg=n=>n===Ao||n===Ee,Yg=(n,e)=>parseFloat(n.split(", ")[e]),Jg=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return Yg(o[1],e);{const l=i.match(/^matrix\((.+)\)$/u);return l?Yg(l[1],n):0}},sA=new Set(["x","y","z"]),oA=So.filter(n=>!sA.has(n));function aA(n){const e=[];return oA.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const mo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Jg(4,13),y:Jg(5,14)};mo.translateX=mo.x;mo.translateY=mo.y;const ns=new Set;let Lf=!1,Of=!1;function q_(){if(Of){const n=Array.from(ns).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const o=aA(i);o.length&&(t.set(i,o),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=t.get(i);o&&o.forEach(([l,c])=>{var f;(f=i.getValue(l))===null||f===void 0||f.set(c)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Of=!1,Lf=!1,ns.forEach(n=>n.complete()),ns.clear()}function K_(){ns.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Of=!0)})}function lA(){K_(),q_()}class zd{constructor(e,t,i,o,l,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=o,this.element=l,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ns.add(this),Lf||(Lf=!0,Ge.read(K_),Ge.resolveKeyframes(q_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:o}=this;for(let l=0;l<e.length;l++)if(e[l]===null)if(l===0){const c=o==null?void 0:o.get(),f=e[e.length-1];if(c!==void 0)e[0]=c;else if(i&&t){const p=i.readValue(t,f);p!=null&&(e[0]=p)}e[0]===void 0&&(e[0]=f),o&&c===void 0&&o.set(e[0])}else e[l]=e[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ns.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ns.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const H_=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),uA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cA(n){const e=uA.exec(n);if(!e)return[,];const[,t,i,o]=e;return[`--${t??i}`,o]}function G_(n,e,t=1){const[i,o]=cA(n);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return H_(c)?parseFloat(c):c}return Sd(o)?G_(o,e,t+1):o}const Q_=n=>e=>e.test(n),hA={test:n=>n==="auto",parse:n=>n},X_=[Ao,Ee,rr,oi,eS,Z0,hA],Zg=n=>X_.find(Q_(n));class Y_ extends zd{constructor(e,t,i,o,l){super(e,t,i,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let y=e[p];if(typeof y=="string"&&(y=y.trim(),Sd(y))){const _=G_(y,t.current);_!==void 0&&(e[p]=_),p===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!C_.has(i)||e.length!==2)return;const[o,l]=e,c=Zg(o),f=Zg(l);if(c!==f)if(Xg(c)&&Xg(f))for(let p=0;p<e.length;p++){const y=e[p];typeof y=="string"&&(e[p]=parseFloat(y))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let o=0;o<e.length;o++)jS(e[o])&&i.push(o);i.length&&iA(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const l=t.getValue(i);l&&l.jump(this.measuredOrigin,!1);const c=o.length-1,f=o[c];o[c]=mo[i](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([p,y])=>{t.getValue(p).set(y)}),this.resolveNoneKeyframes()}}const ey=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(di.test(n)||n==="0")&&!n.startsWith("url("));function fA(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function dA(n,e,t,i){const o=n[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=ey(o,e),f=ey(l,e);return!c||!f?!1:fA(n)||(t==="spring"||kd(t))&&i}const pA=n=>n!==null;function hc(n,{repeat:e,repeatType:t="loop"},i){const o=n.filter(pA),l=e&&t!=="loop"&&e%2===1?0:o.length-1;return!l||i===void 0?o[l]:i}const mA=40;class J_{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ir.now(),this.options={autoplay:e,delay:t,type:i,repeat:o,repeatDelay:l,repeatType:c,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>mA?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&lA(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ir.now(),this.hasAttemptedResolve=!0;const{name:i,type:o,velocity:l,delay:c,onComplete:f,onUpdate:p,isGenerator:y}=this.options;if(!y&&!dA(e,i,o,l))if(c)this.options.duration=0;else{p&&p(hc(e,this.options,t)),f&&f(),this.resolveFinishedPromise();return}const _=this.initPlayback(e,t);_!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,..._},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tt=(n,e,t)=>n+(e-n)*t;function cf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function gA({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let o=0,l=0,c=0;if(!e)o=l=c=t;else{const f=t<.5?t*(1+e):t+e-t*e,p=2*t-f;o=cf(p,f,n+1/3),l=cf(p,f,n),c=cf(p,f,n-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}function Wu(n,e){return t=>t>0?e:n}const hf=(n,e,t)=>{const i=n*n,o=t*(e*e-i)+i;return o<0?0:Math.sqrt(o)},yA=[Nf,es,oo],vA=n=>yA.find(e=>e.test(n));function ty(n){const e=vA(n);if(!e)return!1;let t=e.parse(n);return e===oo&&(t=gA(t)),t}const ny=(n,e)=>{const t=ty(n),i=ty(e);if(!t||!i)return Wu(n,e);const o={...t};return l=>(o.red=hf(t.red,i.red,l),o.green=hf(t.green,i.green,l),o.blue=hf(t.blue,i.blue,l),o.alpha=tt(t.alpha,i.alpha,l),es.transform(o))},_A=(n,e)=>t=>e(n(t)),rl=(...n)=>n.reduce(_A),Ff=new Set(["none","hidden"]);function EA(n,e){return Ff.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function wA(n,e){return t=>tt(n,e,t)}function $d(n){return typeof n=="number"?wA:typeof n=="string"?Sd(n)?Wu:jt.test(n)?ny:AA:Array.isArray(n)?Z_:typeof n=="object"?jt.test(n)?ny:TA:Wu}function Z_(n,e){const t=[...n],i=t.length,o=n.map((l,c)=>$d(l)(l,e[c]));return l=>{for(let c=0;c<i;c++)t[c]=o[c](l);return t}}function TA(n,e){const t={...n,...e},i={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(i[o]=$d(n[o])(n[o],e[o]));return o=>{for(const l in i)t[l]=i[l](o);return t}}function SA(n,e){var t;const i=[],o={color:0,var:0,number:0};for(let l=0;l<e.values.length;l++){const c=e.types[l],f=n.indexes[c][o[c]],p=(t=n.values[f])!==null&&t!==void 0?t:0;i[l]=p,o[c]++}return i}const AA=(n,e)=>{const t=di.createTransformer(e),i=qa(n),o=qa(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Ff.has(n)&&!o.values.length||Ff.has(e)&&!i.values.length?EA(n,e):rl(Z_(SA(i,o),o.values),t):Wu(n,e)};function eE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?tt(n,e,t):$d(n)(n,e)}const IA=5;function tE(n,e,t){const i=Math.max(e-IA,0);return R_(t-n(i),e-i)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ry=.001;function PA({duration:n=it.duration,bounce:e=it.bounce,velocity:t=it.velocity,mass:i=it.mass}){let o,l,c=1-e;c=Vr(it.minDamping,it.maxDamping,c),n=Vr(it.minDuration,it.maxDuration,xr(n)),c<1?(o=y=>{const _=y*c,w=_*n,S=_-t,R=bf(y,c),N=Math.exp(-w);return ry-S/R*N},l=y=>{const w=y*c*n,S=w*t+t,R=Math.pow(c,2)*Math.pow(y,2)*n,N=Math.exp(-w),O=bf(Math.pow(y,2),c);return(-o(y)+ry>0?-1:1)*((S-R)*N)/O}):(o=y=>{const _=Math.exp(-y*n),w=(y-t)*n+1;return-.001+_*w},l=y=>{const _=Math.exp(-y*n),w=(t-y)*(n*n);return _*w});const f=5/n,p=RA(o,l,f);if(n=Rr(n),isNaN(p))return{stiffness:it.stiffness,damping:it.damping,duration:n};{const y=Math.pow(p,2)*i;return{stiffness:y,damping:c*2*Math.sqrt(i*y),duration:n}}}const CA=12;function RA(n,e,t){let i=t;for(let o=1;o<CA;o++)i=i-n(i)/e(i);return i}function bf(n,e){return n*Math.sqrt(1-e*e)}const xA=["duration","bounce"],VA=["stiffness","damping","mass"];function iy(n,e){return e.some(t=>n[t]!==void 0)}function kA(n){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...n};if(!iy(n,VA)&&iy(n,xA))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),o=i*i,l=2*Vr(.05,1,1-(n.bounce||0))*Math.sqrt(o);e={...e,mass:it.mass,stiffness:o,damping:l}}else{const t=PA(n);e={...e,...t,mass:it.mass},e.isResolvedFromDuration=!0}return e}function nE(n=it.visualDuration,e=it.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:o}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],f={done:!1,value:l},{stiffness:p,damping:y,mass:_,duration:w,velocity:S,isResolvedFromDuration:R}=kA({...t,velocity:-xr(t.velocity||0)}),N=S||0,O=y/(2*Math.sqrt(p*_)),L=c-l,W=xr(Math.sqrt(p/_)),H=Math.abs(L)<5;i||(i=H?it.restSpeed.granular:it.restSpeed.default),o||(o=H?it.restDelta.granular:it.restDelta.default);let X;if(O<1){const re=bf(W,O);X=ce=>{const k=Math.exp(-O*W*ce);return c-k*((N+O*W*L)/re*Math.sin(re*ce)+L*Math.cos(re*ce))}}else if(O===1)X=re=>c-Math.exp(-W*re)*(L+(N+W*L)*re);else{const re=W*Math.sqrt(O*O-1);X=ce=>{const k=Math.exp(-O*W*ce),A=Math.min(re*ce,300);return c-k*((N+O*W*L)*Math.sinh(A)+re*L*Math.cosh(A))/re}}const le={calculatedDuration:R&&w||null,next:re=>{const ce=X(re);if(R)f.done=re>=w;else{let k=0;O<1&&(k=re===0?Rr(N):tE(X,re,ce));const A=Math.abs(k)<=i,P=Math.abs(c-ce)<=o;f.done=A&&P}return f.value=f.done?c:ce,f},toString:()=>{const re=Math.min(E_(le),Vf),ce=w_(k=>le.next(re*k).value,re,30);return re+"ms "+ce}};return le}function sy({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:p,restDelta:y=.5,restSpeed:_}){const w=n[0],S={done:!1,value:w},R=A=>f!==void 0&&A<f||p!==void 0&&A>p,N=A=>f===void 0?p:p===void 0||Math.abs(f-A)<Math.abs(p-A)?f:p;let O=t*e;const L=w+O,W=c===void 0?L:c(L);W!==L&&(O=W-w);const H=A=>-O*Math.exp(-A/i),X=A=>W+H(A),le=A=>{const P=H(A),V=X(A);S.done=Math.abs(P)<=y,S.value=S.done?W:V};let re,ce;const k=A=>{R(S.value)&&(re=A,ce=nE({keyframes:[S.value,N(S.value)],velocity:tE(X,A,S.value),damping:o,stiffness:l,restDelta:y,restSpeed:_}))};return k(0),{calculatedDuration:null,next:A=>{let P=!1;return!ce&&re===void 0&&(P=!0,le(A),k(A)),re!==void 0&&A>=re?ce.next(A-re):(!P&&le(A),S)}}}const DA=nl(.42,0,1,1),NA=nl(0,0,.58,1),rE=nl(.42,0,.58,1),MA=n=>Array.isArray(n)&&typeof n[0]!="number",oy={linear:mn,easeIn:DA,easeInOut:rE,easeOut:NA,circIn:bd,circInOut:F_,circOut:O_,backIn:Fd,backInOut:M_,backOut:N_,anticipate:L_},ay=n=>{if(Dd(n)){Rf(n.length===4);const[e,t,i,o]=n;return nl(e,t,i,o)}else if(typeof n=="string")return Rf(oy[n]!==void 0),oy[n];return n};function LA(n,e,t){const i=[],o=t||eE,l=n.length-1;for(let c=0;c<l;c++){let f=o(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||mn:e;f=rl(p,f)}i.push(f)}return i}function OA(n,e,{clamp:t=!0,ease:i,mixer:o}={}){const l=n.length;if(Rf(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=LA(e,i,o),p=f.length,y=_=>{if(c&&_<n[0])return e[0];let w=0;if(p>1)for(;w<n.length-2&&!(_<n[w+1]);w++);const S=fo(n[w],n[w+1],_);return f[w](S)};return t?_=>y(Vr(n[0],n[l-1],_)):y}function FA(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const o=fo(0,e,i);n.push(tt(t,1,o))}}function bA(n){const e=[0];return FA(e,n.length-1),e}function BA(n,e){return n.map(t=>t*e)}function UA(n,e){return n.map(()=>e||rE).splice(0,n.length-1)}function qu({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const o=MA(i)?i.map(ay):ay(i),l={done:!1,value:e[0]},c=BA(t&&t.length===e.length?t:bA(e),n),f=OA(c,e,{ease:Array.isArray(o)?o:UA(e,o)});return{calculatedDuration:n,next:p=>(l.value=f(p),l.done=p>=n,l)}}const jA=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ge.update(e,!0),stop:()=>fi(e),now:()=>Dt.isProcessing?Dt.timestamp:ir.now()}},zA={decay:sy,inertia:sy,tween:qu,keyframes:qu,spring:nE},$A=n=>n/100;class Wd extends J_{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()};const{name:t,motionValue:i,element:o,keyframes:l}=this.options,c=(o==null?void 0:o.KeyframeResolver)||zd,f=(p,y)=>this.onKeyframesResolved(p,y);this.resolver=new c(l,f,t,i,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l,velocity:c=0}=this.options,f=kd(t)?t:zA[t]||qu;let p,y;f!==qu&&typeof e[0]!="number"&&(p=rl($A,eE(e[0],e[1])),e=[0,100]);const _=f({...this.options,keyframes:e});l==="mirror"&&(y=f({...this.options,keyframes:[...e].reverse(),velocity:-c})),_.calculatedDuration===null&&(_.calculatedDuration=E_(_));const{calculatedDuration:w}=_,S=w+o,R=S*(i+1)-o;return{generator:_,mirroredGenerator:y,mapPercentToKeyframes:p,calculatedDuration:w,resolvedDuration:S,totalDuration:R}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:o,generator:l,mirroredGenerator:c,mapPercentToKeyframes:f,keyframes:p,calculatedDuration:y,totalDuration:_,resolvedDuration:w}=i;if(this.startTime===null)return l.next(0);const{delay:S,repeat:R,repeatType:N,repeatDelay:O,onUpdate:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-_/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const W=this.currentTime-S*(this.speed>=0?1:-1),H=this.speed>=0?W<0:W>_;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=_);let X=this.currentTime,le=l;if(R){const A=Math.min(this.currentTime,_)/w;let P=Math.floor(A),V=A%1;!V&&A>=1&&(V=1),V===1&&P--,P=Math.min(P,R+1),!!(P%2)&&(N==="reverse"?(V=1-V,O&&(V-=O/w)):N==="mirror"&&(le=c)),X=Vr(0,1,V)*w}const re=H?{done:!1,value:p[0]}:le.next(X);f&&(re.value=f(re.value));let{done:ce}=re;!H&&y!==null&&(ce=this.speed>=0?this.currentTime>=_:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ce);return k&&o!==void 0&&(re.value=hc(p,this.options,o)),L&&L(re.value),k&&this.finish(),re}get duration(){const{resolved:e}=this;return e?xr(e.calculatedDuration):0}get time(){return xr(this.currentTime)}set time(e){e=Rr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=xr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=jA,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),t&&t();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const WA=new Set(["opacity","clipPath","filter","transform"]);function qA(n,e,t,{delay:i=0,duration:o=300,repeat:l=0,repeatType:c="loop",ease:f="easeInOut",times:p}={}){const y={[e]:t};p&&(y.offset=p);const _=S_(f,o);return Array.isArray(_)&&(y.easing=_),n.animate(y,{delay:i,duration:o,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}const KA=md(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ku=10,HA=2e4;function GA(n){return kd(n.type)||n.type==="spring"||!T_(n.ease)}function QA(n,e){const t=new Wd({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const o=[];let l=0;for(;!i.done&&l<HA;)i=t.sample(l),o.push(i.value),l+=Ku;return{times:void 0,keyframes:o,duration:l-Ku,ease:"linear"}}const iE={anticipate:L_,backInOut:M_,circInOut:F_};function XA(n){return n in iE}class ly extends J_{constructor(e){super(e);const{name:t,motionValue:i,element:o,keyframes:l}=this.options;this.resolver=new Y_(l,(c,f)=>this.onKeyframesResolved(c,f),t,i,o),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:o,ease:l,type:c,motionValue:f,name:p,startTime:y}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof l=="string"&&$u()&&XA(l)&&(l=iE[l]),GA(this.options)){const{onComplete:w,onUpdate:S,motionValue:R,element:N,...O}=this.options,L=QA(e,O);e=L.keyframes,e.length===1&&(e[1]=e[0]),i=L.duration,o=L.times,l=L.ease,c="keyframes"}const _=qA(f.owner.current,p,e,{...this.options,duration:i,times:o,ease:l});return _.startTime=y??this.calcStartTime(),this.pendingTimeline?(Wg(_,this.pendingTimeline),this.pendingTimeline=void 0):_.onfinish=()=>{const{onComplete:w}=this.options;f.set(hc(e,this.options,t)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:_,duration:i,times:o,type:c,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return xr(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return xr(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Rr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return mn;const{animation:i}=t;Wg(i,e)}return mn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:o,type:l,ease:c,times:f}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:y,onUpdate:_,onComplete:w,element:S,...R}=this.options,N=new Wd({...R,keyframes:i,duration:o,type:l,ease:c,times:f,isGenerator:!0}),O=Rr(this.time);y.setWithVelocity(N.sample(O-Ku).value,N.sample(O).value,Ku)}const{onStop:p}=this.options;p&&p(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:o,repeatType:l,damping:c,type:f}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:y}=t.owner.getProps();return KA()&&i&&WA.has(i)&&!p&&!y&&!o&&l!=="mirror"&&c!==0&&f!=="inertia"}}const YA={type:"spring",stiffness:500,damping:25,restSpeed:10},JA=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),ZA={type:"keyframes",duration:.8},e1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t1=(n,{keyframes:e})=>e.length>2?ZA:os.has(n)?n.startsWith("scale")?JA(e[1]):YA:e1;function n1({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:f,from:p,elapsed:y,..._}){return!!Object.keys(_).length}const qd=(n,e,t,i={},o,l)=>c=>{const f=Vd(i,n)||{},p=f.delay||i.delay||0;let{elapsed:y=0}=i;y=y-Rr(p);let _={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-y,onUpdate:S=>{e.set(S),f.onUpdate&&f.onUpdate(S)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:l?void 0:o};n1(f)||(_={..._,...t1(n,_)}),_.duration&&(_.duration=Rr(_.duration)),_.repeatDelay&&(_.repeatDelay=Rr(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let w=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(_.duration=0,_.delay===0&&(w=!0)),w&&!l&&e.get()!==void 0){const S=hc(_.keyframes,f);if(S!==void 0)return Ge.update(()=>{_.onUpdate(S),_.onComplete()}),new TS([])}return!l&&ly.supports(_)?new ly(_):new Wd(_)};function r1({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function sE(n,e,{delay:t=0,transitionOverride:i,type:o}={}){var l;let{transition:c=n.getDefaultTransition(),transitionEnd:f,...p}=e;i&&(c=i);const y=[],_=o&&n.animationState&&n.animationState.getState()[o];for(const w in p){const S=n.getValue(w,(l=n.latestValues[w])!==null&&l!==void 0?l:null),R=p[w];if(R===void 0||_&&r1(_,w))continue;const N={delay:t,...Vd(c||{},w)};let O=!1;if(window.MotionHandoffAnimation){const W=x_(n);if(W){const H=window.MotionHandoffAnimation(W,w,Ge);H!==null&&(N.startTime=H,O=!0)}}Df(n,w),S.start(qd(w,S,R,n.shouldReduceMotion&&C_.has(w)?{type:!1}:N,n,O));const L=S.animation;L&&y.push(L)}return f&&Promise.all(y).then(()=>{Ge.update(()=>{f&&OS(n,f)})}),y}function Bf(n,e,t={}){var i;const o=cc(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:l=n.getDefaultTransition()||{}}=o||{};t.transitionOverride&&(l=t.transitionOverride);const c=o?()=>Promise.all(sE(n,o,t)):()=>Promise.resolve(),f=n.variantChildren&&n.variantChildren.size?(y=0)=>{const{delayChildren:_=0,staggerChildren:w,staggerDirection:S}=l;return i1(n,e,_+y,w,S,t)}:()=>Promise.resolve(),{when:p}=l;if(p){const[y,_]=p==="beforeChildren"?[c,f]:[f,c];return y().then(()=>_())}else return Promise.all([c(),f(t.delay)])}function i1(n,e,t=0,i=0,o=1,l){const c=[],f=(n.variantChildren.size-1)*i,p=o===1?(y=0)=>y*i:(y=0)=>f-y*i;return Array.from(n.variantChildren).sort(s1).forEach((y,_)=>{y.notify("AnimationStart",e),c.push(Bf(y,e,{...l,delay:t+p(_)}).then(()=>y.notify("AnimationComplete",e)))}),Promise.all(c)}function s1(n,e){return n.sortNodePosition(e)}function o1(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>Bf(n,l,t));i=Promise.all(o)}else if(typeof e=="string")i=Bf(n,e,t);else{const o=typeof e=="function"?cc(n,e,t.custom):e;i=Promise.all(sE(n,o,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const a1=yd.length;function oE(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?oE(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<a1;t++){const i=yd[t],o=n.props[i];(ja(o)||o===!1)&&(e[i]=o)}return e}const l1=[...gd].reverse(),u1=gd.length;function c1(n){return e=>Promise.all(e.map(({animation:t,options:i})=>o1(n,t,i)))}function h1(n){let e=c1(n),t=uy(),i=!0;const o=p=>(y,_)=>{var w;const S=cc(n,_,p==="exit"?(w=n.presenceContext)===null||w===void 0?void 0:w.custom:void 0);if(S){const{transition:R,transitionEnd:N,...O}=S;y={...y,...O,...N}}return y};function l(p){e=p(n)}function c(p){const{props:y}=n,_=oE(n.parent)||{},w=[],S=new Set;let R={},N=1/0;for(let L=0;L<u1;L++){const W=l1[L],H=t[W],X=y[W]!==void 0?y[W]:_[W],le=ja(X),re=W===p?H.isActive:null;re===!1&&(N=L);let ce=X===_[W]&&X!==y[W]&&le;if(ce&&i&&n.manuallyAnimateOnMount&&(ce=!1),H.protectedKeys={...R},!H.isActive&&re===null||!X&&!H.prevProp||lc(X)||typeof X=="boolean")continue;const k=f1(H.prevProp,X);let A=k||W===p&&H.isActive&&!ce&&le||L>N&&le,P=!1;const V=Array.isArray(X)?X:[X];let M=V.reduce(o(W),{});re===!1&&(M={});const{prevResolvedValues:b={}}=H,C={...b,...M},Qe=Ae=>{A=!0,S.has(Ae)&&(P=!0,S.delete(Ae)),H.needsAnimating[Ae]=!0;const ee=n.getValue(Ae);ee&&(ee.liveStyle=!1)};for(const Ae in C){const ee=M[Ae],de=b[Ae];if(R.hasOwnProperty(Ae))continue;let ne=!1;xf(ee)&&xf(de)?ne=!__(ee,de):ne=ee!==de,ne?ee!=null?Qe(Ae):S.add(Ae):ee!==void 0&&S.has(Ae)?Qe(Ae):H.protectedKeys[Ae]=!0}H.prevProp=X,H.prevResolvedValues=M,H.isActive&&(R={...R,...M}),i&&n.blockInitialAnimation&&(A=!1),A&&(!(ce&&k)||P)&&w.push(...V.map(Ae=>({animation:Ae,options:{type:W}})))}if(S.size){const L={};S.forEach(W=>{const H=n.getBaseTarget(W),X=n.getValue(W);X&&(X.liveStyle=!0),L[W]=H??null}),w.push({animation:L})}let O=!!w.length;return i&&(y.initial===!1||y.initial===y.animate)&&!n.manuallyAnimateOnMount&&(O=!1),i=!1,O?e(w):Promise.resolve()}function f(p,y){var _;if(t[p].isActive===y)return Promise.resolve();(_=n.variantChildren)===null||_===void 0||_.forEach(S=>{var R;return(R=S.animationState)===null||R===void 0?void 0:R.setActive(p,y)}),t[p].isActive=y;const w=c(p);for(const S in t)t[S].protectedKeys={};return w}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>t,reset:()=>{t=uy(),i=!0}}}function f1(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!__(e,n):!1}function Xi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uy(){return{animate:Xi(!0),whileInView:Xi(),whileHover:Xi(),whileTap:Xi(),whileDrag:Xi(),whileFocus:Xi(),exit:Xi()}}class _i{constructor(e){this.isMounted=!1,this.node=e}update(){}}class d1 extends _i{constructor(e){super(e),e.animationState||(e.animationState=h1(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let p1=0;class m1 extends _i{constructor(){super(...arguments),this.id=p1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const g1={animation:{Feature:d1},exit:{Feature:m1}};function Ka(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function il(n){return{point:{x:n.pageX,y:n.pageY}}}const y1=n=>e=>Nd(e)&&n(e,il(e));function Ma(n,e,t,i){return Ka(n,e,y1(t),i)}const cy=(n,e)=>Math.abs(n-e);function v1(n,e){const t=cy(n.x,e.x),i=cy(n.y,e.y);return Math.sqrt(t**2+i**2)}class aE{constructor(e,t,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=df(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,R=v1(w.offset,{x:0,y:0})>=3;if(!S&&!R)return;const{point:N}=w,{timestamp:O}=Dt;this.history.push({...N,timestamp:O});const{onStart:L,onMove:W}=this.handlers;S||(L&&L(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,w)},this.handlePointerMove=(w,S)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=ff(S,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(w,S)=>{this.end();const{onEnd:R,onSessionEnd:N,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=df(w.type==="pointercancel"?this.lastMoveEventInfo:ff(S,this.transformPagePoint),this.history);this.startEvent&&R&&R(w,L),N&&N(w,L)},!Nd(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=i,this.contextWindow=o||window;const c=il(e),f=ff(c,this.transformPagePoint),{point:p}=f,{timestamp:y}=Dt;this.history=[{...p,timestamp:y}];const{onSessionStart:_}=t;_&&_(e,df(f,this.history)),this.removeListeners=rl(Ma(this.contextWindow,"pointermove",this.handlePointerMove),Ma(this.contextWindow,"pointerup",this.handlePointerUp),Ma(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fi(this.updatePoint)}}function ff(n,e){return e?{point:e(n.point)}:n}function hy(n,e){return{x:n.x-e.x,y:n.y-e.y}}function df({point:n},e){return{point:n,delta:hy(n,lE(e)),offset:hy(n,_1(e)),velocity:E1(e,.1)}}function _1(n){return n[0]}function lE(n){return n[n.length-1]}function E1(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const o=lE(n);for(;t>=0&&(i=n[t],!(o.timestamp-i.timestamp>Rr(e)));)t--;if(!i)return{x:0,y:0};const l=xr(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const uE=1e-4,w1=1-uE,T1=1+uE,cE=.01,S1=0-cE,A1=0+cE;function Qt(n){return n.max-n.min}function I1(n,e,t){return Math.abs(n-e)<=t}function fy(n,e,t,i=.5){n.origin=i,n.originPoint=tt(e.min,e.max,n.origin),n.scale=Qt(t)/Qt(e),n.translate=tt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=w1&&n.scale<=T1||isNaN(n.scale))&&(n.scale=1),(n.translate>=S1&&n.translate<=A1||isNaN(n.translate))&&(n.translate=0)}function La(n,e,t,i){fy(n.x,e.x,t.x,i?i.originX:void 0),fy(n.y,e.y,t.y,i?i.originY:void 0)}function dy(n,e,t){n.min=t.min+e.min,n.max=n.min+Qt(e)}function P1(n,e,t){dy(n.x,e.x,t.x),dy(n.y,e.y,t.y)}function py(n,e,t){n.min=e.min-t.min,n.max=n.min+Qt(e)}function Oa(n,e,t){py(n.x,e.x,t.x),py(n.y,e.y,t.y)}function C1(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?tt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?tt(t,n,i.max):Math.min(n,t)),n}function my(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function R1(n,{top:e,left:t,bottom:i,right:o}){return{x:my(n.x,t,o),y:my(n.y,e,i)}}function gy(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function x1(n,e){return{x:gy(n.x,e.x),y:gy(n.y,e.y)}}function V1(n,e){let t=.5;const i=Qt(n),o=Qt(e);return o>i?t=fo(e.min,e.max-i,n.min):i>o&&(t=fo(n.min,n.max-o,e.min)),Vr(0,1,t)}function k1(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Uf=.35;function D1(n=Uf){return n===!1?n=0:n===!0&&(n=Uf),{x:yy(n,"left","right"),y:yy(n,"top","bottom")}}function yy(n,e,t){return{min:vy(n,e),max:vy(n,t)}}function vy(n,e){return typeof n=="number"?n:n[e]||0}const _y=()=>({translate:0,scale:1,origin:0,originPoint:0}),ao=()=>({x:_y(),y:_y()}),Ey=()=>({min:0,max:0}),at=()=>({x:Ey(),y:Ey()});function Rn(n){return[n("x"),n("y")]}function hE({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function N1({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function M1(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function pf(n){return n===void 0||n===1}function jf({scale:n,scaleX:e,scaleY:t}){return!pf(n)||!pf(e)||!pf(t)}function Yi(n){return jf(n)||fE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function fE(n){return wy(n.x)||wy(n.y)}function wy(n){return n&&n!=="0%"}function Hu(n,e,t){const i=n-t,o=e*i;return t+o}function Ty(n,e,t,i,o){return o!==void 0&&(n=Hu(n,o,i)),Hu(n,t,i)+e}function zf(n,e=0,t=1,i,o){n.min=Ty(n.min,e,t,i,o),n.max=Ty(n.max,e,t,i,o)}function dE(n,{x:e,y:t}){zf(n.x,e.translate,e.scale,e.originPoint),zf(n.y,t.translate,t.scale,t.originPoint)}const Sy=.999999999999,Ay=1.0000000000001;function L1(n,e,t,i=!1){const o=t.length;if(!o)return;e.x=e.y=1;let l,c;for(let f=0;f<o;f++){l=t[f],c=l.projectionDelta;const{visualElement:p}=l.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&uo(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,dE(n,c)),i&&Yi(l.latestValues)&&uo(n,l.latestValues))}e.x<Ay&&e.x>Sy&&(e.x=1),e.y<Ay&&e.y>Sy&&(e.y=1)}function lo(n,e){n.min=n.min+e,n.max=n.max+e}function Iy(n,e,t,i,o=.5){const l=tt(n.min,n.max,o);zf(n,e,t,l,i)}function uo(n,e){Iy(n.x,e.x,e.scaleX,e.scale,e.originX),Iy(n.y,e.y,e.scaleY,e.scale,e.originY)}function pE(n,e){return hE(M1(n.getBoundingClientRect(),e))}function O1(n,e,t){const i=pE(n,t),{scroll:o}=e;return o&&(lo(i.x,o.offset.x),lo(i.y,o.offset.y)),i}const mE=({current:n})=>n?n.ownerDocument.defaultView:null,F1=new WeakMap;class b1{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(il(_).point)},l=(_,w)=>{const{drag:S,dragPropagation:R,onDragStart:N}=this.getProps();if(S&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kS(S),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rn(L=>{let W=this.getAxisMotionValue(L).get()||0;if(rr.test(W)){const{projection:H}=this.visualElement;if(H&&H.layout){const X=H.layout.layoutBox[L];X&&(W=Qt(X)*(parseFloat(W)/100))}}this.originPoint[L]=W}),N&&Ge.postRender(()=>N(_,w)),Df(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},c=(_,w)=>{const{dragPropagation:S,dragDirectionLock:R,onDirectionLock:N,onDrag:O}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:L}=w;if(R&&this.currentDirection===null){this.currentDirection=B1(L),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",w.point,L),this.updateAxis("y",w.point,L),this.visualElement.render(),O&&O(_,w)},f=(_,w)=>this.stop(_,w),p=()=>Rn(_=>{var w;return this.getAnimationState(_)==="paused"&&((w=this.getAxisMotionValue(_).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new aE(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,contextWindow:mE(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ge.postRender(()=>l(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:o}=this.getProps();if(!i||!Cu(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=C1(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;t&&so(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=R1(o.layoutBox,t):this.constraints=!1,this.elastic=D1(i),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Rn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=k1(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!so(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=O1(i,o.root,this.visualElement.getTransformPagePoint());let c=x1(o.layout.layoutBox,l);if(t){const f=t(N1(c));this.hasMutatedConstraints=!!f,f&&(c=hE(f))}return c}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),p=this.constraints||{},y=Rn(_=>{if(!Cu(_,t,this.currentDirection))return;let w=p[_]||{};c&&(w={min:0,max:0});const S=o?200:1e6,R=o?40:1e7,N={type:"inertia",velocity:i?e[_]:0,bounceStiffness:S,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...l,...w};return this.startAxisValueAnimation(_,N)});return Promise.all(y).then(f)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Df(this.visualElement,e),i.start(qd(e,i,0,t,this.visualElement,!1))}stopAnimation(){Rn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[t];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Rn(t=>{const{drag:i}=this.getProps();if(!Cu(t,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:f}=o.layout.layoutBox[t];l.set(e[t]-tt(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!so(t)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Rn(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const p=f.get();o[c]=V1({min:p,max:p},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Rn(c=>{if(!Cu(c,e,null))return;const f=this.getAxisMotionValue(c),{min:p,max:y}=this.constraints[c];f.set(tt(p,y,o[c]))})}addListeners(){if(!this.visualElement.current)return;F1.set(this.visualElement,this);const e=this.visualElement.current,t=Ma(e,"pointerdown",p=>{const{drag:y,dragListener:_=!0}=this.getProps();y&&_&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();so(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ge.read(i);const c=Ka(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y})=>{this.isDragging&&y&&(Rn(_=>{const w=this.getAxisMotionValue(_);w&&(this.originPoint[_]+=p[_].translate,w.set(w.get()+p[_].translate))}),this.visualElement.render())});return()=>{c(),t(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=Uf,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function Cu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function B1(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class U1 extends _i{constructor(e){super(e),this.removeGroupControls=mn,this.removeListeners=mn,this.controls=new b1(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Py=n=>(e,t)=>{n&&Ge.postRender(()=>n(e,t))};class j1 extends _i{constructor(){super(...arguments),this.removePointerDownListener=mn}onPointerDown(e){this.session=new aE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:Py(e),onStart:Py(t),onMove:i,onEnd:(l,c)=>{delete this.session,o&&Ge.postRender(()=>o(l,c))}}}mount(){this.removePointerDownListener=Ma(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cy(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ia={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ee.test(n))n=parseFloat(n);else return n;const t=Cy(n,e.target.x),i=Cy(n,e.target.y);return`${t}% ${i}%`}},z1={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,o=di.parse(n);if(o.length>5)return i;const l=di.createTransformer(n),c=typeof o[0]!="number"?1:0,f=t.x.scale*e.x,p=t.y.scale*e.y;o[0+c]/=f,o[1+c]/=p;const y=tt(f,p,.5);return typeof o[2+c]=="number"&&(o[2+c]/=y),typeof o[3+c]=="number"&&(o[3+c]/=y),l(o)}};class $1 extends fe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;cS(W1),l&&(t.group&&t.group.add(l),i&&i.register&&o&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Lu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:o,isPresent:l}=this.props,c=i.projection;return c&&(c.isPresent=l,o||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||Ge.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_d.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gE(n){const[e,t]=I0(),i=fe.useContext(e_);return me.jsx($1,{...n,layoutGroup:i,switchLayoutGroup:fe.useContext(a_),isPresent:e,safeToRemove:t})}const W1={borderRadius:{...Ia,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ia,borderTopRightRadius:Ia,borderBottomLeftRadius:Ia,borderBottomRightRadius:Ia,boxShadow:z1};function q1(n,e,t){const i=Wt(n)?n:Wa(n);return i.start(qd("",i,e,t)),i.animation}function K1(n){return n instanceof SVGElement&&n.tagName!=="svg"}const H1=(n,e)=>n.depth-e.depth;class G1{constructor(){this.children=[],this.isDirty=!1}add(e){Md(this.children,e),this.isDirty=!0}remove(e){Ld(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(H1),this.isDirty=!1,this.children.forEach(e)}}function Q1(n,e){const t=ir.now(),i=({timestamp:o})=>{const l=o-t;l>=e&&(fi(i),n(l-e))};return Ge.read(i,!0),()=>fi(i)}const yE=["TopLeft","TopRight","BottomLeft","BottomRight"],X1=yE.length,Ry=n=>typeof n=="string"?parseFloat(n):n,xy=n=>typeof n=="number"||Ee.test(n);function Y1(n,e,t,i,o,l){o?(n.opacity=tt(0,t.opacity!==void 0?t.opacity:1,J1(i)),n.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,Z1(i))):l&&(n.opacity=tt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let c=0;c<X1;c++){const f=`border${yE[c]}Radius`;let p=Vy(e,f),y=Vy(t,f);if(p===void 0&&y===void 0)continue;p||(p=0),y||(y=0),p===0||y===0||xy(p)===xy(y)?(n[f]=Math.max(tt(Ry(p),Ry(y),i),0),(rr.test(y)||rr.test(p))&&(n[f]+="%")):n[f]=y}(e.rotate||t.rotate)&&(n.rotate=tt(e.rotate||0,t.rotate||0,i))}function Vy(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const J1=vE(0,.5,O_),Z1=vE(.5,.95,mn);function vE(n,e,t){return i=>i<n?0:i>e?1:t(fo(n,e,i))}function ky(n,e){n.min=e.min,n.max=e.max}function Cn(n,e){ky(n.x,e.x),ky(n.y,e.y)}function Dy(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Ny(n,e,t,i,o){return n-=e,n=Hu(n,1/t,i),o!==void 0&&(n=Hu(n,1/o,i)),n}function eI(n,e=0,t=1,i=.5,o,l=n,c=n){if(rr.test(e)&&(e=parseFloat(e),e=tt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=tt(l.min,l.max,i);n===l&&(f-=e),n.min=Ny(n.min,e,t,f,o),n.max=Ny(n.max,e,t,f,o)}function My(n,e,[t,i,o],l,c){eI(n,e[t],e[i],e[o],e.scale,l,c)}const tI=["x","scaleX","originX"],nI=["y","scaleY","originY"];function Ly(n,e,t,i){My(n.x,e,tI,t?t.x:void 0,i?i.x:void 0),My(n.y,e,nI,t?t.y:void 0,i?i.y:void 0)}function Oy(n){return n.translate===0&&n.scale===1}function _E(n){return Oy(n.x)&&Oy(n.y)}function Fy(n,e){return n.min===e.min&&n.max===e.max}function rI(n,e){return Fy(n.x,e.x)&&Fy(n.y,e.y)}function by(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function EE(n,e){return by(n.x,e.x)&&by(n.y,e.y)}function By(n){return Qt(n.x)/Qt(n.y)}function Uy(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class iI{constructor(){this.members=[]}add(e){Md(this.members,e),e.scheduleRender()}remove(e){if(Ld(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let i;for(let o=t;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sI(n,e,t){let i="";const o=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((o||l||c)&&(i=`translate3d(${o}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:y,rotate:_,rotateX:w,rotateY:S,skewX:R,skewY:N}=t;y&&(i=`perspective(${y}px) ${i}`),_&&(i+=`rotate(${_}deg) `),w&&(i+=`rotateX(${w}deg) `),S&&(i+=`rotateY(${S}deg) `),R&&(i+=`skewX(${R}deg) `),N&&(i+=`skewY(${N}deg) `)}const f=n.x.scale*e.x,p=n.y.scale*e.y;return(f!==1||p!==1)&&(i+=`scale(${f}, ${p})`),i||"none"}const Ji={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ra=typeof window<"u"&&window.MotionDebug!==void 0,mf=["","X","Y","Z"],oI={visibility:"hidden"},jy=1e3;let aI=0;function gf(n,e,t,i){const{latestValues:o}=e;o[n]&&(t[n]=o[n],e.setStaticValue(n,0),i&&(i[n]=0))}function wE(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=x_(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:o,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ge,!(o||l))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&wE(i)}function TE({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},f=e==null?void 0:e()){this.id=aI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ra&&(Ji.totalNodes=Ji.resolvedTargetDeltas=Ji.recalculatedProjection=0),this.nodes.forEach(cI),this.nodes.forEach(mI),this.nodes.forEach(gI),this.nodes.forEach(hI),Ra&&window.MotionDebug.record(Ji)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new G1)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Od),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const p=this.eventHandlers.get(c);p&&p.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=K1(c),this.instance=c;const{layoutId:p,layout:y,visualElement:_}=this.options;if(_&&!_.current&&_.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(y||p)&&(this.isLayoutDirty=!0),n){let w;const S=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=Q1(S,250),Lu.hasAnimatedSinceResize&&(Lu.hasAnimatedSinceResize=!1,this.nodes.forEach($y))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&_&&(p||y)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:S,hasRelativeLayoutChanged:R,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||_.getDefaultTransition()||wI,{onLayoutAnimationStart:L,onLayoutAnimationComplete:W}=_.getProps(),H=!this.targetLayout||!EE(this.targetLayout,N),X=!S&&R;if(this.options.layoutRoot||this.resumeFrom||X||S&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,X);const le={...Vd(O,"layout"),onPlay:L,onComplete:W};(_.shouldReduceMotion||this.options.layoutRoot)&&(le.delay=0,le.type=!1),this.startAnimation(le)}else S||$y(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yI),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const w=this.path[_];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:f,layout:p}=this.options;if(f===void 0&&!p)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zy);return}this.isUpdating||this.nodes.forEach(dI),this.isUpdating=!1,this.nodes.forEach(pI),this.nodes.forEach(lI),this.nodes.forEach(uI),this.clearAllSnapshots();const f=ir.now();Dt.delta=Vr(0,1e3/60,f-Dt.timestamp),Dt.timestamp=f,Dt.isProcessing=!0,af.update.process(Dt),af.preRender.process(Dt),af.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_d.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fI),this.sharedNodes.forEach(vI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qt(this.snapshot.measuredBox.x)&&!Qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:p,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!_E(this.projectionDelta),p=this.getTransformTemplate(),y=p?p(this.latestValues,""):void 0,_=y!==this.prevTransformTemplateValue;c&&(f||Yi(this.latestValues)||_)&&(o(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let p=this.removeElementScroll(f);return c&&(p=this.removeTransform(p)),TI(p),{animationId:this.root.animationId,measuredBox:f,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:f}=this.options;if(!f)return at();const p=f.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(SI))){const{scroll:_}=this.root;_&&(lo(p.x,_.offset.x),lo(p.y,_.offset.y))}return p}removeElementScroll(c){var f;const p=at();if(Cn(p,c),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return p;for(let y=0;y<this.path.length;y++){const _=this.path[y],{scroll:w,options:S}=_;_!==this.root&&w&&S.layoutScroll&&(w.wasRoot&&Cn(p,c),lo(p.x,w.offset.x),lo(p.y,w.offset.y))}return p}applyTransform(c,f=!1){const p=at();Cn(p,c);for(let y=0;y<this.path.length;y++){const _=this.path[y];!f&&_.options.layoutScroll&&_.scroll&&_!==_.root&&uo(p,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),Yi(_.latestValues)&&uo(p,_.latestValues)}return Yi(this.latestValues)&&uo(p,this.latestValues),p}removeTransform(c){const f=at();Cn(f,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];if(!y.instance||!Yi(y.latestValues))continue;jf(y.latestValues)&&y.updateSnapshot();const _=at(),w=y.measurePageBox();Cn(_,w),Ly(f,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,_)}return Yi(this.latestValues)&&Ly(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var f;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==p;if(!(c||y&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:S}=this.options;if(!(!this.layout||!(w||S))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Oa(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),Cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cn(this.target,this.layout.layoutBox),dE(this.target,this.targetDelta)):Cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Oa(this.relativeTargetOrigin,this.target,R.target),Cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ra&&Ji.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jf(this.parent.latestValues)||fE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const f=this.getLead(),p=!!this.resumingFrom||this!==f;let y=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(y=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(y=!1),y)return;const{layout:_,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||w))return;Cn(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,R=this.treeScale.y;L1(this.layoutCorrected,this.treeScale,this.path,p),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=at());const{target:N}=f;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Dy(this.prevProjectionDelta.x,this.projectionDelta.x),Dy(this.prevProjectionDelta.y,this.projectionDelta.y)),La(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==R||!Uy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Uy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N)),Ra&&Ji.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),c){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ao(),this.projectionDelta=ao(),this.projectionDeltaWithTransform=ao()}setAnimationOrigin(c,f=!1){const p=this.snapshot,y=p?p.latestValues:{},_={...this.latestValues},w=ao();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const S=at(),R=p?p.source:void 0,N=this.layout?this.layout.source:void 0,O=R!==N,L=this.getStack(),W=!L||L.members.length<=1,H=!!(O&&!W&&this.options.crossfade===!0&&!this.path.some(EI));this.animationProgress=0;let X;this.mixTargetDelta=le=>{const re=le/1e3;Wy(w.x,c.x,re),Wy(w.y,c.y,re),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oa(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_I(this.relativeTarget,this.relativeTargetOrigin,S,re),X&&rI(this.relativeTarget,X)&&(this.isProjectionDirty=!1),X||(X=at()),Cn(X,this.relativeTarget)),O&&(this.animationValues=_,Y1(_,y,this.latestValues,re,H,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=re},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{Lu.hasAnimatedSinceResize=!0,this.currentAnimation=q1(0,jy,{...c,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:p,layout:y,latestValues:_}=c;if(!(!f||!p||!y)){if(this!==c&&this.layout&&y&&SE(this.options.animationType,this.layout.layoutBox,y.layoutBox)){p=this.target||at();const w=Qt(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+w;const S=Qt(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+S}Cn(f,p),uo(f,_),La(this.projectionDeltaWithTransform,this.layoutCorrected,f,_)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new iI),this.sharedNodes.get(c).add(f);const y=f.options.initialPromotionConfig;f.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:f}=this.options;return f?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:f}=this.options;return f?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:p}={}){const y=this.getStack();y&&y.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:p}=c;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(f=!0),!f)return;const y={};p.z&&gf("z",c,y,this.animationValues);for(let _=0;_<mf.length;_++)gf(`rotate${mf[_]}`,c,y,this.animationValues),gf(`skew${mf[_]}`,c,y,this.animationValues);c.render();for(const _ in y)c.setStaticValue(_,y[_]),this.animationValues&&(this.animationValues[_]=y[_]);c.scheduleRender()}getProjectionStyles(c){var f,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oI;const y={visibility:""},_=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=Nu(c==null?void 0:c.pointerEvents)||"",y.transform=_?_(this.latestValues,""):"none",y;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=Nu(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(O.transform=_?_({},""):"none",this.hasProjected=!1),O}const S=w.animationValues||w.latestValues;this.applyTransformsToTarget(),y.transform=sI(this.projectionDeltaWithTransform,this.treeScale,S),_&&(y.transform=_(S,y.transform));const{x:R,y:N}=this.projectionDelta;y.transformOrigin=`${R.origin*100}% ${N.origin*100}% 0`,w.animationValues?y.opacity=w===this?(p=(f=S.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=w===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const O in $a){if(S[O]===void 0)continue;const{correct:L,applyTo:W,isCSSVariable:H}=$a[O],X=y.transform==="none"?S[O]:L(S[O],w);if(W){const le=W.length;for(let re=0;re<le;re++)y[W[re]]=X}else H?this.options.visualElement.renderState.vars[O]=X:y[O]=X}return this.options.layoutId&&(y.pointerEvents=w===this?Nu(c==null?void 0:c.pointerEvents)||"":"none"),y}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(zy),this.root.sharedNodes.clear()}}}function lI(n){n.updateLayout()}function uI(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=n.layout,{animationType:l}=n.options,c=t.source!==n.layout.source;l==="size"?Rn(w=>{const S=c?t.measuredBox[w]:t.layoutBox[w],R=Qt(S);S.min=i[w].min,S.max=S.min+R}):SE(l,t.layoutBox,i)&&Rn(w=>{const S=c?t.measuredBox[w]:t.layoutBox[w],R=Qt(i[w]);S.max=S.min+R,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+R)});const f=ao();La(f,i,t.layoutBox);const p=ao();c?La(p,n.applyTransform(o,!0),t.measuredBox):La(p,i,t.layoutBox);const y=!_E(f);let _=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:S,layout:R}=w;if(S&&R){const N=at();Oa(N,t.layoutBox,S.layoutBox);const O=at();Oa(O,i,R.layoutBox),EE(N,O)||(_=!0),w.options.layoutRoot&&(n.relativeTarget=O,n.relativeTargetOrigin=N,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:p,layoutDelta:f,hasLayoutChanged:y,hasRelativeLayoutChanged:_})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function cI(n){Ra&&Ji.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function hI(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function fI(n){n.clearSnapshot()}function zy(n){n.clearMeasurements()}function dI(n){n.isLayoutDirty=!1}function pI(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function $y(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function mI(n){n.resolveTargetDelta()}function gI(n){n.calcProjection()}function yI(n){n.resetSkewAndRotation()}function vI(n){n.removeLeadSnapshot()}function Wy(n,e,t){n.translate=tt(e.translate,0,t),n.scale=tt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function qy(n,e,t,i){n.min=tt(e.min,t.min,i),n.max=tt(e.max,t.max,i)}function _I(n,e,t,i){qy(n.x,e.x,t.x,i),qy(n.y,e.y,t.y,i)}function EI(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const wI={duration:.45,ease:[.4,0,.1,1]},Ky=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Hy=Ky("applewebkit/")&&!Ky("chrome/")?Math.round:mn;function Gy(n){n.min=Hy(n.min),n.max=Hy(n.max)}function TI(n){Gy(n.x),Gy(n.y)}function SE(n,e,t){return n==="position"||n==="preserve-aspect"&&!I1(By(e),By(t),.2)}function SI(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const AI=TE({attachResizeListener:(n,e)=>Ka(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yf={current:void 0},AE=TE({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yf.current){const n=new AI({});n.mount(window),n.setOptions({layoutScroll:!0}),yf.current=n}return yf.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),II={pan:{Feature:j1},drag:{Feature:U1,ProjectionNode:AE,MeasureLayout:gE}};function Qy(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const o="onHover"+t,l=i[o];l&&Ge.postRender(()=>l(e,il(e)))}class PI extends _i{mount(){const{current:e}=this.node;e&&(this.unmount=PS(e,(t,i)=>(Qy(this.node,i,"Start"),o=>Qy(this.node,o,"End"))))}unmount(){}}class CI extends _i{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rl(Ka(this.node.current,"focus",()=>this.onFocus()),Ka(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Xy(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const o="onTap"+(t==="End"?"":t),l=i[o];l&&Ge.postRender(()=>l(e,il(e)))}class RI extends _i{mount(){const{current:e}=this.node;e&&(this.unmount=VS(e,(t,i)=>(Xy(this.node,i,"Start"),(o,{success:l})=>Xy(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $f=new WeakMap,vf=new WeakMap,xI=n=>{const e=$f.get(n.target);e&&e(n)},VI=n=>{n.forEach(xI)};function kI({root:n,...e}){const t=n||document;vf.has(t)||vf.set(t,{});const i=vf.get(t),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(VI,{root:n,...e})),i[o]}function DI(n,e,t){const i=kI(e);return $f.set(n,t),i.observe(n),()=>{$f.delete(n),i.unobserve(n)}}const NI={some:0,all:1};class MI extends _i{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:o="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:NI[o]},f=p=>{const{isIntersecting:y}=p;if(this.isInView===y||(this.isInView=y,l&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:_,onViewportLeave:w}=this.node.getProps(),S=y?_:w;S&&S(p)};return DI(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(LI(e,t))&&this.startObserver()}unmount(){}}function LI({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const OI={inView:{Feature:MI},tap:{Feature:RI},focus:{Feature:CI},hover:{Feature:PI}},FI={layout:{ProjectionNode:AE,MeasureLayout:gE}},Wf={current:null},IE={current:!1};function bI(){if(IE.current=!0,!!pd)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wf.current=n.matches;n.addListener(e),e()}else Wf.current=!1}const BI=[...X_,jt,di],UI=n=>BI.find(Q_(n)),Yy=new WeakMap;function jI(n,e,t){for(const i in e){const o=e[i],l=t[i];if(Wt(o))n.addValue(i,o);else if(Wt(l))n.addValue(i,Wa(o,{owner:n}));else if(l!==o)if(n.hasValue(i)){const c=n.getValue(i);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=n.getStaticValue(i);n.addValue(i,Wa(c!==void 0?c:o,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Jy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zI{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=ir.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,Ge.render(this.render,!1,!0))};const{latestValues:p,renderState:y,onUpdate:_}=c;this.onUpdate=_,this.latestValues=p,this.baseTarget={...p},this.initialValues=t.initial?{...p}:{},this.renderState=y,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=uc(t),this.isVariantNode=s_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...S}=this.scrapeMotionValuesFromProps(t,{},this);for(const R in S){const N=S[R];p[R]!==void 0&&Wt(N)&&N.set(p[R],!1)}}mount(e){this.current=e,Yy.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),IE.current||bI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Yy.delete(this.current),this.projection&&this.projection.unmount(),fi(this.notifyUpdate),fi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=os.has(e),o=t.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=t.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),l(),c&&c(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in po){const t=po[e];if(!t)continue;const{isEnabled:i,Feature:o}=t;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Jy.length;i++){const o=Jy[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,c=e[l];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=jI(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Wa(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(H_(o)||b_(o))?o=parseFloat(o):!UI(o)&&di.test(t)&&(o=W_(e,t)),this.setBaseTarget(e,Wt(o)?o.get():o)),Wt(o)?o.get():o}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let o;if(typeof i=="string"||typeof i=="object"){const c=wd(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);c&&(o=c[e])}if(i&&o!==void 0)return o;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!Wt(l)?l:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Od),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class PE extends zI{constructor(){super(...arguments),this.KeyframeResolver=Y_}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Wt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function $I(n){return window.getComputedStyle(n)}class WI extends PE{constructor(){super(...arguments),this.type="html",this.renderInstance=d_}readValueFromInstance(e,t){if(os.has(t)){const i=jd(t);return i&&i.default||0}else{const i=$I(e),o=(Td(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return pE(e,t)}build(e,t,i){Id(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return xd(e,t,i)}}class qI extends PE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=at}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(os.has(t)){const i=jd(t);return i&&i.default||0}return t=p_.has(t)?t:vd(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return y_(e,t,i)}build(e,t,i){Pd(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,o){m_(e,t,i,o)}mount(e){this.isSVGTag=Rd(e.tagName),super.mount(e)}}const KI=(n,e)=>Ed(n)?new qI(e):new WI(e,{allowProjection:n!==fe.Fragment}),HI=_S({...g1,...OI,...II,...FI},KI),GI=M0(HI);function QI({type:n="text",...e}){return me.jsx("input",{type:n,className:"p-2 rounded bg-purple-700 text-white",...e})}function CE({username:n,setUsername:e,country:t,setCountry:i}){return me.jsxs("div",{className:"mb-4",children:[me.jsx(QI,{placeholder:"Select a temporary username (optional)",value:n,onChange:o=>e(o.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white"}),me.jsxs("select",{value:t,onChange:o=>i(o.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white",children:[me.jsx("option",{value:"",children:"Select a country"}),me.jsx("option",{value:"",children:"United States"}),me.jsx("option",{value:"",children:"United Kingdom"}),me.jsx("option",{value:"",children:"Germany"}),me.jsx("option",{value:"",children:"France"}),me.jsx("option",{value:"",children:"Japan"}),me.jsx("option",{value:"",children:"India"})]})]})}function RE({onSubmit:n}){const[e,t]=fe.useState(""),[i,o]=fe.useState(""),[l,c]=fe.useState(""),f=()=>{if(e.trim()){const p=i.trim()?i:"An0n";n({text:e,username:p,country:l,id:Date.now(),replies:[]}),t(""),o(""),c("")}};return me.jsxs("div",{className:"mt-4",children:[me.jsx(CE,{username:i,setUsername:o,country:l,setCountry:c}),me.jsx(Jv,{placeholder:"Write a comment...",value:e,onChange:p=>t(p.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white"}),me.jsx(Yv,{onClick:f,className:"w-full bg-purple-600 hover:bg-purple-500",children:"Submit"})]})}function XI({comment:n,addReply:e}){const[t,i]=fe.useState(!1),o=l=>{e(l),i(!1)};return me.jsxs(Cf,{className:"p-4 bg-purple-700 rounded-lg mb-4",children:[me.jsxs("div",{className:"flex items-center mb-2",children:[me.jsx("span",{className:"mr-2",children:n.country}),me.jsx("span",{className:"font-bold",children:n.username})]}),me.jsx("p",{className:"text-white mb-2",children:n.text}),me.jsx("button",{onClick:()=>i(l=>!l),className:"text-blue-400 text-sm underline hover:text-blue-300",children:"Reply"}),t&&me.jsx(RE,{onSubmit:o}),me.jsx(xE,{comments:n.replies})]})}function xE({comments:n,addReply:e}){return me.jsx("div",{className:"mt-4 pl-4 border-l-2 border-purple-700",children:n.map(t=>me.jsx(XI,{comment:t,addReply:i=>e(t.id,i)},t.id))})}function YI({onSubmit:n}){const[e,t]=fe.useState(!1);return e?me.jsx(RE,{onSubmit:i=>{n(i),t(!1)}}):me.jsx("button",{onClick:()=>t(!0),className:"text-blue-400 text-sm underline hover:text-blue-300 mt-2",children:"Reply"})}var Zy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},JI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},kE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,w=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,R=y&63;p||(R=64,c||(S=64)),i.push(t[_],t[w],t[S],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||w==null)throw new ZI;const S=l<<2|f>>4;if(i.push(S),y!==64){const R=f<<4&240|y>>2;if(i.push(R),w!==64){const N=y<<6&192|w;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eP=function(n){const e=VE(n);return kE.encodeByteArray(e,!0)},Gu=function(n){return eP(n).replace(/\./g,"")},tP=function(n){try{return kE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=()=>nP().__FIREBASE_DEFAULTS__,iP=()=>{if(typeof process>"u"||typeof Zy>"u")return;const n=Zy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&tP(n[1]);return e&&JSON.parse(e)},Kd=()=>{try{return rP()||iP()||sP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oP=n=>{var e,t;return(t=(e=Kd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},aP=n=>{const e=oP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},DE=()=>{var n;return(n=Kd())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Gu(JSON.stringify(t)),Gu(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hP(){var n;const e=(n=Kd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fP(){return!hP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dP(){try{return typeof indexedDB=="object"}catch{return!1}}function pP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="FirebaseError";class Io extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mP,Object.setPrototypeOf(this,Io.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,NE.prototype.create)}}class NE{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?gP(l,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new Io(o,f,i)}}function gP(n,e){return n.replace(yP,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const yP=/\{\$([^}]+)}/g;function qf(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(ev(l)&&ev(c)){if(!qf(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function ev(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){return n&&n._delegate?n._delegate:n}class Ha{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new lP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EP(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_P(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _P(n){return n===Zi?void 0:n}function EP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const TP={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},SP=Le.INFO,AP={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},IP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=AP[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ME{constructor(e){this.name=e,this._logLevel=SP,this._logHandler=IP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const PP=(n,e)=>e.some(t=>n instanceof t);let tv,nv;function CP(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RP(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LE=new WeakMap,Kf=new WeakMap,OE=new WeakMap,_f=new WeakMap,Hd=new WeakMap;function xP(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(li(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&LE.set(t,n)}).catch(()=>{}),Hd.set(e,n),e}function VP(n){if(Kf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Kf.set(n,e)}let Hf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kP(n){Hf=n(Hf)}function DP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Ef(this),e,...t);return OE.set(i,e.sort?e.sort():[e]),li(i)}:RP().includes(n)?function(...e){return n.apply(Ef(this),e),li(LE.get(this))}:function(...e){return li(n.apply(Ef(this),e))}}function NP(n){return typeof n=="function"?DP(n):(n instanceof IDBTransaction&&VP(n),PP(n,CP())?new Proxy(n,Hf):n)}function li(n){if(n instanceof IDBRequest)return xP(n);if(_f.has(n))return _f.get(n);const e=NP(n);return e!==n&&(_f.set(n,e),Hd.set(e,n)),e}const Ef=n=>Hd.get(n);function MP(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=li(c);return i&&c.addEventListener("upgradeneeded",p=>{i(li(c.result),p.oldVersion,p.newVersion,li(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const LP=["get","getKey","getAll","getAllKeys","count"],OP=["put","add","delete","clear"],wf=new Map;function rv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wf.get(e))return wf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=OP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||LP.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return wf.set(e,l),l}kP(n=>({...n,get:(e,t,i)=>rv(e,t)||n.get(e,t,i),has:(e,t)=>!!rv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gf="@firebase/app",iv="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new ME("@firebase/app"),BP="@firebase/app-compat",UP="@firebase/analytics-compat",jP="@firebase/analytics",zP="@firebase/app-check-compat",$P="@firebase/app-check",WP="@firebase/auth",qP="@firebase/auth-compat",KP="@firebase/database",HP="@firebase/data-connect",GP="@firebase/database-compat",QP="@firebase/functions",XP="@firebase/functions-compat",YP="@firebase/installations",JP="@firebase/installations-compat",ZP="@firebase/messaging",eC="@firebase/messaging-compat",tC="@firebase/performance",nC="@firebase/performance-compat",rC="@firebase/remote-config",iC="@firebase/remote-config-compat",sC="@firebase/storage",oC="@firebase/storage-compat",aC="@firebase/firestore",lC="@firebase/vertexai",uC="@firebase/firestore-compat",cC="firebase",hC="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="[DEFAULT]",fC={[Gf]:"fire-core",[BP]:"fire-core-compat",[jP]:"fire-analytics",[UP]:"fire-analytics-compat",[$P]:"fire-app-check",[zP]:"fire-app-check-compat",[WP]:"fire-auth",[qP]:"fire-auth-compat",[KP]:"fire-rtdb",[HP]:"fire-data-connect",[GP]:"fire-rtdb-compat",[QP]:"fire-fn",[XP]:"fire-fn-compat",[YP]:"fire-iid",[JP]:"fire-iid-compat",[ZP]:"fire-fcm",[eC]:"fire-fcm-compat",[tC]:"fire-perf",[nC]:"fire-perf-compat",[rC]:"fire-rc",[iC]:"fire-rc-compat",[sC]:"fire-gcs",[oC]:"fire-gcs-compat",[aC]:"fire-fst",[uC]:"fire-fst-compat",[lC]:"fire-vertex","fire-js":"fire-js",[cC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,dC=new Map,Xf=new Map;function sv(n,e){try{n.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xu(n){const e=n.name;if(Xf.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;Xf.set(e,n);for(const t of Qu.values())sv(t,n);for(const t of dC.values())sv(t,n);return!0}function pC(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new NE("app","Firebase",mC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=hC;function FE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Qf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ui.create("bad-app-name",{appName:String(o)});if(t||(t=DE()),!t)throw ui.create("no-options");const l=Qu.get(o);if(l){if(qf(t,l.options)&&qf(i,l.config))return l;throw ui.create("duplicate-app",{appName:o})}const c=new wP(o);for(const p of Xf.values())c.addComponent(p);const f=new gC(t,i,c);return Qu.set(o,f),f}function vC(n=Qf){const e=Qu.get(n);if(!e&&n===Qf&&DE())return FE();if(!e)throw ui.create("no-app",{appName:n});return e}function co(n,e,t){var i;let o=(i=fC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(f.join(" "));return}Xu(new Ha(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firebase-heartbeat-database",EC=1,Ga="firebase-heartbeat-store";let Tf=null;function bE(){return Tf||(Tf=MP(_C,EC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ga)}catch(t){console.warn(t)}}}}).catch(n=>{throw ui.create("idb-open",{originalErrorMessage:n.message})})),Tf}async function wC(n){try{const t=(await bE()).transaction(Ga),i=await t.objectStore(Ga).get(BE(n));return await t.done,i}catch(e){if(e instanceof Io)Dr.warn(e.message);else{const t=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(t.message)}}}async function ov(n,e){try{const i=(await bE()).transaction(Ga,"readwrite");await i.objectStore(Ga).put(e,BE(n)),await i.done}catch(t){if(t instanceof Io)Dr.warn(t.message);else{const i=ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dr.warn(i.message)}}}function BE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=1024,SC=30*24*60*60*1e3;class AC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=av();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=SC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Dr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=av(),{heartbeatsToSend:i,unsentEntries:o}=IC(this._heartbeatsCache.heartbeats),l=Gu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Dr.warn(t),""}}}function av(){return new Date().toISOString().substring(0,10)}function IC(n,e=TC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),lv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),lv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class PC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dP()?pP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ov(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ov(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function lv(n){return Gu(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){Xu(new Ha("platform-logger",e=>new FP(e),"PRIVATE")),Xu(new Ha("heartbeat",e=>new AC(e),"PRIVATE")),co(Gf,iv,n),co(Gf,iv,"esm2017"),co("fire-js","")}CC("");var RC="firebase",xC="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co(RC,xC,"app");var uv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ci,UE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function P(){}P.prototype=A.prototype,k.D=A.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(V,M,b){for(var C=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)C[Qe-2]=arguments[Qe];return A.prototype[M].apply(V,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,P){P||(P=0);var V=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)V[M]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(M=0;16>M;++M)V[M]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=k.g[0],P=k.g[1],M=k.g[2];var b=k.g[3],C=A+(b^P&(M^b))+V[0]+3614090360&4294967295;A=P+(C<<7&4294967295|C>>>25),C=b+(M^A&(P^M))+V[1]+3905402710&4294967295,b=A+(C<<12&4294967295|C>>>20),C=M+(P^b&(A^P))+V[2]+606105819&4294967295,M=b+(C<<17&4294967295|C>>>15),C=P+(A^M&(b^A))+V[3]+3250441966&4294967295,P=M+(C<<22&4294967295|C>>>10),C=A+(b^P&(M^b))+V[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=b+(M^A&(P^M))+V[5]+1200080426&4294967295,b=A+(C<<12&4294967295|C>>>20),C=M+(P^b&(A^P))+V[6]+2821735955&4294967295,M=b+(C<<17&4294967295|C>>>15),C=P+(A^M&(b^A))+V[7]+4249261313&4294967295,P=M+(C<<22&4294967295|C>>>10),C=A+(b^P&(M^b))+V[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=b+(M^A&(P^M))+V[9]+2336552879&4294967295,b=A+(C<<12&4294967295|C>>>20),C=M+(P^b&(A^P))+V[10]+4294925233&4294967295,M=b+(C<<17&4294967295|C>>>15),C=P+(A^M&(b^A))+V[11]+2304563134&4294967295,P=M+(C<<22&4294967295|C>>>10),C=A+(b^P&(M^b))+V[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=b+(M^A&(P^M))+V[13]+4254626195&4294967295,b=A+(C<<12&4294967295|C>>>20),C=M+(P^b&(A^P))+V[14]+2792965006&4294967295,M=b+(C<<17&4294967295|C>>>15),C=P+(A^M&(b^A))+V[15]+1236535329&4294967295,P=M+(C<<22&4294967295|C>>>10),C=A+(M^b&(P^M))+V[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=b+(P^M&(A^P))+V[6]+3225465664&4294967295,b=A+(C<<9&4294967295|C>>>23),C=M+(A^P&(b^A))+V[11]+643717713&4294967295,M=b+(C<<14&4294967295|C>>>18),C=P+(b^A&(M^b))+V[0]+3921069994&4294967295,P=M+(C<<20&4294967295|C>>>12),C=A+(M^b&(P^M))+V[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=b+(P^M&(A^P))+V[10]+38016083&4294967295,b=A+(C<<9&4294967295|C>>>23),C=M+(A^P&(b^A))+V[15]+3634488961&4294967295,M=b+(C<<14&4294967295|C>>>18),C=P+(b^A&(M^b))+V[4]+3889429448&4294967295,P=M+(C<<20&4294967295|C>>>12),C=A+(M^b&(P^M))+V[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=b+(P^M&(A^P))+V[14]+3275163606&4294967295,b=A+(C<<9&4294967295|C>>>23),C=M+(A^P&(b^A))+V[3]+4107603335&4294967295,M=b+(C<<14&4294967295|C>>>18),C=P+(b^A&(M^b))+V[8]+1163531501&4294967295,P=M+(C<<20&4294967295|C>>>12),C=A+(M^b&(P^M))+V[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=b+(P^M&(A^P))+V[2]+4243563512&4294967295,b=A+(C<<9&4294967295|C>>>23),C=M+(A^P&(b^A))+V[7]+1735328473&4294967295,M=b+(C<<14&4294967295|C>>>18),C=P+(b^A&(M^b))+V[12]+2368359562&4294967295,P=M+(C<<20&4294967295|C>>>12),C=A+(P^M^b)+V[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=b+(A^P^M)+V[8]+2272392833&4294967295,b=A+(C<<11&4294967295|C>>>21),C=M+(b^A^P)+V[11]+1839030562&4294967295,M=b+(C<<16&4294967295|C>>>16),C=P+(M^b^A)+V[14]+4259657740&4294967295,P=M+(C<<23&4294967295|C>>>9),C=A+(P^M^b)+V[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=b+(A^P^M)+V[4]+1272893353&4294967295,b=A+(C<<11&4294967295|C>>>21),C=M+(b^A^P)+V[7]+4139469664&4294967295,M=b+(C<<16&4294967295|C>>>16),C=P+(M^b^A)+V[10]+3200236656&4294967295,P=M+(C<<23&4294967295|C>>>9),C=A+(P^M^b)+V[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=b+(A^P^M)+V[0]+3936430074&4294967295,b=A+(C<<11&4294967295|C>>>21),C=M+(b^A^P)+V[3]+3572445317&4294967295,M=b+(C<<16&4294967295|C>>>16),C=P+(M^b^A)+V[6]+76029189&4294967295,P=M+(C<<23&4294967295|C>>>9),C=A+(P^M^b)+V[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=b+(A^P^M)+V[12]+3873151461&4294967295,b=A+(C<<11&4294967295|C>>>21),C=M+(b^A^P)+V[15]+530742520&4294967295,M=b+(C<<16&4294967295|C>>>16),C=P+(M^b^A)+V[2]+3299628645&4294967295,P=M+(C<<23&4294967295|C>>>9),C=A+(M^(P|~b))+V[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=b+(P^(A|~M))+V[7]+1126891415&4294967295,b=A+(C<<10&4294967295|C>>>22),C=M+(A^(b|~P))+V[14]+2878612391&4294967295,M=b+(C<<15&4294967295|C>>>17),C=P+(b^(M|~A))+V[5]+4237533241&4294967295,P=M+(C<<21&4294967295|C>>>11),C=A+(M^(P|~b))+V[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=b+(P^(A|~M))+V[3]+2399980690&4294967295,b=A+(C<<10&4294967295|C>>>22),C=M+(A^(b|~P))+V[10]+4293915773&4294967295,M=b+(C<<15&4294967295|C>>>17),C=P+(b^(M|~A))+V[1]+2240044497&4294967295,P=M+(C<<21&4294967295|C>>>11),C=A+(M^(P|~b))+V[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=b+(P^(A|~M))+V[15]+4264355552&4294967295,b=A+(C<<10&4294967295|C>>>22),C=M+(A^(b|~P))+V[6]+2734768916&4294967295,M=b+(C<<15&4294967295|C>>>17),C=P+(b^(M|~A))+V[13]+1309151649&4294967295,P=M+(C<<21&4294967295|C>>>11),C=A+(M^(P|~b))+V[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=b+(P^(A|~M))+V[11]+3174756917&4294967295,b=A+(C<<10&4294967295|C>>>22),C=M+(A^(b|~P))+V[2]+718787259&4294967295,M=b+(C<<15&4294967295|C>>>17),C=P+(b^(M|~A))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+b&4294967295}i.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var P=A-this.blockSize,V=this.B,M=this.h,b=0;b<A;){if(M==0)for(;b<=P;)o(this,k,b),b+=this.blockSize;if(typeof k=="string"){for(;b<A;)if(V[M++]=k.charCodeAt(b++),M==this.blockSize){o(this,V),M=0;break}}else for(;b<A;)if(V[M++]=k[b++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=A},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var P=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=P&255,P/=256;for(this.u(k),k=Array(16),A=P=0;4>A;++A)for(var V=0;32>V;V+=8)k[P++]=this.g[A]>>>V&255;return k};function l(k,A){var P=f;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=A(k)}function c(k,A){this.h=A;for(var P=[],V=!0,M=k.length-1;0<=M;M--){var b=k[M]|0;V&&b==A||(P[M]=b,V=!1)}this.g=P}var f={};function p(k){return-128<=k&&128>k?l(k,function(A){return new c([A|0],0>A?-1:0)}):new c([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return L(y(-k));for(var A=[],P=1,V=0;k>=P;V++)A[V]=k/P|0,P*=4294967296;return new c(A,0)}function _(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return L(_(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(A,8)),V=w,M=0;M<k.length;M+=8){var b=Math.min(8,k.length-M),C=parseInt(k.substring(M,M+b),A);8>b?(b=y(Math.pow(A,b)),V=V.j(b).add(y(C))):(V=V.j(P),V=V.add(y(C)))}return V}var w=p(0),S=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(O(this))return-L(this).m();for(var k=0,A=1,P=0;P<this.g.length;P++){var V=this.i(P);k+=(0<=V?V:4294967296+V)*A,A*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(O(this))return"-"+L(this).toString(k);for(var A=y(Math.pow(k,6)),P=this,V="";;){var M=le(P,A).g;P=W(P,M.j(A));var b=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=M,N(P))return b+V;for(;6>b.length;)b="0"+b;V=b+V}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function O(k){return k.h==-1}n.l=function(k){return k=W(this,k),O(k)?-1:N(k)?0:1};function L(k){for(var A=k.g.length,P=[],V=0;V<A;V++)P[V]=~k.g[V];return new c(P,~k.h).add(S)}n.abs=function(){return O(this)?L(this):this},n.add=function(k){for(var A=Math.max(this.g.length,k.g.length),P=[],V=0,M=0;M<=A;M++){var b=V+(this.i(M)&65535)+(k.i(M)&65535),C=(b>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);V=C>>>16,b&=65535,C&=65535,P[M]=C<<16|b}return new c(P,P[P.length-1]&-2147483648?-1:0)};function W(k,A){return k.add(L(A))}n.j=function(k){if(N(this)||N(k))return w;if(O(this))return O(k)?L(this).j(L(k)):L(L(this).j(k));if(O(k))return L(this.j(L(k)));if(0>this.l(R)&&0>k.l(R))return y(this.m()*k.m());for(var A=this.g.length+k.g.length,P=[],V=0;V<2*A;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<k.g.length;M++){var b=this.i(V)>>>16,C=this.i(V)&65535,Qe=k.i(M)>>>16,Pt=k.i(M)&65535;P[2*V+2*M]+=C*Pt,H(P,2*V+2*M),P[2*V+2*M+1]+=b*Pt,H(P,2*V+2*M+1),P[2*V+2*M+1]+=C*Qe,H(P,2*V+2*M+1),P[2*V+2*M+2]+=b*Qe,H(P,2*V+2*M+2)}for(V=0;V<A;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=A;V<2*A;V++)P[V]=0;return new c(P,0)};function H(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function X(k,A){this.g=k,this.h=A}function le(k,A){if(N(A))throw Error("division by zero");if(N(k))return new X(w,w);if(O(k))return A=le(L(k),A),new X(L(A.g),L(A.h));if(O(A))return A=le(k,L(A)),new X(L(A.g),A.h);if(30<k.g.length){if(O(k)||O(A))throw Error("slowDivide_ only works with positive integers.");for(var P=S,V=A;0>=V.l(k);)P=re(P),V=re(V);var M=ce(P,1),b=ce(V,1);for(V=ce(V,2),P=ce(P,2);!N(V);){var C=b.add(V);0>=C.l(k)&&(M=M.add(P),b=C),V=ce(V,1),P=ce(P,1)}return A=W(k,M.j(A)),new X(M,A)}for(M=w;0<=k.l(A);){for(P=Math.max(1,Math.floor(k.m()/A.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),b=y(P),C=b.j(A);O(C)||0<C.l(k);)P-=V,b=y(P),C=b.j(A);N(b)&&(b=S),M=M.add(b),k=W(k,C)}return new X(M,k)}n.A=function(k){return le(this,k).h},n.and=function(k){for(var A=Math.max(this.g.length,k.g.length),P=[],V=0;V<A;V++)P[V]=this.i(V)&k.i(V);return new c(P,this.h&k.h)},n.or=function(k){for(var A=Math.max(this.g.length,k.g.length),P=[],V=0;V<A;V++)P[V]=this.i(V)|k.i(V);return new c(P,this.h|k.h)},n.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),P=[],V=0;V<A;V++)P[V]=this.i(V)^k.i(V);return new c(P,this.h^k.h)};function re(k){for(var A=k.g.length+1,P=[],V=0;V<A;V++)P[V]=k.i(V)<<1|k.i(V-1)>>>31;return new c(P,k.h)}function ce(k,A){var P=A>>5;A%=32;for(var V=k.g.length-P,M=[],b=0;b<V;b++)M[b]=0<A?k.i(b+P)>>>A|k.i(b+P+1)<<32-A:k.i(b+P);return new c(M,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,UE=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,ci=c}).apply(typeof uv<"u"?uv:typeof self<"u"?self:typeof window<"u"?window:{});var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jE,xa,zE,Ou,Yf,$E,WE,qE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ru=="object"&&Ru];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var B=u[T];if(!(B in v))break e;v=v[B]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,T=!1,B={next:function(){if(!T&&v<u.length){var $=v++;return{value:m($,u[$]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,S.apply(null,arguments)}function R(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function N(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,B,$){for(var te=Array(arguments.length-2),je=2;je<arguments.length;je++)te[je-2]=arguments[je];return m.prototype[B].apply(T,te)}}function O(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function L(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const B=u.length||0,$=T.length||0;u.length=B+$;for(let te=0;te<$;te++)u[B+te]=T[te]}else u.push(T)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function le(u){return le[" "](u),u}le[" "]=function(){};var re=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ce(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function k(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function A(u){const m={};for(const v in u)m[v]=u[v];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let v,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(v in T)u[v]=T[v];for(let $=0;$<P.length;$++)v=P[$],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function M(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function b(u){f.setTimeout(()=>{throw u},0)}function C(){var u=de;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Qe{constructor(){this.h=this.g=null}add(m,v){const T=Pt.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Pt=new W(()=>new Ct,u=>u.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,ee=!1,de=new Qe,ne=()=>{const u=f.Promise.resolve(void 0);Ae=()=>{u.then(F)}};var F=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){b(v)}var m=Pt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ee=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u}();function Ce(u,m){if(pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(re){e:{try{le(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}N(Ce,pe);var De={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Be=0;function $e(u,m,v,T,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=B,this.key=++Be,this.da=this.fa=!1}function Et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cr(u){this.src=u,this.g={},this.h=0}cr.prototype.add=function(u,m,v,T,B){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var te=Lr(u,m,T,B);return-1<te?(m=u[te],v||(m.fa=!1)):(m=new $e(m,this.src,$,!!T,B),m.fa=v,u.push(m)),m};function us(u,m){var v=m.type;if(v in u.g){var T=u.g[v],B=Array.prototype.indexOf.call(T,m,void 0),$;($=0<=B)&&Array.prototype.splice.call(T,B,1),$&&(Et(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Lr(u,m,v,T){for(var B=0;B<u.length;++B){var $=u[B];if(!$.da&&$.listener==m&&$.capture==!!v&&$.ha==T)return B}return-1}var Ti="closure_lm_"+(1e6*Math.random()|0),cs={};function Vo(u,m,v,T,B){if(Array.isArray(m)){for(var $=0;$<m.length;$++)Vo(u,m[$],v,T,B);return null}return v=No(v),u&&u[be]?u.K(m,v,y(T)?!!T.capture:!1,B):ko(u,m,v,!1,T,B)}function ko(u,m,v,T,B,$){if(!m)throw Error("Invalid event type");var te=y(B)?!!B.capture:!!B,je=fs(u);if(je||(u[Ti]=je=new cr(u)),v=je.add(m,v,T,te,$),v.proxy)return v;if(T=ul(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Pe||(B=te),B===void 0&&(B=!1),u.addEventListener(m.toString(),T,B);else if(u.attachEvent)u.attachEvent(fr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ul(){function u(v){return m.call(u.src,u.listener,v)}const m=Do;return u}function hs(u,m,v,T,B){if(Array.isArray(m))for(var $=0;$<m.length;$++)hs(u,m[$],v,T,B);else T=y(T)?!!T.capture:!!T,v=No(v),u&&u[be]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],v=Lr($,v,T,B),-1<v&&(Et($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=fs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Lr(m,v,T,B)),(v=-1<u?m[u]:null)&&hr(v))}function hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[be])us(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(fr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=fs(m))?(us(v,u),v.h==0&&(v.src=null,m[Ti]=null)):Et(u)}}}function fr(u){return u in cs?cs[u]:cs[u]="on"+u}function Do(u,m){if(u.da)u=!0;else{m=new Ce(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&hr(u),u=v.call(T,m)}return u}function fs(u){return u=u[Ti],u instanceof cr?u:null}var ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function No(u){return typeof u=="function"?u:(u[ds]||(u[ds]=function(m){return u.handleEvent(m)}),u[ds])}function ft(){K.call(this),this.i=new cr(this),this.M=this,this.F=null}N(ft,K),ft.prototype[be]=!0,ft.prototype.removeEventListener=function(u,m,v,T){hs(this,u,m,v,T)};function dt(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new pe(m,u);else if(m instanceof pe)m.target=m.target||u;else{var B=m;m=new pe(T,u),V(m,B)}if(B=!0,v)for(var $=v.length-1;0<=$;$--){var te=m.g=v[$];B=dr(te,T,!0,m)&&B}if(te=m.g=u,B=dr(te,T,!0,m)&&B,B=dr(te,T,!1,m)&&B,v)for($=0;$<v.length;$++)te=m.g=v[$],B=dr(te,T,!1,m)&&B}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)Et(v[T]);delete u.g[m],u.h--}}this.F=null},ft.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},ft.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function dr(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,$=0;$<m.length;++$){var te=m[$];if(te&&!te.da&&te.capture==v){var je=te.listener,pt=te.ha||te.src;te.fa&&us(u.i,te),B=je.call(pt,T)!==!1&&B}}return B&&!T.defaultPrevented}function Mo(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function Or(u){u.g=Mo(()=>{u.g=null,u.i&&(u.i=!1,Or(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Si extends K{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(u){K.call(this),this.h=u,this.g={}}N(Ai,K);var Lo=[];function Oo(u){ce(u.g,function(m,v){this.g.hasOwnProperty(v)&&hr(m)},u),u.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),Oo(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fo=f.JSON.stringify,bo=f.JSON.parse,Bo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ii(){}Ii.prototype.h=null;function ps(u){return u.h||(u.h=u.i())}function ms(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){pe.call(this,"d")}N(qn,pe);function gs(){pe.call(this,"c")}N(gs,pe);var Kn={},Uo=null;function Pi(){return Uo=Uo||new ft}Kn.La="serverreachability";function jo(u){pe.call(this,Kn.La,u)}N(jo,pe);function pr(u){const m=Pi();dt(m,new jo(m))}Kn.STAT_EVENT="statevent";function zo(u,m){pe.call(this,Kn.STAT_EVENT,u),this.stat=m}N(zo,pe);function st(u){const m=Pi();dt(m,new zo(m,u))}Kn.Ma="timingevent";function ys(u,m){pe.call(this,Kn.Ma,u),this.size=m}N(ys,pe);function xn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Ci(){this.g=!0}Ci.prototype.xa=function(){this.g=!1};function Ri(u,m,v,T,B,$){u.info(function(){if(u.g)if($)for(var te="",je=$.split("&"),pt=0;pt<je.length;pt++){var Ne=je[pt].split("=");if(1<Ne.length){var wt=Ne[0];Ne=Ne[1];var ut=wt.split("_");te=2<=ut.length&&ut[1]=="type"?te+(wt+"="+Ne+"&"):te+(wt+"=redacted&")}}else te=null;else te=$;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+m+`
`+v+`
`+te})}function vs(u,m,v,T,B,$,te){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+m+`
`+v+`
`+$+" "+te})}function Vn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+xc(u,v)+(T?" "+T:"")})}function $o(u,m){u.info(function(){return"TIMEOUT: "+m})}Ci.prototype.info=function(){};function xc(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var te=1;te<B.length;te++)B[te]=""}}}}return Fo(v)}catch{return m}}var _s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function xi(){}N(xi,Ii),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},kn=new xi;function Dn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hl}function hl(){this.i=null,this.g="",this.h=!1}var Wo={},Es={};function ws(u,m,v){u.L=1,u.v=jr(ln(m)),u.m=v,u.P=!0,qo(u,null)}function qo(u,m){u.F=Date.now(),We(u),u.A=ln(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),$r(v.i,"t",T),u.C=0,v=u.j.J,u.h=new hl,u.g=xl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Si(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(Lo[0]=B.toString()),B=Lo);for(var $=0;$<B.length;$++){var te=Vo(v,B[$],T||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),pr(),Ri(u.i,u.u,u.A,u.l,u.R,u.m)}Dn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Yt(u)==3?m.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const ut=Yt(this.g);var m=this.g.Ba();const En=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||Yo(this.g)))){this.J||ut!=4||m==7||(m==8||0>=En?pr(3):pr(2)),Vi(this);var v=this.g.Z();this.X=v;t:if(fl(this)){var T=Yo(this.g);u="";var B=T.length,$=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Fr(this);var te="";break t}this.h.i=new f.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!($&&m==B-1)});T.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=v==200,vs(this.i,this.u,this.A,this.l,this.R,ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var je,pt=this.g;if((je=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(je)){var Ne=je;break t}}Ne=null}if(v=Ne)Vn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ko(this,v);else{this.o=!1,this.s=3,st(12),vn(this),Fr(this);break e}}if(this.P){v=!0;let cn;for(;!this.J&&this.C<te.length;)if(cn=Vc(this,te),cn==Es){ut==4&&(this.s=4,st(14),v=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==Wo){this.s=4,st(15),Vn(this.i,this.l,te,"[Invalid Chunk]"),v=!1;break}else Vn(this.i,this.l,cn,null),Ko(this,cn);if(fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||te.length!=0||this.h.h||(this.s=1,st(16),v=!1),this.o=this.o&&v,!v)Vn(this.i,this.l,te,"[Invalid Chunked Response]"),vn(this),Fr(this);else if(0<te.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Zo(wt),wt.M=!0,st(11))}}else Vn(this.i,this.l,te,null),Ko(this,te);ut==4&&vn(this),this.o&&!this.J&&(ut==4?Ds(this.j,this):(this.o=!1,We(this)))}else Cs(this.g),v==400&&0<te.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),vn(this),Fr(this)}}}catch{}finally{}};function fl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Vc(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?Es:(v=Number(m.substring(v,T)),isNaN(v)?Wo:(T+=1,T+v>m.length?Es:(m=m.slice(T,T+v),u.C=T+v,m)))}Dn.prototype.cancel=function(){this.J=!0,vn(this)};function We(u){u.S=Date.now()+u.I,dl(u,u.I)}function dl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xn(S(u.ba,u),m)}function Vi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Dn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($o(this.i,this.A),this.L!=2&&(pr(),st(17)),vn(this),this.s=2,Fr(this)):dl(this,this.S-u)};function Fr(u){u.j.G==0||u.J||Ds(u.j,u)}function vn(u){Vi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Oo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Ko(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||qt(v.h,u))){if(!u.K&&qt(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)ks(v),Fn(v);else break e;Vs(v),st(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=xn(S(v.Za,v),6e3));if(1>=ml(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else _r(v,11)}else if((u.K||v.g==u)&&ks(v),!H(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let Ne=B[m];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const wt=Ne[3];wt!=null&&(v.la=wt,v.j.info("VER="+v.la));const ut=Ne[4];ut!=null&&(v.Aa=ut,v.j.info("SVER="+v.Aa));const En=Ne[5];En!=null&&typeof En=="number"&&0<En&&(T=1.5*En,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const cn=u.g;if(cn){const Fi=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var $=T.h;$.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ho($,$.h),$.h=null))}if(T.D){const Ms=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ms&&(T.ya=Ms,ze(T.I,T.D,Ms))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var te=u;if(T.qa=Rl(T,T.J?T.ia:null,T.W),te.K){gl(T.h,te);var je=te,pt=T.L;pt&&(je.I=pt),je.B&&(Vi(je),We(je)),T.g=te}else Oi(T);0<v.i.length&&Xn(v)}else Ne[0]!="stop"&&Ne[0]!="close"||_r(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?_r(v,7):xt(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}pr(4)}catch{}}var pl=class{constructor(u,m){this.g=u,this.map=m}};function ki(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ml(u){return u.h?1:u.g?u.g.size:0}function qt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ho(u,m){u.g?u.g.add(m):u.h=m}function gl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ki.prototype.cancel=function(){if(this.i=yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function yl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return O(u.i)}function Ts(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function Ss(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function br(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Ss(u),T=Ts(u),B=T.length,$=0;$<B;$++)m.call(void 0,T[$],v&&v[$],u)}var Di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kc(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),B=null;if(0<=T){var $=u[v].substring(0,T);B=u[v].substring(T+1)}else $=u[v];m($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function mr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mr){this.h=u.h,Ni(this,u.j),this.o=u.o,this.g=u.g,Br(this,u.s),this.l=u.l;var m=u.i,v=new Hn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Ur(this,v),this.m=u.m}else u&&(m=String(u).match(Di))?(this.h=!1,Ni(this,m[1]||"",!0),this.o=Ve(m[2]||""),this.g=Ve(m[3]||"",!0),Br(this,m[4]),this.l=Ve(m[5]||"",!0),Ur(this,m[6]||"",!0),this.m=Ve(m[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}mr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(zr(m,As,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(zr(m,As,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(zr(v,v.charAt(0)=="/"?El:_l,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",zr(v,Go)),u.join("")};function ln(u){return new mr(u)}function Ni(u,m,v){u.j=v?Ve(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Br(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ur(u,m,v){m instanceof Hn?(u.i=m,Gn(u.i,u.h)):(v||(m=zr(m,wl)),u.i=new Hn(m,u.h))}function ze(u,m,v){u.i.set(m,v)}function jr(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ve(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,vl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var As=/[#\/\?@]/g,_l=/[#\?:]/g,El=/[#\?]/g,wl=/[#\?@]/g,Go=/#/g;function Hn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rt(u){u.g||(u.g=new Map,u.h=0,u.i&&kc(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Hn.prototype,n.add=function(u,m){Rt(this),this.i=null,u=_n(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Nn(u,m){Rt(u),m=_n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Mn(u,m){return Rt(u),m=_n(u,m),u.g.has(m)}n.forEach=function(u,m){Rt(this),this.g.forEach(function(v,T){v.forEach(function(B){u.call(m,B,T,this)},this)},this)},n.na=function(){Rt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const B=u[T];for(let $=0;$<B.length;$++)v.push(m[T])}return v},n.V=function(u){Rt(this);let m=[];if(typeof u=="string")Mn(this,u)&&(m=m.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return Rt(this),this.i=null,u=_n(this,u),Mn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function $r(u,m,v){Nn(u,m),0<v.length&&(u.i=null,u.g.set(_n(u,m),O(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const $=encodeURIComponent(String(T)),te=this.V(T);for(T=0;T<te.length;T++){var B=$;te[T]!==""&&(B+="="+encodeURIComponent(String(te[T]))),u.push(B)}}return this.i=u.join("&")};function _n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Gn(u,m){m&&!u.j&&(Rt(u),u.i=null,u.g.forEach(function(v,T){var B=T.toLowerCase();T!=B&&(Nn(this,T),$r(this,B,v))},u)),u.j=m}function Dc(u,m){const v=new Ci;if(f.Image){const T=new Image;T.onload=R(Xt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=R(Xt,v,"TestLoadImage: error",!1,m,T),T.onabort=R(Xt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=R(Xt,v,"TestLoadImage: timeout",!1,m,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Tl(u,m){const v=new Ci,T=new AbortController,B=setTimeout(()=>{T.abort(),Xt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(B),$.ok?Xt(v,"TestPingServer: ok",!0,m):Xt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Xt(v,"TestPingServer: error",!1,m)})}function Xt(u,m,v,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(v)}catch{}}function Nc(){this.g=new Bo}function Sl(u,m,v){const T=v||"";try{br(u,function(B,$){let te=B;y(B)&&(te=Fo(B)),m.push(T+$+"="+encodeURIComponent(te))})}catch(B){throw m.push(T+"type="+encodeURIComponent("_badmap")),B}}function gr(u){this.l=u.Ub||null,this.j=u.eb||!1}N(gr,Ii),gr.prototype.g=function(){return new Mi(this.l,this.j)},gr.prototype.i=function(u){return function(){return u}}({});function Mi(u,m){ft.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Mi,ft),n=Mi.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,On(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ln(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ln(this):On(this),this.readyState==3&&Al(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ln(this))},n.Qa=function(u){this.g&&(this.response=u,Ln(this))},n.ga=function(){this.g&&Ln(this)};function Ln(u){u.readyState=4,u.l=null,u.j=null,u.v=null,On(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function On(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yr(u){let m="";return ce(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Wr(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=yr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):ze(u,m,v))}function Xe(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Xe,ft);var Mc=/^https?$/i,Qo=["POST","PUT"];n=Xe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?ps(this.o):ps(kn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){Li(this,$);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)v.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())v.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),B=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Qo,m,void 0))||T||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of v)this.g.setRequestHeader($,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Li(this,$)}};function Li(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Is(u),un(u)}function Is(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,dt(this,"complete"),dt(this,"abort"),un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Xe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xo(this):this.bb())},n.bb=function(){Xo(this)};function Xo(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)Mo(u.Ea,0,u);else if(dt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=te===0){var B=String(u.D).match(Di)[1]||null;!B&&f.self&&f.self.location&&(B=f.self.location.protocol.slice(0,-1)),T=!Mc.test(B?B.toLowerCase():"")}v=T}if(v)dt(u,"complete"),dt(u,"success");else{u.m=6;try{var $=2<Yt(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Is(u)}}finally{un(u)}}}}function un(u,m){if(u.g){Ps(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||dt(u,"ready");try{v.onreadystatechange=T}catch{}}}function Ps(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),bo(m)}};function Yo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Cs(u){const m={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(H(u[T]))continue;var v=M(u[T]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=m[B]||[];m[B]=$,$.push(v)}k(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Jo(u){this.Aa=0,this.i=[],this.j=new Ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qn("baseRetryDelayMs",5e3,u),this.cb=Qn("retryDelaySeedMs",1e4,u),this.Wa=Qn("forwardChannelMaxRetries",2,u),this.wa=Qn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ki(u&&u.concurrentRequestLimit),this.Da=new Nc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Jo.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,T){st(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Rl(this,null,this.W),Xn(this)};function xt(u){if(Rs(u),u.G==3){var m=u.U++,v=ln(u.I);if(ze(v,"SID",u.K),ze(v,"RID",m),ze(v,"TYPE","terminate"),vr(u,v),m=new Dn(u,u.j,m),m.L=2,m.v=jr(ln(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.v,v=!0),v||(m.g=xl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),We(m)}Cl(u)}function Fn(u){u.g&&(Zo(u),u.g.cancel(),u.g=null)}function Rs(u){Fn(u),u.u&&(f.clearTimeout(u.u),u.u=null),ks(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Xn(u){if(!an(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ae||ne(),ee||(Ae(),ee=!0),de.add(m,u),u.B=0}}function Lc(u,m){return ml(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xn(S(u.Ga,u,m),Pl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new Dn(this,this.j,u);let $=this.o;if(this.S&&($?($=A($),V($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=qr(this,B,m),v=ln(this.I),ze(v,"RID",u),ze(v,"CVER",22),this.D&&ze(v,"X-HTTP-Session-Id",this.D),vr(this,v),$&&(this.O?m="headers="+encodeURIComponent(String(yr($)))+"&"+m:this.m&&Wr(v,this.m,$)),Ho(this.h,B),this.Ua&&ze(v,"TYPE","init"),this.P?(ze(v,"$req",m),ze(v,"SID","null"),B.T=!0,ws(B,v,null)):ws(B,v,m),this.G=2}}else this.G==3&&(u?xs(this,u):this.i.length==0||an(this.h)||xs(this))};function xs(u,m){var v;m?v=m.l:v=u.U++;const T=ln(u.I);ze(T,"SID",u.K),ze(T,"RID",v),ze(T,"AID",u.T),vr(u,T),u.m&&u.o&&Wr(T,u.m,u.o),v=new Dn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=qr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ho(u.h,v),ws(v,T,m)}function vr(u,m){u.H&&ce(u.H,function(v,T){ze(m,T,v)}),u.l&&br({},function(v,T){ze(m,T,v)})}function qr(u,m,v){v=Math.min(u.i.length,v);var T=u.l?S(u.l.Na,u.l,u):null;e:{var B=u.i;let $=-1;for(;;){const te=["count="+v];$==-1?0<v?($=B[0].g,te.push("ofs="+$)):$=0:te.push("ofs="+$);let je=!0;for(let pt=0;pt<v;pt++){let Ne=B[pt].g;const wt=B[pt].map;if(Ne-=$,0>Ne)$=Math.max(0,B[pt].g-100),je=!1;else try{Sl(wt,te,"req"+Ne+"_")}catch{T&&T(wt)}}if(je){T=te.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function Oi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ae||ne(),ee||(Ae(),ee=!0),de.add(m,u),u.v=0}}function Vs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xn(S(u.Fa,u),Pl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Il(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xn(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Fn(this),Il(this))};function Zo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Il(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=ln(u.qa);ze(m,"RID","rpc"),ze(m,"SID",u.K),ze(m,"AID",u.T),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(m,"TO",u.ja),ze(m,"TYPE","xmlhttp"),vr(u,m),u.m&&u.o&&Wr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=jr(ln(m)),v.m=null,v.P=!0,qo(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Fn(this),Vs(this),st(19))};function ks(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ds(u,m){var v=null;if(u.g==m){ks(u),Zo(u),u.g=null;var T=2}else if(qt(u.h,m))v=m.D,gl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;T=Pi(),dt(T,new ys(T,v)),Xn(u)}else Oi(u);else if(B=m.s,B==3||B==0&&0<m.X||!(T==1&&Lc(u,m)||T==2&&Vs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:_r(u,5);break;case 4:_r(u,10);break;case 3:_r(u,6);break;default:_r(u,2)}}}function Pl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function _r(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),T=u.Xa;const B=!T;T=new mr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ni(T,"https"),jr(T),B?Dc(T.toString(),v):Tl(T.toString(),v)}else st(2);u.G=0,u.l&&u.l.sa(m),Cl(u),Rs(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Cl(u){if(u.G=0,u.ka=[],u.l){const m=yl(u.h);(m.length!=0||u.i.length!=0)&&(L(u.ka,m),L(u.ka,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.ra()}}function Rl(u,m,v){var T=v instanceof mr?ln(v):new mr(v);if(T.g!="")m&&(T.g=m+"."+T.g),Br(T,T.s);else{var B=f.location;T=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var $=new mr(null);T&&Ni($,T),m&&($.g=m),B&&Br($,B),v&&($.l=v),T=$}return v=u.D,m=u.ya,v&&m&&ze(T,v,m),ze(T,"VER",u.la),vr(u,T),T}function xl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Xe(new gr({eb:v})):new Xe(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ea(){}n=ea.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ns(){}Ns.prototype.g=function(u,m){return new Kt(u,m)};function Kt(u,m){ft.call(this),this.g=new Jo(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!H(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!H(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Yn(this)}N(Kt,ft),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){xt(this.g)},Kt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Fo(u),u=v);m.i.push(new pl(m.Ya++,u)),m.G==3&&Xn(m)},Kt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,Kt.aa.N.call(this)};function Vl(u){qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}N(Vl,qn);function kl(){gs.call(this),this.status=1}N(kl,gs);function Yn(u){this.g=u}N(Yn,ea),Yn.prototype.ua=function(){dt(this.g,"a")},Yn.prototype.ta=function(u){dt(this.g,new Vl(u))},Yn.prototype.sa=function(u){dt(this.g,new kl)},Yn.prototype.ra=function(){dt(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,qE=function(){return new Ns},WE=function(){return Pi()},$E=Kn,Yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,Ou=_s,cl.COMPLETE="complete",zE=cl,ms.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",ft.prototype.listen=ft.prototype.K,xa=ms,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,jE=Xe}).apply(typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{});const cv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new ME("@firebase/firestore");function to(){return ss.logLevel}function se(n,...e){if(ss.logLevel<=Le.DEBUG){const t=e.map(Gd);ss.debug(`Firestore (${Po}): ${n}`,...t)}}function Nr(n,...e){if(ss.logLevel<=Le.ERROR){const t=e.map(Gd);ss.error(`Firestore (${Po}): ${n}`,...t)}}function go(n,...e){if(ss.logLevel<=Le.WARN){const t=e.map(Gd);ss.warn(`Firestore (${Po}): ${n}`,...t)}}function Gd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+n;throw Nr(e),new Error(e)}function Ue(n,e){n||Te()}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Io{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}}class kC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DC{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new rs,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new rs)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string"),new KE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new zt(e)}}class NC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class MC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new NC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(this.o===void 0);const i=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new LC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=FC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function yo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new vt(0,0))}static max(){return new Se(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=nr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=nr.isNumericId(e),o=nr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?nr.extractNumericId(e).compare(nr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ci.fromString(e.substring(4,e.length-2))}}class Je extends nr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends nr{construct(e,t,i){return new Mt(e,t,i)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(l(),o++)}if(l(),c)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Je.fromString(e))}static fromName(e){return new _e(Je.fromString(e).popFirst(5))}static empty(){return new _e(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Je(e.slice()))}}function BC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new pi(o,_e.empty(),e)}function UC(n){return new pi(n.readTime,n.key,-1)}class pi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new pi(Se.min(),_e.empty(),-1)}static max(){return new pi(Se.max(),_e.empty(),-1)}}function jC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==zC)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,i)=>{t(e)})}static reject(e){return new q((t,i)=>{i(e)})}static waitFor(e){return new q((t,i)=>{let o=0,l=0,c=!1;e.forEach(f=>{++o,f.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=q.resolve(!1);for(const i of e)t=t.next(o=>o?q.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new q((i,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(_=>{c[y]=_,++f,f===l&&i(c)},_=>o(_))}})}static doWhile(e,t){return new q((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function WC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ro(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fc.oe=-1;function dc(n){return n==null}function Yu(n){return n===0&&1/n==-1/0}function qC(n){return typeof n=="number"&&Number.isInteger(n)&&!Yu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hv(e)),e=HC(n.get(t),e);return hv(e)}function HC(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function hv(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ei(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Nt.RED,this.left=o??Nt.EMPTY,this.right=l??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Nt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dv(this.data.getIterator())}getIteratorFrom(e){return new dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new _t(Mt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new QE("Invalid base64 string: "+l):l}}(e);return new Lt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const GC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(n){if(Ue(!!n),typeof n=="string"){let e=0;const t=GC.exec(n);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(n.seconds),nanos:lt(n.nanos)}}function lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gi(n){return typeof n=="string"?Lt.fromBase64String(n):Lt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function pc(n){const e=n.mapValue.fields.__previous_value__;return Qd(e)?pc(e):e}function Qa(n){const e=mi(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,i,o,l,c,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y}}class Xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qd(n)?4:YC(n)?9007199254740991:XC(n)?10:11:Te()}function lr(n,e){if(n===e)return!0;const t=yi(n);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qa(n).isEqual(Qa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=mi(o.timestampValue),f=mi(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return gi(o.bytesValue).isEqual(gi(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return lt(o.geoPointValue.latitude)===lt(l.geoPointValue.latitude)&&lt(o.geoPointValue.longitude)===lt(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return lt(o.integerValue)===lt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=lt(o.doubleValue),f=lt(l.doubleValue);return c===f?Yu(c)===Yu(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return yo(n.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(fv(c)!==fv(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!lr(c[p],f[p])))return!1;return!0}(n,e);default:return Te()}}function Ya(n,e){return(n.values||[]).find(t=>lr(t,e))!==void 0}function vo(n,e){if(n===e)return 0;const t=yi(n),i=yi(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return function(l,c){const f=lt(l.integerValue||l.doubleValue),p=lt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return pv(n.timestampValue,e.timestampValue);case 4:return pv(Qa(n),Qa(e));case 5:return ke(n.stringValue,e.stringValue);case 6:return function(l,c){const f=gi(l),p=gi(c);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const _=ke(f[y],p[y]);if(_!==0)return _}return ke(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const f=ke(lt(l.latitude),lt(c.latitude));return f!==0?f:ke(lt(l.longitude),lt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mv(n.arrayValue,e.arrayValue);case 10:return function(l,c){var f,p,y,_;const w=l.fields||{},S=c.fields||{},R=(f=w.value)===null||f===void 0?void 0:f.arrayValue,N=(p=S.value)===null||p===void 0?void 0:p.arrayValue,O=ke(((y=R==null?void 0:R.values)===null||y===void 0?void 0:y.length)||0,((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0);return O!==0?O:mv(R,N)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Vu.mapValue&&c===Vu.mapValue)return 0;if(l===Vu.mapValue)return 1;if(c===Vu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const S=ke(p[w],_[w]);if(S!==0)return S;const R=vo(f[p[w]],y[_[w]]);if(R!==0)return R}return ke(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Te()}}function pv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=mi(n),i=mi(e),o=ke(t.seconds,i.seconds);return o!==0?o:ke(t.nanos,i.nanos)}function mv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=vo(t[o],i[o]);if(l)return l}return ke(t.length,i.length)}function _o(n){return Jf(n)}function Jf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=mi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Jf(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Jf(t.fields[c])}`;return o+"}"}(n.mapValue):Te()}function Fu(n){switch(yi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pc(n);return e?16+Fu(e):16;case 5:return 2*n.stringValue.length;case 6:return gi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Fu(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Ei(i.fields,(l,c)=>{o+=l.length+Fu(c)}),o}(n.mapValue);default:throw Te()}}function Zf(n){return!!n&&"integerValue"in n}function Xd(n){return!!n&&"arrayValue"in n}function gv(n){return!!n&&"nullValue"in n}function yv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bu(n){return!!n&&"mapValue"in n}function XC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Fa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ei(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Fa(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fa(t)}setAll(e){let t=Mt.emptyPath(),i={},o=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=Fa(c):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];bu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ei(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new on(Fa(this.value))}}function XE(n){const e=[];return Ei(n.fields,(t,i)=>{const o=new Mt([t]);if(bu(i)){const l=XE(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),on.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Se.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Se.min(),Se.min(),on.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Se.min(),Se.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.position=e,this.inclusive=t}}function vv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(c.referenceValue),t.key):i=vo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function _v(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function JC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{}class yt extends YE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new eR(e,t,i):t==="array-contains"?new rR(e,i):t==="in"?new iR(e,i):t==="not-in"?new sR(e,i):t==="array-contains-any"?new oR(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new tR(e,i):new nR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(vo(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends YE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ur(e,t)}matches(e){return JE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function JE(n){return n.op==="and"}function ZE(n){return ZC(n)&&JE(n)}function ZC(n){for(const e of n.filters)if(e instanceof ur)return!1;return!0}function ed(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+_o(n.value);if(ZE(n))return n.filters.map(e=>ed(e)).join(",");{const e=n.filters.map(t=>ed(t)).join(",");return`${n.op}(${e})`}}function ew(n,e){return n instanceof yt?function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&lr(i.value,o.value)}(n,e):n instanceof ur?function(i,o){return o instanceof ur&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,f)=>l&&ew(c,o.filters[f]),!0):!1}(n,e):void Te()}function tw(n){return n instanceof yt?function(t){return`${t.field.canonicalString()} ${t.op} ${_o(t.value)}`}(n):n instanceof ur?function(t){return t.op.toString()+" {"+t.getFilters().map(tw).join(" ,")+"}"}(n):"Filter"}class eR extends yt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class tR extends yt{constructor(e,t){super(e,"in",t),this.keys=nw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nR extends yt{constructor(e,t){super(e,"not-in",t),this.keys=nw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>_e.fromName(i.referenceValue))}class rR extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xd(t)&&Ya(t.arrayValue,this.value)}}class iR extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ya(this.value.arrayValue,t)}}class sR extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ya(this.value.arrayValue,t)}}class oR extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ya(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t=null,i=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.ue=null}}function Ev(n,e=null,t=[],i=[],o=null,l=null,c=null){return new aR(n,e,t,i,o,l,c)}function Yd(n){const e=Ie(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>ed(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>_o(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>_o(i)).join(",")),e.ue=t}return e.ue}function Jd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ew(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_v(n.startAt,e.startAt)&&_v(n.endAt,e.endAt)}function td(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t=null,i=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lR(n,e,t,i,o,l,c,f){return new mc(n,e,t,i,o,l,c,f)}function Zd(n){return new mc(n)}function wv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uR(n){return n.collectionGroup!==null}function ba(n){const e=Ie(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new _t(Mt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Zu(l,i))}),t.has(Mt.keyField().canonicalString())||e.ce.push(new Zu(Mt.keyField(),i))}return e.ce}function sr(n){const e=Ie(n);return e.le||(e.le=cR(e,ba(n))),e.le}function cR(n,e){if(n.limitType==="F")return Ev(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Zu(o.field,l)});const t=n.endAt?new Ju(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ju(n.startAt.position,n.startAt.inclusive):null;return Ev(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function nd(n,e,t){return new mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gc(n,e){return Jd(sr(n),sr(e))&&n.limitType===e.limitType}function rw(n){return`${Yd(sr(n))}|lt:${n.limitType}`}function no(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>tw(o)).join(", ")}]`),dc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>_o(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>_o(o)).join(",")),`Target(${i})`}(sr(n))}; limitType=${n.limitType})`}function yc(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of ba(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,f,p){const y=vv(c,f,p);return c.inclusive?y<=0:y<0}(i.startAt,ba(i),o)||i.endAt&&!function(c,f,p){const y=vv(c,f,p);return c.inclusive?y>=0:y>0}(i.endAt,ba(i),o))}(n,e)}function hR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iw(n){return(e,t)=>{let i=!1;for(const o of ba(n)){const l=fR(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function fR(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):function(l,c,f){const p=c.data.field(l),y=f.data.field(l);return p!==null&&y!==null?vo(p,y):Te()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new nt(_e.comparator);function Mr(){return dR}const sw=new nt(_e.comparator);function Va(...n){let e=sw;for(const t of n)e=e.insert(t.key,t);return e}function ow(n){let e=sw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ts(){return Ba()}function aw(){return Ba()}function Ba(){return new as(n=>n.toString(),(n,e)=>n.isEqual(e))}const pR=new nt(_e.comparator),mR=new _t(_e.comparator);function xe(...n){let e=mR;for(const t of n)e=e.add(t);return e}const gR=new _t(ke);function yR(){return gR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function lw(n){return{integerValue:""+n}}function vR(n,e){return qC(e)?lw(e):ep(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this._=void 0}}function _R(n,e,t){return n instanceof ec?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Qd(l)&&(l=pc(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):n instanceof Ja?cw(n,e):n instanceof Za?hw(n,e):function(o,l){const c=uw(o,l),f=Tv(c)+Tv(o.Pe);return Zf(c)&&Zf(o.Pe)?lw(f):ep(o.serializer,f)}(n,e)}function ER(n,e,t){return n instanceof Ja?cw(n,e):n instanceof Za?hw(n,e):t}function uw(n,e){return n instanceof tc?function(i){return Zf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class ec extends vc{}class Ja extends vc{constructor(e){super(),this.elements=e}}function cw(n,e){const t=fw(e);for(const i of n.elements)t.some(o=>lr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Za extends vc{constructor(e){super(),this.elements=e}}function hw(n,e){let t=fw(e);for(const i of n.elements)t=t.filter(o=>!lr(o,i));return{arrayValue:{values:t}}}class tc extends vc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Tv(n){return lt(n.integerValue||n.doubleValue)}function fw(n){return Xd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wR(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Ja&&o instanceof Ja||i instanceof Za&&o instanceof Za?yo(i.elements,o.elements,lr):i instanceof tc&&o instanceof tc?lr(i.Pe,o.Pe):i instanceof ec&&o instanceof ec}(n.transform,e.transform)}class TR{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _c{}function dw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mw(n.key,or.none()):new sl(n.key,n.data,or.none());{const t=n.data,i=on.empty();let o=new _t(Mt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new wi(n.key,i,new pn(o.toArray()),or.none())}}function SR(n,e,t){n instanceof sl?function(o,l,c){const f=o.value.clone(),p=Av(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof wi?function(o,l,c){if(!Bu(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Av(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(pw(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Ua(n,e,t,i){return n instanceof sl?function(l,c,f,p){if(!Bu(l.precondition,c))return f;const y=l.value.clone(),_=Iv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof wi?function(l,c,f,p){if(!Bu(l.precondition,c))return f;const y=Iv(l.fieldTransforms,p,c),_=c.data;return _.setAll(pw(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(l,c,f){return Bu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function AR(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=uw(i.transform,o||null);l!=null&&(t===null&&(t=on.empty()),t.set(i.field,l))}return t||null}function Sv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&yo(i,o,(l,c)=>wR(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class sl extends _c{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wi extends _c{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function pw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Av(n,e,t){const i=new Map;Ue(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);i.set(l.field,ER(c,f,t[o]))}return i}function Iv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,_R(l,c,e))}return i}class mw extends _c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IR extends _c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SR(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ua(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ua(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=aw();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=dw(c,f);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(t,i)=>Sv(t,i))&&yo(this.baseMutations,e.baseMutations,(t,i)=>Sv(t,i))}}class tp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ue(e.mutations.length===i.length);let o=function(){return pR}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new tp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Me;function xR(n){switch(n){default:return Te();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function gw(n){if(n===void 0)return Nr("GRPC error has no .code"),Y.UNKNOWN;switch(n){case ht.OK:return Y.OK;case ht.CANCELLED:return Y.CANCELLED;case ht.UNKNOWN:return Y.UNKNOWN;case ht.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case ht.INTERNAL:return Y.INTERNAL;case ht.UNAVAILABLE:return Y.UNAVAILABLE;case ht.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case ht.NOT_FOUND:return Y.NOT_FOUND;case ht.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case ht.ABORTED:return Y.ABORTED;case ht.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case ht.DATA_LOSS:return Y.DATA_LOSS;default:return Te()}}(Me=ht||(ht={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new ci([4294967295,4294967295],0);function Pv(n){const e=VR().encode(n),t=new UE;return t.update(e),new Uint8Array(t.digest())}function Cv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ci([t,i],0),new ci([o,l],0)]}class np{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ka(`Invalid padding: ${t}`);if(i<0)throw new ka(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ka(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ci.fromNumber(this.Te)}de(e,t,i){let o=e.add(t.multiply(ci.fromNumber(i)));return o.compare(kR)===1&&(o=new ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Pv(e),[i,o]=Cv(t);for(let l=0;l<this.hashCount;l++){const c=this.de(i,o,l);if(!this.Ee(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new np(l,o,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.Te===0)return;const t=Pv(e),[i,o]=Cv(t);for(let l=0;l<this.hashCount;l++){const c=this.de(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ol.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ec(Se.min(),o,new nt(ke),Mr(),xe())}}class ol{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ol(i,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class yw{constructor(e,t){this.targetId=e,this.me=t}}class vw{constructor(e,t,i=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Rv{constructor(){this.fe=0,this.ge=xv(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),i=xe();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te()}}),new ol(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=xv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DR{constructor(e){this.Be=e,this.Le=new Map,this.ke=Mr(),this.qe=ku(),this.Qe=ku(),this.Ke=new nt(ke)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(td(l))if(i===0){const c=new _e(l.path);this.We(t,c,$t.newNoDocument(c,Se.min()))}else Ue(i===1);else{const c=this.Ze(t);if(c!==i){const f=this.Xe(e),p=f?this.et(f,e,c):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=gi(i).toUint8Array()}catch(p){if(p instanceof QE)return go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new np(c,o,l)}catch(p){return go(p instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Te===0?null:f}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.Be.nt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,c)=>{const f=this.Ye(c);if(f){if(l.current&&td(f.target)){const p=new _e(f.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,$t.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=xe();this.Qe.forEach((l,c)=>{let f=!0;c.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Ec(e,t,this.Ke,this.ke,i);return this.ke=Mr(),this.qe=ku(),this.Qe=ku(),this.Ke=new nt(ke),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Rv,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new _t(ke),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new _t(ke),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Rv),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function ku(){return new nt(_e.comparator)}function xv(){return new nt(_e.comparator)}const NR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LR={and:"AND",or:"OR"};class OR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rd(n,e){return n.useProto3Json||dc(e)?e:{value:e}}function nc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _w(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FR(n,e){return nc(n,e.toTimestamp())}function ar(n){return Ue(!!n),Se.fromTimestamp(function(t){const i=mi(t);return new vt(i.seconds,i.nanos)}(n))}function rp(n,e){return id(n,e).canonicalString()}function id(n,e){const t=function(o){return new Je(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Ew(n){const e=Je.fromString(n);return Ue(Iw(e)),e}function sd(n,e){return rp(n.databaseId,e.path)}function Sf(n,e){const t=Ew(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Tw(t))}function ww(n,e){return rp(n.databaseId,e)}function bR(n){const e=Ew(n);return e.length===4?Je.emptyPath():Tw(e)}function od(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tw(n){return Ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Vv(n,e,t){return{name:sd(n,e),fields:t.value.mapValue.fields}}function BR(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,_){return y.useProto3Json?(Ue(_===void 0||typeof _=="string"),Lt.fromBase64String(_||"")):(Ue(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Lt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const _=y.code===void 0?Y.UNKNOWN:gw(y.code);return new ge(_,y.message||"")}(c);t=new vw(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Sf(n,i.document.name),l=ar(i.document.updateTime),c=i.document.createTime?ar(i.document.createTime):Se.min(),f=new on({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,l,c,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Uu(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Sf(n,i.document),l=i.readTime?ar(i.readTime):Se.min(),c=$t.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Uu([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Sf(n,i.document),l=i.removedTargetIds||[];t=new Uu([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new RR(o,l),f=i.targetId;t=new yw(f,c)}}return t}function UR(n,e){let t;if(e instanceof sl)t={update:Vv(n,e.key,e.value)};else if(e instanceof mw)t={delete:sd(n,e.key)};else if(e instanceof wi)t={update:Vv(n,e.key,e.data),updateMask:QR(e.fieldMask)};else{if(!(e instanceof IR))return Te();t={verify:sd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof ec)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ja)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Za)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof tc)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw Te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:FR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(n,e.precondition)),t}function jR(n,e){return n&&n.length>0?(Ue(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?ar(o.updateTime):ar(l);return c.isEqual(Se.min())&&(c=ar(l)),new TR(c,o.transformResults||[])}(t,e))):[]}function zR(n,e){return{documents:[ww(n,e.path)]}}function $R(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=ww(n,o);const l=function(y){if(y.length!==0)return Aw(ur.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(_=>function(S){return{field:ro(S.field),direction:KR(S.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=rd(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function WR(n){let e=bR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ue(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(w){const S=Sw(w);return S instanceof ur&&ZE(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(S=>function(N){return new Zu(io(N.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(S))}(t.orderBy));let f=null;t.limit&&(f=function(w){let S;return S=typeof w=="object"?w.value:w,dc(S)?null:S}(t.limit));let p=null;t.startAt&&(p=function(w){const S=!!w.before,R=w.values||[];return new Ju(R,S)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const S=!w.before,R=w.values||[];return new Ju(R,S)}(t.endAt)),lR(e,o,c,l,f,"F",p,y)}function qR(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Sw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=io(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=io(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=io(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=io(t.unaryFilter.field);return yt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return yt.create(io(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ur.create(t.compositeFilter.filters.map(i=>Sw(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function KR(n){return NR[n]}function HR(n){return MR[n]}function GR(n){return LR[n]}function ro(n){return{fieldPath:n.canonicalString()}}function io(n){return Mt.fromServerFormat(n.fieldPath)}function Aw(n){return n instanceof yt?function(t){if(t.op==="=="){if(yv(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NAN"}};if(gv(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yv(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NOT_NAN"}};if(gv(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(t.field),op:HR(t.op),value:t.value}}}(n):n instanceof ur?function(t){const i=t.getFilters().map(o=>Aw(o));return i.length===1?i[0]:{compositeFilter:{op:GR(t.op),filters:i}}}(n):Te()}function QR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Iw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t,i,o,l=Se.min(),c=Se.min(),f=Lt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.ht=e}}function YR(n){const e=WR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.ln=new ZR}addToCollectionParentIndex(e,t){return this.ln.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(pi.min())}updateCollectionGroup(e,t,i){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class ZR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new _t(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new _t(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Eo(0)}static Qn(){return new Eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv([n,e],[t,i]){const o=ke(n,t);return o===0?ke(e,i):o}class ex{constructor(e){this.Gn=e,this.buffer=new _t(Dv),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Dv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tx{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ro(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Co(t)}await this.Yn(3e5)})}}class nx{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return q.resolve(fc.oe);const i=new ex(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(kv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kv):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,c,f,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,f=Date.now(),this.removeTargets(e,i,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(y=Date.now(),to()<=Le.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w})))}}function rx(n,e){return new nx(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.changes=new as(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Ua(i.mutation,o,pn.empty(),vt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,xe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=xe()){const o=ts();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=Va();return l.forEach((f,p)=>{c=c.insert(f,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=ts();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,xe()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,o){let l=Mr();const c=Ba(),f=function(){return Ba()}();return t.forEach((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof wi)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),Ua(_.mutation,y,_.mutation.getFieldMask(),vt.now())):c.set(y.key,pn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,_)=>c.set(y,_)),t.forEach((y,_)=>{var w;return f.set(y,new sx(_,(w=c.get(y))!==null&&w!==void 0?w:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Ba();let o=new nt((c,f)=>c-f),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||pn.empty();_=f.applyToLocalView(y,_),i.set(p,_);const w=(o.get(f.batchId)||xe()).add(p);o=o.insert(f.batchId,w)})}).next(()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,_=p.value,w=aw();_.forEach(S=>{if(!l.has(S)){const R=dw(t.get(S),i.get(S));R!==null&&w.set(S,R),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,w))}return q.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):q.resolve(ts());let f=-1,p=l;return c.next(y=>q.forEach(y,(_,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next(S=>{p=p.insert(_,S)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,xe())).next(_=>({batchId:f,changes:ow(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(i=>{let o=Va();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Va();return this.indexManager.getCollectionParents(e,l).next(f=>q.forEach(f,p=>{const y=function(w,S){return new mc(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((w,S)=>{c=c.insert(w,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,$t.newInvalidDocument(_)))});let f=Va();return c.forEach((p,y)=>{const _=l.get(p);_!==void 0&&Ua(_.mutation,y,pn.empty(),vt.now()),yc(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return q.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:ar(o.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:YR(o.bundledQuery),readTime:ar(o.readTime)}}(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.overlays=new nt(_e.comparator),this.dr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ts();return q.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.dr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(i)),q.resolve()}getOverlaysForCollection(e,t,i){const o=ts(),l=t.length+1,c=new _e(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new nt((y,_)=>y-_);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=ts(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=ts(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,_)=>f.set(y,_)),!(f.size()>=o)););return q.resolve(f)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.dr.get(o.largestBatchId).delete(i.key);this.dr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new CR(t,i));let l=this.dr.get(t);l===void 0&&(l=xe(),this.dr.set(t,l)),this.dr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.Er=new _t(It.Ar),this.Rr=new _t(It.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new It(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new It(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new _e(new Je([])),i=new It(t,e),o=new It(t,e+1),l=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new _e(new Je([])),i=new It(t,e),o=new It(t,e+1);let l=xe();return this.Rr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new It(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return _e.comparator(e.key,t.key)||ke(e.br,t.br)}static Vr(e,t){return ke(e.br,t.br)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new _t(It.Ar)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new PR(l,t,i,o);this.mutationQueue.push(c);for(const f of o)this.vr=this.vr.add(new It(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return q.resolve(c)}lookupMutationBatch(e,t){return q.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],c=>{const f=this.Cr(c.br);l.push(f)}),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _t(ke);return t.forEach(o=>{const l=new It(o,0),c=new It(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],f=>{i=i.add(f.br)})}),q.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const c=new It(new _e(l),0);let f=new _t(ke);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.br)),!0)},c),q.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return q.forEach(t.mutations,o=>{const l=new It(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Bn(e){}containsKey(e,t){const i=new It(t,0),o=this.vr.firstAfterOrEqual(i);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.Nr=e,this.docs=function(){return new nt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return q.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Mr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))}),q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Mr();const c=t.path,f=new _e(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||jC(UC(_),i)<=0||(o.has(_.key)||yc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te()}Br(e,t){return q.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new fx(this)}getSize(e){return q.resolve(this.size)}}class fx extends ix{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),q.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.persistence=e,this.Lr=new as(t=>Yd(t),Jd),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.kr=0,this.qr=new ip,this.targetCount=0,this.Qr=Eo.qn()}forEachTarget(e,t){return this.Lr.forEach((i,o)=>t(o)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),q.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Eo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Un(t),q.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Lr.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Lr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),q.waitFor(l).next(()=>o)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return q.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),q.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return q.resolve(i)}containsKey(e,t){return q.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,t){this.Kr={},this.overlays={},this.$r=new fc(0),this.Ur=!1,this.Ur=!0,this.Wr=new ux,this.referenceDelegate=e(this),this.Gr=new dx(this),this.indexManager=new JR,this.remoteDocumentCache=function(o){return new hx(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new XR(t),this.jr=new ax(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new cx(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const o=new px(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return q.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class px extends $C{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Zr=new ip,this.Xr=null}static ei(e){return new sp(e)}get ti(){if(this.Xr)return this.Xr;throw Te()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),q.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),q.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ti,i=>{const o=_e.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Se.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return q.or([()=>q.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class rc{constructor(e,t){this.persistence=e,this.ri=new as(i=>KC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=rx(this,t)}static ei(e,t){return new rc(e,t)}Hr(){}Jr(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return q.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?q.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,c=>this.ir(e,c,t).next(f=>{f||(i++,l.removeEntry(c,Se.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),q.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fu(e.data.value)),t}ir(e,t,i){return q.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new op(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return fP()?8:WC(cP())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new mx;return this.ts(e,t,c).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,c,f.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(to()<=Le.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",no(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),q.resolve()):(to()<=Le.DEBUG&&se("QueryEngine","Query:",no(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(to()<=Le.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",no(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):q.resolve())}Xi(e,t){if(wv(t))return q.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=nd(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=xe(...l);return this.Zi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.rs(t,f);return this.ss(t,y,c,p.readTime)?this.Xi(e,nd(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,i,o){return wv(t)||o.isEqual(Se.min())?q.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const c=this.rs(t,l);return this.ss(t,c,i,o)?q.resolve(null):(to()<=Le.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),no(t)),this.os(e,c,t,BC(o,-1)).next(f=>f))})}rs(e,t){let i=new _t(iw(e));return t.forEach((o,l)=>{yc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return to()<=Le.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",no(t)),this.Zi.getDocumentsMatchingQuery(e,t,pi.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new nt(ke),this.cs=new as(l=>Yd(l),Jd),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ox(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function vx(n,e,t,i){return new yx(n,e,t,i)}async function Cw(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let p=xe();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ts:y,removedBatchIds:c,addedBatchIds:f}))})})}function _x(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,_){const w=y.batch,S=w.keys();let R=q.resolve();return S.forEach(N=>{R=R.next(()=>_.getEntry(p,N)).next(O=>{const L=y.docVersions.get(N);Ue(L!==null),O.version.compareTo(L)<0&&(w.applyToRemoteDocument(O,y),O.isValidDocument()&&(O.setReadTime(y.commitVersion),_.addEntry(O)))})}),R.next(()=>f.mutationQueue.removeMutationBatch(p,w))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let p=xe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function Rw(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Ex(n,e){const t=Ie(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((_,w)=>{const S=o.get(w);if(!S)return;f.push(t.Gr.removeMatchingKeys(l,_.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(l,_.addedDocuments,w)));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Lt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),o=o.insert(w,R),function(O,L,W){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(S,R,_)&&f.push(t.Gr.updateTargetData(l,R))});let p=Mr(),y=xe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),f.push(wx(l,c,e.documentUpdates).next(_=>{p=_.Is,y=_.ds})),!i.isEqual(Se.min())){const _=t.Gr.getLastRemoteSnapshotVersion(l).next(w=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(_)}return q.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function wx(n,e,t){let i=xe(),o=xe();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Mr();return t.forEach((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):se("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{Is:c,ds:o}})}function Tx(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Sx(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,q.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new ai(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function ad(n,e,t){const i=Ie(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Ro(c))throw c;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function Nv(n,e,t){const i=Ie(n);let o=Se.min(),l=xe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,_){const w=Ie(p),S=w.cs.get(_);return S!==void 0?q.resolve(w.us.get(S)):w.Gr.getTargetData(y,_)}(i,c,sr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,f.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:xe())).next(f=>(Ax(i,hR(e),f),{documents:f,Es:l})))}function Ax(n,e,t){let i=n.ls.get(e)||Se.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class Mv{constructor(){this.activeTargetIds=yR()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ix{constructor(){this._o=new Mv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Mv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function Af(){return Du===null?Du=function(){return 268435456+Math.round(2147483648*Math.random())}():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class xx extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,c){const f=Af(),p=this.No(t,i.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${f}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,l,c),this.Lo(t,p,y,o).then(_=>(se("RestConnection",`Received RPC '${t}' ${f}: `,_),_),_=>{throw go("RestConnection",`RPC '${t}' ${f} failed with error: `,_,"url: ",p,"request:",o),_})}ko(t,i,o,l,c,f){return this.Oo(t,i,o,l,c)}Bo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,i){const o=Cx[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,o){const l=Af();return new Promise((c,f)=>{const p=new jE;p.setWithCredentials(!0),p.listenOnce(zE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ou.NO_ERROR:const _=p.getResponseJson();se(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case Ou.TIMEOUT:se(Ut,`RPC '${e}' ${l} timed out`),f(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Ou.HTTP_ERROR:const w=p.getStatus();if(se(Ut,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S==null?void 0:S.error;if(R&&R.status&&R.message){const N=function(L){const W=L.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(W)>=0?W:Y.UNKNOWN}(R.status);f(new ge(N,R.message))}else f(new ge(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{se(Ut,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);se(Ut,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}qo(e,t,i){const o=Af(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=qE(),f=WE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");se(Ut,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=c.createWebChannel(_,p);let S=!1,R=!1;const N=new Rx({Eo:L=>{R?se(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(se(Ut,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),se(Ut,`RPC '${e}' stream ${o} sending:`,L),w.send(L))},Ao:()=>w.close()}),O=(L,W,H)=>{L.listen(W,X=>{try{H(X)}catch(le){setTimeout(()=>{throw le},0)}})};return O(w,xa.EventType.OPEN,()=>{R||(se(Ut,`RPC '${e}' stream ${o} transport opened.`),N.So())}),O(w,xa.EventType.CLOSE,()=>{R||(R=!0,se(Ut,`RPC '${e}' stream ${o} transport closed`),N.Do())}),O(w,xa.EventType.ERROR,L=>{R||(R=!0,go(Ut,`RPC '${e}' stream ${o} transport errored:`,L),N.Do(new ge(Y.UNAVAILABLE,"The operation could not be completed")))}),O(w,xa.EventType.MESSAGE,L=>{var W;if(!R){const H=L.data[0];Ue(!!H);const X=H,le=(X==null?void 0:X.error)||((W=X[0])===null||W===void 0?void 0:W.error);if(le){se(Ut,`RPC '${e}' stream ${o} received error:`,le);const re=le.status;let ce=function(P){const V=ht[P];if(V!==void 0)return gw(V)}(re),k=le.message;ce===void 0&&(ce=Y.INTERNAL,k="Unknown error status: "+re+" with message "+le.message),R=!0,N.Do(new ge(ce,k)),w.close()}else se(Ut,`RPC '${e}' stream ${o} received:`,H),N.vo(H)}}),O(f,$E.STAT_EVENT,L=>{L.stat===Yf.PROXY?se(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Yf.NOPROXY&&se(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.bo()},0),N}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){return new OR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,t,i,o,l,c,f,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new xw(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new ge(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.d_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vx extends Vw{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=BR(this.serializer,e),i=function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?ar(c.readTime):Se.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=od(this.serializer),t.addTarget=function(l,c){let f;const p=c.target;if(f=td(p)?{documents:zR(l,p)}:{query:$R(l,p).ct},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=_w(l,c.resumeToken);const y=rd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Se.min())>0){f.readTime=nc(l,c.snapshotVersion.toTimestamp());const y=rd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const i=qR(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=od(this.serializer),t.removeTarget=e,this.c_(t)}}class kx extends Vw{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=jR(e.writeResults,e.commitTime),i=ar(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=od(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>UR(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,id(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(Y.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.ko(e,id(t,i),o,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(Y.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Nx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Nr(t),this.C_=!1):se("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{ls(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.k_.add(4),await al(y),y.K_.set("Unknown"),y.k_.delete(4),await Tc(y)}(this))})}),this.K_=new Nx(i,o)}}async function Tc(n){if(ls(n))for(const e of n.q_)await e(!0)}async function al(n){for(const e of n.q_)await e(!1)}function kw(n,e){const t=Ie(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),cp(t)?up(t):xo(t).s_()&&lp(t,e))}function ap(n,e){const t=Ie(n),i=xo(t);t.L_.delete(e),i.s_()&&Dw(t,e),t.L_.size===0&&(i.s_()?i.a_():ls(t)&&t.K_.set("Unknown"))}function lp(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xo(n).V_(e)}function Dw(n,e){n.U_.xe(e),xo(n).m_(e)}function up(n){n.U_=new DR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),xo(n).start(),n.K_.F_()}function cp(n){return ls(n)&&!xo(n).i_()&&n.L_.size>0}function ls(n){return Ie(n).k_.size===0}function Nw(n){n.U_=void 0}async function Lx(n){n.K_.set("Online")}async function Ox(n){n.L_.forEach((e,t)=>{lp(n,e)})}async function Fx(n,e){Nw(n),cp(n)?(n.K_.O_(e),up(n)):n.K_.set("Unknown")}async function bx(n,e,t){if(n.K_.set("Online"),e instanceof vw&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const f of l.targetIds)o.L_.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.L_.delete(f),o.U_.removeTarget(f))}(n,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ic(n,i)}else if(e instanceof Uu?n.U_.$e(e):e instanceof yw?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Se.min()))try{const i=await Rw(n.localStore);t.compareTo(i)>=0&&await function(l,c){const f=l.U_.it(c);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.L_.get(y);_&&l.L_.set(y,_.withResumeToken(p.resumeToken,c))}}),f.targetMismatches.forEach((p,y)=>{const _=l.L_.get(p);if(!_)return;l.L_.set(p,_.withResumeToken(Lt.EMPTY_BYTE_STRING,_.snapshotVersion)),Dw(l,p);const w=new ai(_.target,p,y,_.sequenceNumber);lp(l,w)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await ic(n,i)}}async function ic(n,e,t){if(!Ro(e))throw e;n.k_.add(1),await al(n),n.K_.set("Offline"),t||(t=()=>Rw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Tc(n)})}function Mw(n,e){return e().catch(t=>ic(n,t,e))}async function Sc(n){const e=Ie(n),t=vi(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;Bx(e);)try{const o=await Tx(e.localStore,i);if(o===null){e.B_.length===0&&t.a_();break}i=o.batchId,Ux(e,o)}catch(o){await ic(e,o)}Lw(e)&&Ow(e)}function Bx(n){return ls(n)&&n.B_.length<10}function Ux(n,e){n.B_.push(e);const t=vi(n);t.s_()&&t.f_&&t.g_(e.mutations)}function Lw(n){return ls(n)&&!vi(n).i_()&&n.B_.length>0}function Ow(n){vi(n).start()}async function jx(n){vi(n).w_()}async function zx(n){const e=vi(n);for(const t of n.B_)e.g_(t.mutations)}async function $x(n,e,t){const i=n.B_.shift(),o=tp.from(i,e,t);await Mw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Sc(n)}async function Wx(n,e){e&&vi(n).f_&&await async function(i,o){if(function(c){return xR(c)&&c!==Y.ABORTED}(o.code)){const l=i.B_.shift();vi(i).__(),await Mw(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Sc(i)}}(n,e),Lw(n)&&Ow(n)}async function Ov(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=ls(t);t.k_.add(3),await al(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Tc(t)}async function qx(n,e){const t=Ie(n);e?(t.k_.delete(2),await Tc(t)):e||(t.k_.add(2),await al(t),t.K_.set("Unknown"))}function xo(n){return n.W_||(n.W_=function(t,i,o){const l=Ie(t);return l.b_(),new Vx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:Lx.bind(null,n),mo:Ox.bind(null,n),po:Fx.bind(null,n),R_:bx.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),cp(n)?up(n):n.K_.set("Unknown")):(await n.W_.stop(),Nw(n))})),n.W_}function vi(n){return n.G_||(n.G_=function(t,i,o){const l=Ie(t);return l.b_(),new kx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:jx.bind(null,n),po:Wx.bind(null,n),p_:zx.bind(null,n),y_:$x.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Sc(n)):(await n.G_.stop(),n.B_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,f=new hp(e,t,c,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),Ro(n))return new ge(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=Va(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.z_=new nt(_e.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Te():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class wo{constructor(e,t,i,o,l,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new wo(e,t,ho.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class Hx{constructor(){this.queries=bv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ie(t),l=o.queries;o.queries=bv(),l.forEach((c,f)=>{for(const p of f.J_)p.onError(i)})})(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function bv(){return new as(n=>rw(n),gc)}async function Gx(n,e){const t=Ie(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new Kx,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=fp(c,`Initialization of query '${no(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&dp(t)}async function Qx(n,e){const t=Ie(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Xx(n,e){const t=Ie(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.J_)f.ta(o)&&(i=!0);c.H_=o}}i&&dp(t)}function Yx(n,e,t){const i=Ie(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function dp(n){n.X_.forEach(e=>{e.next()})}var ld,Bv;(Bv=ld||(ld={})).na="default",Bv.Cache="cache";class Jx{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.key=e}}class bw{constructor(e){this.key=e}}class Zx{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=xe(),this.mutatedKeys=xe(),this.Va=iw(e),this.ma=new ho(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new Fv,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const S=o.get(_),R=yc(this.query,w)?w:null,N=!!S&&this.mutatedKeys.has(S.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;S&&R?S.data.isEqual(R.data)?N!==O&&(i.track({type:3,doc:R}),L=!0):this.ya(S,R)||(i.track({type:2,doc:R}),L=!0,(p&&this.Va(R,p)>0||y&&this.Va(R,y)<0)&&(f=!0)):!S&&R?(i.track({type:0,doc:R}),L=!0):S&&!R&&(i.track({type:1,doc:S}),L=!0,(p||y)&&(f=!0)),L&&(R?(c=c.add(R),l=O?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{ma:c,pa:i,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((_,w)=>function(R,N){const O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return O(R)-O(N)}(_.type,w.type)||this.Va(_.doc,w.doc)),this.wa(i),o=o!=null&&o;const f=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,c.length!==0||y?{snapshot:new wo(this.query,e.ma,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Fv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=xe(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new bw(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new Fw(i))}),t}va(e){this.Ea=e.Es,this.Ra=xe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return wo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class eV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tV{constructor(e){this.key=e,this.Fa=!1}}class nV{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new as(f=>rw(f),gc),this.Oa=new Map,this.Na=new Set,this.Ba=new nt(_e.comparator),this.La=new Map,this.ka=new ip,this.qa={},this.Qa=new Map,this.Ka=Eo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function rV(n,e,t=!0){const i=Ww(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await Bw(i,e,t,!0),o}async function iV(n,e){const t=Ww(n);await Bw(t,e,!0,!1)}async function Bw(n,e,t,i){const o=await Sx(n.localStore,sr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await sV(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&kw(n.remoteStore,o),f}async function sV(n,e,t,i,o){n.Ua=(w,S,R)=>async function(O,L,W,H){let X=L.view.ga(W);X.ss&&(X=await Nv(O.localStore,L.query,!1).then(({documents:k})=>L.view.ga(k,X)));const le=H&&H.targetChanges.get(L.targetId),re=H&&H.targetMismatches.get(L.targetId)!=null,ce=L.view.applyChanges(X,O.isPrimaryClient,le,re);return jv(O,L.targetId,ce.ba),ce.snapshot}(n,w,S,R);const l=await Nv(n.localStore,e,!0),c=new Zx(e,l.Es),f=c.ga(l.documents),p=ol.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,p);jv(n,t,y.ba);const _=new eV(e,t,c);return n.xa.set(e,_),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),y.snapshot}async function oV(n,e,t){const i=Ie(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(c=>!gc(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ad(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ap(i.remoteStore,o.targetId),ud(i,o.targetId)}).catch(Co)):(ud(i,o.targetId),await ad(i.localStore,o.targetId,!0))}async function aV(n,e){const t=Ie(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ap(t.remoteStore,i.targetId))}async function lV(n,e,t){const i=mV(n);try{const o=await function(c,f){const p=Ie(c),y=vt.now(),_=f.reduce((R,N)=>R.add(N.key),xe());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=Mr(),O=xe();return p.hs.getEntries(R,_).next(L=>{N=L,N.forEach((W,H)=>{H.isValidDocument()||(O=O.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(R,N)).next(L=>{w=L;const W=[];for(const H of f){const X=AR(H,w.get(H.key).overlayedDocument);X!=null&&W.push(new wi(H.key,X,XE(X.value.mapValue),or.exists(!0)))}return p.mutationQueue.addMutationBatch(R,y,W,f)}).next(L=>{S=L;const W=L.applyToLocalDocumentSet(w,O);return p.documentOverlayCache.saveOverlays(R,L.batchId,W)})}).then(()=>({batchId:S.batchId,changes:ow(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,f,p){let y=c.qa[c.currentUser.toKey()];y||(y=new nt(ke)),y=y.insert(f,p),c.qa[c.currentUser.toKey()]=y}(i,o.batchId,t),await ll(i,o.changes),await Sc(i.remoteStore)}catch(o){const l=fp(o,"Failed to persist write");t.reject(l)}}async function Uw(n,e){const t=Ie(n);try{const i=await Ex(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.La.get(l);c&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?Ue(c.Fa):o.removedDocuments.size>0&&(Ue(c.Fa),c.Fa=!1))}),await ll(t,i,e)}catch(i){await Co(i)}}function Uv(n,e,t){const i=Ie(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,c)=>{const f=c.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(c,f){const p=Ie(c);p.onlineState=f;let y=!1;p.queries.forEach((_,w)=>{for(const S of w.J_)S.ea(f)&&(y=!0)}),y&&dp(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uV(n,e,t){const i=Ie(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.La.get(e),l=o&&o.key;if(l){let c=new nt(_e.comparator);c=c.insert(l,$t.newNoDocument(l,Se.min()));const f=xe().add(l),p=new Ec(Se.min(),new Map,new nt(ke),c,f);await Uw(i,p),i.Ba=i.Ba.remove(l),i.La.delete(e),pp(i)}else await ad(i.localStore,e,!1).then(()=>ud(i,e,t)).catch(Co)}async function cV(n,e){const t=Ie(n),i=e.batch.batchId;try{const o=await _x(t.localStore,e);zw(t,i,null),jw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ll(t,o)}catch(o){await Co(o)}}async function hV(n,e,t){const i=Ie(n);try{const o=await function(c,f){const p=Ie(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return p.mutationQueue.lookupMutationBatch(y,f).next(w=>(Ue(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>p.localDocuments.getDocuments(y,_))})}(i.localStore,e);zw(i,e,t),jw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ll(i,o)}catch(o){await Co(o)}}function jw(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function zw(n,e,t){const i=Ie(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function ud(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||$w(n,i)})}function $w(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(ap(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),pp(n))}function jv(n,e,t){for(const i of t)i instanceof Fw?(n.ka.addReference(i.key,e),fV(n,i)):i instanceof bw?(se("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||$w(n,i.key)):Te()}function fV(n,e){const t=e.key,i=t.path.canonicalString();n.Ba.get(t)||n.Na.has(i)||(se("SyncEngine","New document in limbo: "+t),n.Na.add(i),pp(n))}function pp(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new _e(Je.fromString(e)),i=n.Ka.next();n.La.set(i,new tV(t)),n.Ba=n.Ba.insert(t,i),kw(n.remoteStore,new ai(sr(Zd(t.path)),i,"TargetPurposeLimboResolution",fc.oe))}}async function ll(n,e,t){const i=Ie(n),o=[],l=[],c=[];i.xa.isEmpty()||(i.xa.forEach((f,p)=>{c.push(i.Ua(p,e,t).then(y=>{var _;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=op.zi(p.targetId,y);l.push(w)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(p,y){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>q.forEach(y,S=>q.forEach(S.Wi,R=>_.persistence.referenceDelegate.addReference(w,S.targetId,R)).next(()=>q.forEach(S.Gi,R=>_.persistence.referenceDelegate.removeReference(w,S.targetId,R)))))}catch(w){if(!Ro(w))throw w;se("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const R=_.us.get(S),N=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(N);_.us=_.us.insert(S,O)}}}(i.localStore,l))}async function dV(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await Cw(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(f=>{f.forEach(p=>{p.reject(new ge(Y.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ll(t,i.Ts)}}function pV(n,e){const t=Ie(n),i=t.La.get(e);if(i&&i.Fa)return xe().add(i.key);{let o=xe();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const f=t.xa.get(c);o=o.unionWith(f.view.fa)}return o}}function Ww(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uV.bind(null,e),e.Ma.R_=Xx.bind(null,e.eventManager),e.Ma.Wa=Yx.bind(null,e.eventManager),e}function mV(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hV.bind(null,e),e}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return vx(this.persistence,new gx,e.initialUser,this.serializer)}ja(e){return new Pw(sp.ei,this.serializer)}za(e){return new Ix}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class gV extends sc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ue(this.persistence.referenceDelegate instanceof rc);const i=this.persistence.referenceDelegate.garbageCollector;return new tx(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Pw(i=>rc.ei(i,t),this.serializer)}}class cd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Uv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dV.bind(null,this.syncEngine),await qx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Hx}()}createDatastore(e){const t=wc(e.databaseInfo.databaseId),i=function(l){return new xx(l)}(e.databaseInfo);return function(l,c,f,p){return new Dx(l,c,f,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,f){return new Mx(i,o,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Uv(this.syncEngine,t,0),function(){return Lv.p()?new Lv:new Px}())}createSyncEngine(e,t){return function(o,l,c,f,p,y,_){const w=new nV(o,l,c,f,p,y);return _&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);se("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await al(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cd.provider={build:()=>new cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=HE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{se("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(se("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Pf(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Cw(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function zv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _V(n);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Ov(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Ov(e.remoteStore,o)),n._onlineComponents=e}async function _V(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),await Pf(n,new sc)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Pf(n,new gV(void 0));return n._offlineComponents}async function qw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await zv(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await zv(n,new cd))),n._onlineComponents}function EV(n){return qw(n).then(e=>e.syncEngine)}async function $v(n){const e=await qw(n),t=e.eventManager;return t.onListen=rV.bind(null,e.syncEngine),t.onUnlisten=oV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aV.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n,e,t){if(!t)throw new ge(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wV(n,e,t,i){if(e===!0&&i===!0)throw new ge(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qv(n){if(!_e.isDocumentKey(n))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kv(n){if(_e.isDocumentKey(n))throw new ge(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function is(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mp(n);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VC;switch(i.type){case"firstParty":return new MC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Wv.get(t);i&&(se("ComponentProvider","Removing Datastore"),Wv.delete(t),i.terminate())}(this),Promise.resolve()}}function TV(n,e,t,i={}){var o;const l=(n=is(n,Ac))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=zt.MOCK_USER;else{f=uP(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(y)}n._authCredentials=new kC(new KE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ic(this.firestore,e,this._query)}}class gn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class hi extends Ic{constructor(e,t,i){super(e,t,Zd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new _e(e))}withConverter(e){return new hi(this.firestore,e,this._path)}}function SV(n,e,...t){if(n=kr(n),Hw("collection","path",e),n instanceof Ac){const i=Je.fromString(e,...t);return Kv(i),new hi(n,null,i)}{if(!(n instanceof gn||n instanceof hi))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return Kv(i),new hi(n.firestore,null,i)}}function Gw(n,e,...t){if(n=kr(n),arguments.length===1&&(e=HE.newId()),Hw("doc","path",e),n instanceof Ac){const i=Je.fromString(e,...t);return qv(i),new gn(n,null,new _e(i))}{if(!(n instanceof gn||n instanceof hi))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return qv(i),new gn(n.firestore,n instanceof hi?n.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new xw(this,"async_queue_retry"),this.fu=()=>{const i=If();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new rs;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ro(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(i);throw Nr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=hp.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function Qv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(n,["next","error","complete"])}class el extends Ac{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Gv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function AV(n,e){const t=typeof n=="object"?n:vC(),i=typeof n=="string"?n:"(default)",o=pC(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=aP("firestore");l&&TV(o,...l)}return o}function Qw(n){if(n._terminated)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IV(n),n._firestoreClient}function IV(n){var e,t,i;const o=n._freezeSettings(),l=function(f,p,y,_){return new QC(f,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Kw(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new vV(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Lt.fromBase64String(e))}catch(t){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=/^__.*__$/;class CV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}}class Xw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class _p{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new _p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Bu(e),o}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return oc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Yw(this.Mu)&&PV.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class RV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||wc(e)}$u(e,t,i,o=!1){return new _p({Mu:e,methodName:t,Ku:i,path:Mt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jw(n){const e=n._freezeSettings(),t=wc(n._databaseId);return new RV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xV(n,e,t,i,o,l={}){const c=n.$u(l.merge||l.mergeFields?2:0,e,t,o);Ep("Data must be an object, but it was:",c,i);const f=Zw(i,c);let p,y;if(l.merge)p=new pn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const S=hd(e,w,t);if(!c.contains(S))throw new ge(Y.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);tT(_,S)||_.push(S)}p=new pn(_),y=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=c.fieldTransforms;return new CV(new on(f),p,y)}class Cc extends gp{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cc}}function VV(n,e,t,i){const o=n.$u(1,e,t);Ep("Data must be an object, but it was:",o,i);const l=[],c=on.empty();Ei(i,(p,y)=>{const _=wp(e,p,t);y=kr(y);const w=o.Lu(_);if(y instanceof Cc)l.push(_);else{const S=Rc(y,w);S!=null&&(l.push(_),c.set(_,S))}});const f=new pn(l);return new Xw(c,f,o.fieldTransforms)}function kV(n,e,t,i,o,l){const c=n.$u(1,e,t),f=[hd(e,i,t)],p=[o];if(l.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(hd(e,l[S])),p.push(l[S+1]);const y=[],_=on.empty();for(let S=f.length-1;S>=0;--S)if(!tT(y,f[S])){const R=f[S];let N=p[S];N=kr(N);const O=c.Lu(R);if(N instanceof Cc)y.push(R);else{const L=Rc(N,O);L!=null&&(y.push(R),_.set(R,L))}}const w=new pn(y);return new Xw(_,w,c.fieldTransforms)}function Rc(n,e){if(eT(n=kr(n)))return Ep("Unsupported field value:",e,n),Zw(n,e);if(n instanceof gp)return function(i,o){if(!Yw(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const f of i){let p=Rc(f,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=kr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:nc(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nc(o.serializer,l)}}if(i instanceof yp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof To)return{bytesValue:_w(o.serializer,i._byteString)};if(i instanceof gn){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof vp)return function(c,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.qu("VectorValues must only contain numeric values.");return ep(f.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${mp(i)}`)}(n,e)}function Zw(n,e){const t={};return GE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(n,(i,o)=>{const l=Rc(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function eT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof yp||n instanceof To||n instanceof gn||n instanceof gp||n instanceof vp)}function Ep(n,e,t){if(!eT(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=mp(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function hd(n,e,t){if((e=kr(e))instanceof Pc)return e._internalPath;if(typeof e=="string")return wp(n,e);throw oc("Field path arguments must be of type string or ",n,!1,void 0,t)}const DV=new RegExp("[~\\*/\\[\\]]");function wp(n,e,t){if(e.search(DV)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pc(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ge(Y.INVALID_ARGUMENT,f+n+p)}function tT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NV extends nT{data(){return super.data()}}function rT(n,e){return typeof e=="string"?wp(n,e):e instanceof Pc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LV{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ei(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>lt(c.doubleValue));return new vp(l)}convertGeoPoint(e){return new yp(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=pc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const t=mi(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);Ue(Iw(i));const o=new Xa(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return o.isEqual(t)||Nr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iT extends nT{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(rT("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class ju extends iT{data(e={}){return super.data(e)}}class FV{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Da(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ju(this._firestore,this._userDataWriter,i.key,i,new Da(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(f=>{const p=new ju(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new ju(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:bV(f.type),doc:p,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class sT extends LV{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function BV(n,e,t,...i){n=is(n,gn);const o=is(n.firestore,el),l=Jw(o);let c;return c=typeof(e=kr(e))=="string"||e instanceof Pc?kV(l,"updateDoc",n._key,e,t,i):VV(l,"updateDoc",n._key,e),oT(o,[c.toMutation(n._key,or.exists(!0))])}function UV(n,e){const t=is(n.firestore,el),i=Gw(n),o=OV(n.converter,e);return oT(t,[xV(Jw(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,or.exists(!1))]).then(()=>i)}function jV(n,...e){var t,i,o;n=kr(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Qv(e[c])||(l=e[c],c++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Qv(e[c])){const w=e[c];e[c]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[c+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[c+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,y,_;if(n instanceof gn)y=is(n.firestore,el),_=Zd(n._key.path),p={next:w=>{e[c]&&e[c](zV(y,n,w))},error:e[c+1],complete:e[c+2]};else{const w=is(n,Ic);y=is(w.firestore,el),_=w._query;const S=new sT(y);p={next:R=>{e[c]&&e[c](new FV(y,S,w,R))},error:e[c+1],complete:e[c+2]},MV(n._query)}return function(S,R,N,O){const L=new yV(O),W=new Jx(R,L,N);return S.asyncQueue.enqueueAndForget(async()=>Gx(await $v(S),W)),()=>{L.eu(),S.asyncQueue.enqueueAndForget(async()=>Qx(await $v(S),W))}}(Qw(y),_,f,p)}function oT(n,e){return function(i,o){const l=new rs;return i.asyncQueue.enqueueAndForget(async()=>lV(await EV(i),o,l)),l.promise}(Qw(n),e)}function zV(n,e,t){const i=t.docs.get(e._key),o=new sT(n);return new iT(n,o,e._key,i,new Da(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Po=o})(yC),Xu(new Ha("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new el(new DC(i.getProvider("auth-internal")),new OC(i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(y.options.projectId,_)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),co(cv,"4.7.6",e),co(cv,"4.7.6","esm2017")})();const $V={apiKey:"AIzaSyDaEBKWvFiT3hMTKhz_DU5k9i2FCip0Mx4",authDomain:"imageboard-176a7.firebaseapp.com",projectId:"imageboard-176a7",storageBucket:"imageboard-176a7.appspot.com",messagingSenderId:"848950340650",appId:"1:848950340650:web:fd52a1c2805a6829e56753"},WV=FE($V),Xv=AV(WV);function qV(){const[n,e]=fe.useState([]),[t,i]=fe.useState(""),[o,l]=fe.useState(null),[c,f]=fe.useState(""),[p,y]=fe.useState(""),_=SV(Xv,"posts");fe.useEffect(()=>{console.log("Setting up Firestore real-time listener...");const N=jV(_,O=>{const L=O.docs.map(W=>({id:W.id,...W.data()}));console.log("Fetched posts from Firestore:",L),e(L)});return()=>{console.log("Cleaning up Firestore listener..."),N()}},[]);const w=async()=>{if(t||o){const N=c.trim()?c:"An0n",O={text:t,image:o,username:N,country:p,comments:[],createdAt:new Date().toISOString()};try{console.log("Starting Firestore write operation...");const L=performance.now(),W=await UV(_,O),H=performance.now();console.log(`Firestore write completed. Time taken: ${H-L}ms`),e(X=>[{id:W.id,...O},...X]),i(""),l(null),f(""),y("")}catch(L){console.error("Error writing to Firestore:",L)}}},S=N=>{const O=N.target.files[0];if(O){const L=new FileReader;L.onloadend=()=>l(L.result),L.readAsDataURL(O)}},R=async(N,O)=>{const L=n.map(W=>W.id===N?{...W,comments:[...W.comments,O]}:W);e(L);try{console.log(`Updating Firestore document for post ID: ${N}`);const W=Gw(Xv,"posts",N),H=L.find(X=>X.id===N);await BV(W,{comments:H.comments}),console.log("Firestore document updated successfully.")}catch(W){console.error("Error updating Firestore document:",W)}};return me.jsx("div",{className:"min-h-screen bg-purple-900 text-white p-6 flex flex-col items-center",children:me.jsxs("div",{className:"w-full max-w-2xl",children:[me.jsxs(Cf,{className:"p-4 bg-purple-800 rounded-2xl shadow-md",children:[me.jsx(CE,{username:c,setUsername:f,country:p,setCountry:y}),me.jsx(Jv,{placeholder:"What's on your mind?",value:t,onChange:N=>i(N.target.value),className:"w-full mb-3 p-2 rounded-lg bg-purple-700 text-white"}),me.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",id:"upload"}),me.jsxs("label",{htmlFor:"upload",className:"flex items-center gap-2 cursor-pointer text-gray-300 hover:text-white",children:[me.jsx(S0,{size:20})," Upload Image"]}),o&&me.jsx("img",{src:o,alt:"Preview",className:"mt-3 rounded-lg max-h-40"}),me.jsx(Yv,{onClick:w,className:"w-full mt-4 bg-purple-600 hover:bg-purple-500",children:"Post"})]}),me.jsx("div",{className:"mt-6 space-y-4",children:n.map(N=>me.jsx(GI.div,{initial:{opacity:0},animate:{opacity:1},children:me.jsxs(Cf,{className:"p-4 bg-purple-800 rounded-2xl shadow-md",children:[me.jsxs("div",{className:"flex items-center mb-2",children:[me.jsx("span",{className:"mr-2",children:N.country}),me.jsx("span",{className:"font-bold",children:N.username})]}),N.text&&me.jsx("p",{className:"mb-2 text-white",children:N.text}),N.image&&me.jsx("img",{src:N.image,alt:"Post",className:"rounded-lg max-h-60"}),me.jsx(xE,{comments:N.comments,addReply:(O,L)=>{const W=N.comments.map(H=>H.id===O?{...H,replies:[...H.replies,L]}:H);e(H=>H.map(X=>X.id===N.id?{...X,comments:W}:X))}}),me.jsx(YI,{onSubmit:O=>{R(N.id,O)}})]})},N.id))})]})})}y0.createRoot(document.getElementById("root")).render(me.jsx(fe.StrictMode,{children:me.jsx(qV,{})}));
